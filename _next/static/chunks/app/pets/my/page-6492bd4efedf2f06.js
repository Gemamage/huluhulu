(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[133],{8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},211:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7810:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6142:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9617:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9764:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},1138:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4775:function(e,t,s){Promise.resolve().then(s.bind(s,7814))},7814:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var r=s(7437),n=s(2265),a=s(1396),i=s.n(a),c=s(575),l=s(5671),d=s(3277),o=s(7625),u=s(5453),x=s(6862),h=s(6210),m=s(7578),f=s(7810),p=s(6142),y=s(8203),j=s(211),v=s(9764),g=s(9617),N=s(1138),w=s(9883);function b(e){var t;let{pet:s,onEdit:n,onDelete:a}=e;return(0,r.jsxs)(l.Zb,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"relative",children:[s.images&&s.images.length>0?(0,r.jsx)("img",{src:s.images[0],alt:s.name,className:"w-full h-48 object-cover"}):(0,r.jsx)("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"h-12 w-12 text-gray-400"})}),(0,r.jsx)(d.C,{className:"absolute top-2 right-2 ".concat((e=>{switch(e){case"lost":return"bg-red-100 text-red-800 border-red-200";case"found":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(s.status)),children:(e=>{switch(e){case"lost":return"走失";case"found":return"找到";default:return"未知"}})(s.status)})]}),(0,r.jsx)(l.Ol,{className:"pb-3",children:(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ll,{className:"text-lg",children:s.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:s.breed})]})})}),(0,r.jsxs)(l.aY,{className:"pt-0",children:[(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{className:"truncate",children:"string"==typeof s.lastSeenLocation?s.lastSeenLocation:(null===(t=s.lastSeenLocation)||void 0===t?void 0:t.address)||"未提供位置"})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:s.lastSeenDate?new Date(s.lastSeenDate).toLocaleDateString("zh-TW"):"未提供日期"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),(0,r.jsx)("span",{children:s.views||0})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),(0,r.jsx)("span",{children:s.shares||0})]})]}),(0,r.jsxs)("span",{children:["發布於 ",new Date(s.createdAt).toLocaleDateString("zh-TW")]})]}),(0,r.jsx)(u.Z,{className:"mb-4"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(c.z,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:(0,r.jsx)(i(),{href:"/pets/".concat(s._id),children:"查看詳情"})}),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>n(s._id),children:(0,r.jsx)(g.Z,{className:"h-4 w-4"})}),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>a(s._id),className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})]})]})]})}function k(){return(0,r.jsxs)(l.Zb,{className:"overflow-hidden",children:[(0,r.jsx)(o.O,{className:"w-full h-48"}),(0,r.jsxs)(l.Ol,{className:"pb-3",children:[(0,r.jsx)(o.O,{className:"h-6 w-3/4"}),(0,r.jsx)(o.O,{className:"h-4 w-1/2"})]}),(0,r.jsxs)(l.aY,{className:"pt-0",children:[(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsx)(o.O,{className:"h-4 w-full"}),(0,r.jsx)(o.O,{className:"h-4 w-2/3"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(o.O,{className:"h-8 flex-1"}),(0,r.jsx)(o.O,{className:"h-8 w-10"}),(0,r.jsx)(o.O,{className:"h-8 w-10"})]})]})]})}function Z(){let{isAuthenticated:e}=(0,h.a)(),{toast:t}=(0,x.pm)(),[s,a]=(0,n.useState)([]),[l,d]=(0,n.useState)(!0),o=new m.Y;(0,n.useEffect)(()=>{e&&u()},[e]);let u=async()=>{try{d(!0);let e=await o.getMyPets();a(Array.isArray(e)?e:e.pets||[])}catch(e){console.error("獲取我的協尋案例失敗:",e),t({title:"錯誤",description:"無法載入您的協尋案例，請稍後再試",variant:"destructive"})}finally{d(!1)}},p=e=>{window.location.href="/pets/".concat(e,"/edit")},y=async e=>{if(confirm("確定要刪除這個協尋案例嗎？此操作無法復原。"))try{await o.deletePet(e),a(s.filter(t=>t._id!==e)),t({title:"成功",description:"協尋案例已刪除"})}catch(e){console.error("刪除協尋案例失敗:",e),t({title:"錯誤",description:"刪除失敗，請稍後再試",variant:"destructive"})}};return e?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"我的協尋案例"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"管理您發布的寵物協尋案例"})]}),(0,r.jsx)(c.z,{asChild:!0,children:(0,r.jsxs)(i(),{href:"/pets/new",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"發布新協尋"]})})]}),l?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,r.jsx)(k,{},t))}):s.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,r.jsx)(b,{pet:e,onEdit:p,onDelete:y},e._id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(f.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"還沒有協尋案例"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"您還沒有發布任何寵物協尋案例"}),(0,r.jsx)(c.z,{asChild:!0,children:(0,r.jsxs)(i(),{href:"/pets/new",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"發布第一個協尋案例"]})})]})]}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(f.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"請先登入"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"您需要登入才能查看自己的協尋案例"}),(0,r.jsx)(c.z,{asChild:!0,children:(0,r.jsx)(i(),{href:"/auth/login",children:"前往登入"})})]})})}},3277:function(e,t,s){"use strict";s.d(t,{C:function(){return c}});var r=s(7437);s(2265);var n=s(6061),a=s(2169);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)(i({variant:s}),t),...n})}},5453:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(7437),n=s(2265),a=s(6823),i=s(2169);let c=n.forwardRef((e,t)=>{let{className:s,orientation:n="horizontal",decorative:c=!0,...l}=e;return(0,r.jsx)(a.f,{ref:t,decorative:c,orientation:n,className:(0,i.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",s),...l})});c.displayName=a.f.displayName},7625:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var r=s(7437),n=s(2169);function a(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...s})}},9381:function(e,t,s){"use strict";s.d(t,{WV:function(){return c},jH:function(){return l}});var r=s(2265),n=s(4887),a=s(7256),i=s(7437),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.Z8)(`Primitive.${t}`),n=r.forwardRef((e,r)=>{let{asChild:n,...a}=e,c=n?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(c,{...a,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function l(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}},6823:function(e,t,s){"use strict";s.d(t,{f:function(){return d}});var r=s(2265),n=s(9381),a=s(7437),i="horizontal",c=["horizontal","vertical"],l=r.forwardRef((e,t)=>{let{decorative:s,orientation:r=i,...l}=e,d=c.includes(r)?r:i;return(0,a.jsx)(n.WV.div,{"data-orientation":d,...s?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...l,ref:t})});l.displayName="Separator";var d=l},3771:function(e,t,s){"use strict";s.d(t,{o:function(){return n}});class r extends Error{}function n(e,t){let s;if("string"!=typeof e)throw new r("Invalid token specified: must be a string");t||(t={});let n=!0===t.header?0:1,a=e.split(".")[n];if("string"!=typeof a)throw new r(`Invalid token specified: missing part #${n+1}`);try{s=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var s;return s=t,decodeURIComponent(atob(s).replace(/(.)/g,(e,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}catch(e){return atob(t)}}(a)}catch(e){throw new r(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(s)}catch(e){throw new r(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}r.prototype.name="InvalidTokenError"}},function(e){e.O(0,[9061,6448,4046,7371,2971,4938,1744],function(){return e(e.s=4775)}),_N_E=e.O()}]);