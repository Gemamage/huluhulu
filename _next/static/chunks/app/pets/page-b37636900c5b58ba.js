(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5329],{6134:function(e,s,a){Promise.resolve().then(a.bind(a,9142))},9142:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return et}});var t=a(7437),l=a(2265),r=a(4033),i=a(7578),c=a(6210),n=a(575),d=a(5671),x=a(3277),o=a(7625),m=a(1927);let h=m.fC;m.wy;let j=m.Fw;var u=a(6142),f=a(8203),N=a(7810),p=a(2741),g=a(1295),v=a(9883),y=a(2482),w=a(9224),b=a(3523),C=a(8244),S=a(1827),Z=a(1396),O=a.n(Z),z=a(6691),k=a.n(z),P=a(6862),_=a(7226),A=a(5943),E=a(2169);let Y=A.fC,I=A.xz,R=A.h_,D=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(A.aV,{className:(0,E.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:s})});D.displayName=A.aV.displayName;let L=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsxs)(R,{children:[(0,t.jsx)(D,{}),(0,t.jsx)(A.VY,{ref:s,className:(0,E.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});L.displayName=A.VY.displayName;let W=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,E.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};W.displayName="AlertDialogHeader";let H=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,E.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};H.displayName="AlertDialogFooter";let U=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(A.Dx,{ref:s,className:(0,E.cn)("text-lg font-semibold",a),...l})});U.displayName=A.Dx.displayName;let V=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(A.dk,{ref:s,className:(0,E.cn)("text-sm text-muted-foreground",a),...l})});V.displayName=A.dk.displayName;let $=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(A.aU,{ref:s,className:(0,E.cn)((0,n.d)(),a),...l})});$.displayName=A.aU.displayName;let B=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(A.$j,{ref:s,className:(0,E.cn)((0,n.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});B.displayName=A.$j.displayName;var F=a(1138),T=a(6141),G=a(6353),M=a(6342);function Q(e){let{onSearchSelect:s,limit:a=10}=e,{user:r}=(0,c.a)(),[m,h]=(0,l.useState)([]),[j,f]=(0,l.useState)(!0),[N,p]=(0,l.useState)(!1),g=async()=>{if(!r){f(!1);return}try{f(!0);let e=await i.e.getSearchHistory(a);e.success&&e.data&&h(e.data.searchHistory)}catch(e){console.error("載入搜尋歷史失敗:",e),(0,P.Am)({title:"載入失敗",description:"無法載入搜尋歷史，請稍後再試",variant:"destructive"})}finally{f(!1)}},v=async()=>{try{p(!0),(await i.e.clearSearchHistory()).success&&(h([]),(0,P.Am)({title:"清除成功",description:"搜尋歷史已清除"}))}catch(e){console.error("清除搜尋歷史失敗:",e),(0,P.Am)({title:"清除失敗",description:"無法清除搜尋歷史，請稍後再試",variant:"destructive"})}finally{p(!1)}},w=e=>{s&&s(e.searchQuery,e.filters)},b=e=>({dog:"狗",cat:"貓",bird:"鳥",rabbit:"兔子",hamster:"倉鼠",fish:"魚",reptile:"爬蟲",other:"其他"})[e]||e,Z=e=>({lost:"走失",found:"尋獲",reunited:"團聚"})[e]||e;return((0,l.useEffect)(()=>{g()},[r,a]),r)?j?(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.O,{className:"h-6 w-24 mb-2"}),(0,t.jsx)(o.O,{className:"h-4 w-32"})]}),(0,t.jsx)(o.O,{className:"h-9 w-20"})]})}),(0,t.jsx)(d.aY,{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.O,{className:"h-4 w-full"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.O,{className:"h-5 w-12"}),(0,t.jsx)(o.O,{className:"h-5 w-16"}),(0,t.jsx)(o.O,{className:"h-5 w-20"})]})]},s))})]}):(0,t.jsxs)(d.Zb,{children:[(0,t.jsx)(d.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(C.Z,{className:"h-5 w-5"}),"搜尋歷史"]}),(0,t.jsx)(d.SZ,{children:"查看您最近的搜尋記錄"})]}),m.length>0&&(0,t.jsxs)(Y,{children:[(0,t.jsx)(I,{asChild:!0,children:(0,t.jsxs)(n.z,{variant:"outline",size:"sm",disabled:N,children:[(0,t.jsx)(F.Z,{className:"h-4 w-4 mr-2"}),"清除"]})}),(0,t.jsxs)(L,{children:[(0,t.jsxs)(W,{children:[(0,t.jsx)(U,{children:"確認清除搜尋歷史"}),(0,t.jsx)(V,{children:"此操作將永久刪除您的所有搜尋歷史記錄，且無法復原。"})]}),(0,t.jsxs)(H,{children:[(0,t.jsx)(B,{children:"取消"}),(0,t.jsx)($,{onClick:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"確認清除"})]})]})]})]})}),(0,t.jsx)(d.aY,{children:0===m.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(S.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"尚無搜尋歷史"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"開始搜尋寵物協尋案例，您的搜尋記錄將會顯示在這裡"})]}):(0,t.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>w(e),children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-medium",children:e.searchQuery||"無關鍵字搜尋"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)(T.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:(0,G.Z)(new Date(e.searchedAt),{addSuffix:!0,locale:M.Z})}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[e.resultCount," 個結果"]})]})]})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.filters.type&&(0,t.jsxs)(x.C,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),b(e.filters.type)]}),e.filters.status&&(0,t.jsx)(x.C,{variant:"secondary",className:"text-xs",children:Z(e.filters.status)}),e.filters.location&&(0,t.jsxs)(x.C,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),e.filters.location]}),e.filters.breed&&(0,t.jsxs)(x.C,{variant:"secondary",className:"text-xs",children:["品種: ",e.filters.breed]}),e.filters.radius&&10!==e.filters.radius&&(0,t.jsxs)(x.C,{variant:"secondary",className:"text-xs",children:["範圍: ",e.filters.radius,"km"]})]})]},e._id))})})]}):(0,t.jsx)(d.Zb,{children:(0,t.jsxs)(d.aY,{className:"flex flex-col items-center justify-center py-8",children:[(0,t.jsx)(C.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 text-center",children:"請登入以查看搜尋歷史"})]})})}var X=a(5790),q=a(7562);function J(e){let{onSearchSelect:s,limit:a=10}=e,[r,c]=(0,l.useState)([]),[m,h]=(0,l.useState)(!0),j=async()=>{try{h(!0);let e=await i.e.getPopularSearches(a);e.success&&e.data&&c(e.data.popularSearches)}catch(e){console.error("載入熱門搜尋失敗:",e),(0,P.Am)({title:"載入失敗",description:"無法載入熱門搜尋，請稍後再試",variant:"destructive"})}finally{h(!1)}},u=e=>{s&&s(e)},f=(e,s)=>{let a=e/s;return a>=.8?"high":a>=.5?"medium":"low"},N=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-primary/10 text-primary border-primary/20";default:return"bg-blue-100 text-blue-800 border-blue-200"}};if((0,l.useEffect)(()=>{j()},[a]),m)return(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.O,{className:"h-5 w-5"}),(0,t.jsx)(o.O,{className:"h-6 w-24"})]}),(0,t.jsx)(o.O,{className:"h-4 w-32"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from({length:8}).map((e,s)=>(0,t.jsx)(o.O,{className:"h-8 w-16"},s))})})]});let p=Math.max(...r.map(e=>e.count));return(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(X.Z,{className:"h-5 w-5"}),"熱門搜尋"]}),(0,t.jsx)(d.SZ,{children:"最近最多人搜尋的關鍵字"})]}),(0,t.jsx)(d.aY,{children:0===r.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(S.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"暫無熱門搜尋"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"當有更多用戶開始搜尋時，熱門關鍵字將會顯示在這裡"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>{let s=N(f(e.count,p));return(0,t.jsxs)(n.z,{variant:"outline",size:"sm",className:"".concat(s," hover:opacity-80 transition-opacity"),onClick:()=>u(e._id),children:[(0,t.jsx)(q.Z,{className:"h-3 w-3 mr-1"}),e._id,(0,t.jsx)(x.C,{variant:"secondary",className:"ml-2 text-xs bg-white/50",children:e.count})]},e._id)})}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[(0,t.jsx)(X.Z,{className:"h-4 w-4"}),"搜尋排行榜"]}),(0,t.jsx)("div",{className:"space-y-2",children:r.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>u(e._id),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"\n                        flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold\n                        ".concat(0===s?"bg-yellow-100 text-yellow-800":1===s?"bg-gray-100 text-gray-800":2===s?"bg-primary/10 text-primary":"bg-blue-100 text-blue-800","\n                      "),children:s+1}),(0,t.jsx)("span",{className:"font-medium",children:e._id})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[e.count," 次搜尋"]}),(0,t.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.count/p*100,"%")}})})]})]},"rank-".concat(e._id)))})]}),r.length>5&&(0,t.jsx)("div",{className:"text-center pt-4",children:(0,t.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>{(0,P.Am)({title:"功能開發中",description:"更多熱門搜尋功能即將推出"})},children:"查看更多熱門搜尋"})})]})})]})}var K=a(7539),ee=a(1852);function es(e){var s,a,r,c;let{pet:o,currentUserId:m,onClick:h}=e,[j,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(0),[b,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>{v(!1),w(0)},[m]);let S=async()=>{if(!m){(0,P.Am)({title:"請先登入",description:"您需要登入才能收藏寵物",variant:"destructive"});return}C(!0);try{j?(await i.e.unfavoritePet(o._id),v(!1),w(e=>e-1),(0,P.Am)({title:"已取消收藏",description:"已從您的收藏清單中移除"})):(await i.e.favoritePet(o._id),v(!0),w(e=>e+1),(0,P.Am)({title:"已加入收藏",description:"已添加到您的收藏清單"}))}catch(e){console.error("Error toggling favorite:",e),(0,P.Am)({title:"操作失敗",description:"請稍後再試",variant:"destructive"})}finally{C(!1)}};return(0,t.jsxs)(d.Zb,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:h,children:[(0,t.jsx)(d.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(d.ll,{className:"text-lg font-semibold",children:o.name}),(0,t.jsxs)(d.SZ,{className:"mt-1",children:[{dog:"狗",cat:"貓",bird:"鳥",rabbit:"兔子",hamster:"倉鼠",fish:"魚",reptile:"爬蟲",other:"其他"}[c=o.type]||c," ",o.breed&&"• ".concat(o.breed)]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsx)(x.C,{variant:"lost"===o.status?"destructive":"secondary",children:"lost"===o.status?"走失":"尋獲"})})]})}),(0,t.jsxs)(d.aY,{className:"space-y-3",children:[o.images&&o.images.length>0&&(0,t.jsx)("div",{className:"aspect-[3/4] bg-gray-100 rounded-md overflow-hidden relative",children:(0,t.jsx)(k(),{src:(null===(s=o.images)||void 0===s?void 0:s[0])||"/placeholder-pet.jpg",alt:o.name,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"truncate",children:"string"==typeof o.lastSeenLocation?o.lastSeenLocation:(null===(a=o.lastSeenLocation)||void 0===a?void 0:a.address)||o.location})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["發布時間: ",new Date(o.createdAt).toLocaleDateString("zh-TW")]})]}),o.description&&(0,t.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:o.description}),o.reward&&o.reward>0&&(0,t.jsxs)("div",{className:"text-sm font-medium text-green-600",children:["懸賞金額: NT$ ",o.reward.toLocaleString()]})]})]}),(0,t.jsx)(d.eW,{className:"pt-3 border-t",children:(0,t.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["瀏覽 ",o.views||0]}),(0,t.jsxs)("span",{children:["分享 ",o.shares||0]}),(0,t.jsxs)("span",{children:["收藏 ",y]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.z,{size:"sm",variant:"outline",asChild:!0,children:(0,t.jsx)(O(),{href:"/pets/".concat(o._id),children:"查看詳情"})}),(0,t.jsx)(n.z,{size:"sm",variant:"outline",onClick:S,disabled:b,className:j?"text-red-500 border-red-500":"",children:(0,t.jsx)(N.Z,{className:"h-4 w-4 ".concat(j?"fill-current":"")})}),(0,t.jsx)(n.z,{size:"sm",variant:"outline",children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})}),(null===(r=o.contactInfo)||void 0===r?void 0:r.email)&&(0,t.jsx)(n.z,{size:"sm",variant:"outline",children:(0,t.jsx)(g.Z,{className:"h-4 w-4"})})]})]})})]})}function ea(){return(0,t.jsxs)(d.Zb,{className:"h-full",children:[(0,t.jsx)(d.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(o.O,{className:"h-5 w-32"}),(0,t.jsx)(o.O,{className:"h-4 w-24"})]}),(0,t.jsx)(o.O,{className:"h-6 w-12"})]})}),(0,t.jsxs)(d.aY,{className:"space-y-3",children:[(0,t.jsx)(o.O,{className:"aspect-video w-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.O,{className:"h-4 w-full"}),(0,t.jsx)(o.O,{className:"h-4 w-3/4"}),(0,t.jsx)(o.O,{className:"h-4 w-1/2"})]})]}),(0,t.jsx)(d.eW,{className:"pt-3 border-t",children:(0,t.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(o.O,{className:"h-3 w-12"}),(0,t.jsx)(o.O,{className:"h-3 w-12"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.O,{className:"h-8 w-20"}),(0,t.jsx)(o.O,{className:"h-8 w-8"}),(0,t.jsx)(o.O,{className:"h-8 w-8"})]})]})})]})}function et(){let{user:e}=(0,c.a)(),s=(0,r.useRouter)(),[a,i]=(0,l.useState)([]),[d,x]=(0,l.useState)(!0),[o,m]=(0,l.useState)({page:1,limit:12,sortBy:"createdAt",sortOrder:"desc"}),[u,f]=(0,l.useState)({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[N,p]=(0,l.useState)(""),[g,Z]=(0,l.useState)(!1),[z,k]=(0,l.useState)(!1),[P,A]=(0,l.useState)({}),E=async()=>{try{x(!0);let e=ee.mockPosts.map(e=>({...e,_id:e.id.toString(),lastSeenLocation:{address:e.location,lat:0,lng:0},contactInfo:{...e.contactInfo,email:""},viewCount:e.viewCount||0,shareCount:e.shareCount||0}));i(e),f({currentPage:1,totalPages:1,totalCount:e.length,hasNext:!1,hasPrev:!1}),console.log("載入了",e.length,"個寵物案例")}catch(s){console.error("載入寵物列表失敗:",s);let e=ee.mockPosts.map(e=>({...e,_id:e.id.toString(),lastSeenLocation:{address:e.location,lat:0,lng:0},contactInfo:{...e.contactInfo,email:""},viewCount:e.viewCount||0,shareCount:e.shareCount||0}));i(e),f({currentPage:1,totalPages:1,totalCount:e.length,hasNext:!1,hasPrev:!1})}finally{x(!1)}};(0,l.useEffect)(()=>{E()},[o]);let Y=e=>{let s=void 0!==e?e:N;m({...o,...P,page:1,search:s||void 0}),p(s),E()},I=(e,s)=>{p(e),s&&A(s),Y(e),k(!1)},R=e=>{m({...o,page:e})};return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"寵物協尋"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"幫助走失的寵物回家，或為尋獲的寵物找到主人"})]}),(0,t.jsx)(n.z,{asChild:!0,children:(0,t.jsxs)(O(),{href:"/pets/lost",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"發布協尋"]})})]}),(0,t.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(K.X,{value:N,onChange:p,onSearch:()=>Y(),suggestions:[],placeholder:"搜尋寵物名稱、品種、地點..."})}),(0,t.jsxs)(n.z,{variant:"outline",onClick:()=>Z(!g),children:[(0,t.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"進階搜尋",g?(0,t.jsx)(w.Z,{className:"h-4 w-4 ml-2"}):(0,t.jsx)(b.Z,{className:"h-4 w-4 ml-2"})]}),e&&(0,t.jsxs)(n.z,{variant:"outline",onClick:()=>k(!z),children:[(0,t.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"歷史",z?(0,t.jsx)(w.Z,{className:"h-4 w-4 ml-2"}):(0,t.jsx)(b.Z,{className:"h-4 w-4 ml-2"})]})]}),(0,t.jsx)(h,{open:g,onOpenChange:Z,children:(0,t.jsx)(j,{children:(0,t.jsx)(_.Z,{filters:P,onFiltersChange:e=>{A(e),m({...o,...e,page:1,search:N||void 0}),E()},onSearch:()=>Y(),onReset:()=>{A({}),p(""),m({page:1,limit:12,sortBy:"createdAt",sortOrder:"desc"}),E()},className:"mb-4"})})}),(0,t.jsx)(h,{open:z,onOpenChange:k,children:(0,t.jsx)(j,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[(0,t.jsx)(Q,{onSearchSelect:I,limit:5}),(0,t.jsx)(J,{onSearchSelect:e=>I(e),limit:8})]})})})]}),!d&&a.length>0&&(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"最新協尋案例"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:a.slice(0,3).map(a=>(0,t.jsx)(es,{pet:a,...(null==e?void 0:e.id)&&{currentUserId:e.id},onClick:()=>s.push("/pets/".concat(a._id))},a._id))})]}),!d&&a.length>3&&(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"更多協尋案例"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:a.slice(3,6).map(a=>(0,t.jsx)(es,{pet:a,...(null==e?void 0:e.id)&&{currentUserId:e.id},onClick:()=>s.push("/pets/".concat(a._id))},a._id))})]}),d&&(0,t.jsxs)("div",{className:"space-y-12",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-6"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:3}).map((e,s)=>(0,t.jsx)(ea,{},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-6"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:3}).map((e,s)=>(0,t.jsx)(ea,{},"second-".concat(s)))})]})]}),!d&&a.length>6&&(0,t.jsx)("div",{className:"text-center mb-8",children:(0,t.jsx)(n.z,{variant:"outline",size:"lg",onClick:()=>{m({...o,limit:o.limit+6}),E()},children:"載入更多案例"})}),!d&&u.totalPages>1&&(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,t.jsx)(n.z,{variant:"outline",disabled:1===u.currentPage,onClick:()=>R(u.currentPage-1),children:"上一頁"}),(0,t.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,u.totalPages)},(e,s)=>{let a=s+1;return(0,t.jsx)(n.z,{variant:a===u.currentPage?"default":"outline",size:"sm",onClick:()=>R(a),children:a},a)})}),(0,t.jsx)(n.z,{variant:"outline",disabled:u.currentPage===u.totalPages,onClick:()=>R(u.currentPage+1),children:"下一頁"})]}),!d&&0===a.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-4",children:(0,t.jsx)(S.Z,{className:"h-16 w-16 mx-auto"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"沒有找到相關的寵物協尋案例"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"嘗試調整搜尋條件或篩選器，或者發布新的協尋案例"}),(0,t.jsx)(n.z,{asChild:!0,children:(0,t.jsxs)(O(),{href:"/pets/lost",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"發布協尋"]})})]})]})}},7625:function(e,s,a){"use strict";a.d(s,{O:function(){return r}});var t=a(7437),l=a(2169);function r(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...a})}},8601:function(e,s,a){"use strict";a.d(s,{$:function(){return l}});var t=a(5566);function l(e){return function(e){if(e.startsWith("http://")||e.startsWith("https://"))return e;let s=void 0!==t&&"true"===t.env.GITHUB_PAGES||window.location.hostname.includes("github.io"),a=e.startsWith("/")?e:"/".concat(e);if(s){let e="huluhulu";{let s=window.location.pathname.split("/");s.length>1&&s[1]&&(e=s[1])}return"/".concat(e).concat(a)}return a}(e)}}},function(e){e.O(0,[9061,6448,9044,4597,5746,9705,1422,6652,8294,4046,7371,5701,1852,2971,4938,1744],function(){return e(e.s=6134)}),_N_E=e.O()}]);