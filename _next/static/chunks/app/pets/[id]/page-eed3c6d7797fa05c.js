(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4328],{3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},6141:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7810:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},1295:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6142:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9617:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},2741:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9764:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},1138:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7972:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8360:function(e,t,s){Promise.resolve().then(s.bind(s,4633))},4633:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return L}});var r=s(7437),n=s(2265),a=s(4033),c=s(1396),i=s.n(c),l=s(6691),d=s.n(l),o=s(575),u=s(5671),x=s(3277),h=s(7625),m=s(6862),f=s(6210),j=s(7578),y=s(8601),p=s(7810),g=s(3067),v=s(9764),N=s(9617),b=s(1138),w=s(6141),k=s(6142),Z=s(8203),T=s(7972),O=s(2741),z=s(1295);function L(e){var t;let{petId:s}=e,c=(0,a.useRouter)(),{user:l}=(0,f.a)(),{toast:L}=(0,m.pm)(),[A,C]=(0,n.useState)(null),[E,M]=(0,n.useState)(!0),[S,P]=(0,n.useState)(!1),_=new j.Y;(0,n.useEffect)(()=>{s&&q()},[s]);let q=async()=>{try{M(!0);let e=await _.getPetById(s);C(e)}catch(e){console.error("獲取寵物資訊失敗:",e),L({title:"錯誤",description:"無法載入寵物資訊，請稍後再試",variant:"destructive"}),c.push("/pets")}finally{M(!1)}},D=async()=>{if(navigator.share)try{await navigator.share({title:"協尋 ".concat(null==A?void 0:A.name),text:"請幫忙協尋 ".concat(null==A?void 0:A.name,"！"),url:window.location.href})}catch(e){console.error("分享失敗:",e)}else try{await navigator.clipboard.writeText(window.location.href),L({title:"已複製",description:"連結已複製到剪貼板"})}catch(e){console.error("複製失敗:",e),L({title:"錯誤",description:"無法複製連結",variant:"destructive"})}},H=async()=>{if(A&&window.confirm("確定要刪除這個協尋案例嗎？此操作無法復原。"))try{P(!0),await _.deletePet(A._id),L({title:"成功",description:"協尋案例已刪除"}),c.push("/pets/my")}catch(e){console.error("刪除失敗:",e),L({title:"錯誤",description:"刪除失敗，請稍後再試",variant:"destructive"})}finally{P(!1)}};if(E)return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,r.jsx)(h.O,{className:"h-10 w-10"}),(0,r.jsx)(h.O,{className:"h-8 w-48"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(h.O,{className:"h-96 w-full rounded-lg"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4",children:Array.from({length:3}).map((e,t)=>(0,r.jsx)(h.O,{className:"h-24 w-full rounded-lg"},t))})]}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(u.Zb,{children:[(0,r.jsxs)(u.Ol,{children:[(0,r.jsx)(h.O,{className:"h-8 w-32"}),(0,r.jsx)(h.O,{className:"h-6 w-24"})]}),(0,r.jsx)(u.aY,{className:"space-y-4",children:Array.from({length:6}).map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(h.O,{className:"h-4 w-20"}),(0,r.jsx)(h.O,{className:"h-4 w-32"})]},t))})]})})]})]})});if(!A)return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(p.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"找不到協尋案例"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"您要查看的協尋案例不存在或已被刪除"}),(0,r.jsx)(o.z,{asChild:!0,children:(0,r.jsx)(i(),{href:"/pets",children:"瀏覽其他協尋案例"})})]})});let Y=l&&("object"==typeof A.owner&&A.owner._id===l.id||"string"==typeof A.owner&&A.owner===l.id),W="object"==typeof A.owner?A.owner.name:A.contactName,V=e=>new Date(e).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"});return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)(o.z,{variant:"outline",size:"icon",asChild:!0,children:(0,r.jsx)(i(),{href:"/pets",children:(0,r.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(o.z,{variant:"outline",size:"sm",onClick:D,children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"分享"]}),Y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.z,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(i(),{href:"/pets/".concat(A._id,"/edit"),children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"編輯"]})}),(0,r.jsxs)(o.z,{variant:"outline",size:"sm",onClick:H,disabled:S,className:"text-red-600 hover:text-red-700",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),S?"刪除中...":"刪除"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:A.images&&A.images.length>0?(0,r.jsx)(d(),{src:(0,y.$)(A.images[0]),alt:A.name,fill:!0,className:"object-cover",priority:!0}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)(p.Z,{className:"h-16 w-16 text-muted-foreground"})})}),A.images&&A.images.length>1&&(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4",children:A.images.slice(1,4).map((e,t)=>(0,r.jsx)("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:(0,r.jsx)(d(),{src:(0,y.$)(e),alt:"".concat(A.name," ").concat(t+2),fill:!0,className:"object-cover"})},t))})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(u.Zb,{children:[(0,r.jsxs)(u.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u.ll,{className:"text-2xl",children:A.name}),(0,r.jsx)(x.C,{className:(e=>{switch(e){case"lost":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"found":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})(A.status),children:(e=>{switch(e){case"lost":return"走失";case"found":return"找到";default:return"未知"}})(A.status)})]}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["dog"===A.type?"狗":"cat"===A.type?"貓":"其他",A.breed&&" • ".concat(A.breed)]})]}),(0,r.jsxs)(u.aY,{className:"space-y-4",children:[A.gender&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"性別"}),(0,r.jsx)("span",{children:"male"===A.gender?"公":"female"===A.gender?"母":"未知"})]}),A.age&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"年齡"}),(0,r.jsxs)("span",{children:[A.age," 歲"]})]}),A.size&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"體型"}),(0,r.jsx)("span",{children:"small"===A.size?"小型":"medium"===A.size?"中型":"大型"})]}),A.color&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"顏色"}),(0,r.jsx)("span",{children:A.color})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"發布時間"}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4 mr-1"}),V(A.createdAt)]})]})]})]}),(0,r.jsxs)(u.Zb,{children:[(0,r.jsx)(u.Ol,{children:(0,r.jsxs)(u.ll,{className:"flex items-center",children:[(0,r.jsx)(k.Z,{className:"h-5 w-5 mr-2"}),"最後出現地點"]})}),(0,r.jsxs)(u.aY,{children:[(0,r.jsx)("p",{children:"string"==typeof A.lastSeenLocation?A.lastSeenLocation:(null===(t=A.lastSeenLocation)||void 0===t?void 0:t.address)||"未提供地址"}),A.lastSeenDate&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-2 flex items-center",children:[(0,r.jsx)(Z.Z,{className:"h-4 w-4 mr-1"}),V(A.lastSeenDate)]})]})]}),A.description&&(0,r.jsxs)(u.Zb,{children:[(0,r.jsx)(u.Ol,{children:(0,r.jsx)(u.ll,{children:"詳細描述"})}),(0,r.jsx)(u.aY,{children:(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:A.description})})]}),(0,r.jsxs)(u.Zb,{children:[(0,r.jsx)(u.Ol,{children:(0,r.jsxs)(u.ll,{className:"flex items-center",children:[(0,r.jsx)(T.Z,{className:"h-5 w-5 mr-2"}),"聯絡資訊"]})}),(0,r.jsxs)(u.aY,{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"聯絡人"}),(0,r.jsx)("span",{children:W||"未提供"})]}),A.contactPhone&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-muted-foreground flex items-center",children:[(0,r.jsx)(O.Z,{className:"h-4 w-4 mr-1"}),"電話"]}),(0,r.jsx)("a",{href:"tel:".concat(A.contactPhone),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400",children:A.contactPhone})]}),A.contactEmail&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-muted-foreground flex items-center",children:[(0,r.jsx)(z.Z,{className:"h-4 w-4 mr-1"}),"信箱"]}),(0,r.jsx)("a",{href:"mailto:".concat(A.contactEmail),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400",children:A.contactEmail})]})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,r.jsx)("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"\uD83D\uDCA1 協尋提示"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,r.jsx)("li",{children:"• 如果您看到這隻寵物，請立即聯繫飼主"}),(0,r.jsx)("li",{children:"• 請不要驚嚇或追趕走失的寵物"}),(0,r.jsx)("li",{children:"• 可以用食物或玩具吸引寵物注意"}),(0,r.jsx)("li",{children:"• 分享此協尋資訊給更多人，增加找到的機會"})]})]})]})})}},3277:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(7437);s(2265);var n=s(6061),a=s(2169);let c=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)(c({variant:s}),t),...n})}},7625:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var r=s(7437),n=s(2169);function a(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...s})}},8601:function(e,t,s){"use strict";s.d(t,{$:function(){return n}});var r=s(5566);function n(e){return function(e){if(e.startsWith("http://")||e.startsWith("https://"))return e;let t=void 0!==r&&"true"===r.env.GITHUB_PAGES||window.location.hostname.includes("github.io"),s=e.startsWith("/")?e:"/".concat(e);if(t){let e="huluhulu";{let t=window.location.pathname.split("/");t.length>1&&t[1]&&(e=t[1])}return"/".concat(e).concat(s)}return s}(e)}},4033:function(e,t,s){e.exports=s(5313)},5566:function(e){var t,s,r,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:c}catch(e){s=c}}();var l=[],d=!1,o=-1;function u(){d&&r&&(d=!1,r.length?l=r.concat(l):o=-1,l.length&&x())}function x(){if(!d){var e=i(u);d=!0;for(var t=l.length;t;){for(r=l,l=[];++o<t;)r&&r[o].run();o=-1,t=l.length}r=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new h(e,t)),1!==l.length||d||i(x)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},function(e){e.O(0,[9061,6448,5746,4046,7371,2971,4938,1744],function(){return e(e.s=8360)}),_N_E=e.O()}]);