(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2616],{1981:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3008:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6264:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1295:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9608:function(e,t,r){Promise.resolve().then(r.bind(r,4603))},4603:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),l=r(2265),s=r(4033),i=r(6210),a=r(575),c=r(5671),o=r(5453),u=r(6264),d=r(3008),f=r(1981),m=r(1295);function x(e){let{token:t,email:r}=e,[x,h]=(0,l.useState)(!!t),[p,y]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[v,b]=(0,l.useState)(""),[N,w]=(0,l.useState)(!1),[k,Z]=(0,l.useState)(0),{verifyEmail:C,user:S}=(0,i.a)(),R=(0,s.useRouter)();(0,l.useEffect)(()=>{if(k>0){let e=setTimeout(()=>{Z(k-1)},1e3);return()=>clearTimeout(e)}},[k]),(0,l.useEffect)(()=>{t&&x&&O(t)},[t]);let O=async e=>{try{await C(e),y(!0),g(!1),setTimeout(()=>{R.push("/")},3e3)}catch(e){g(!0),y(!1),b(e.message||"驗證失敗，請重試")}finally{h(!1)}},E=async()=>{if(!r&&!(null==S?void 0:S.email)){b("無法獲取電子郵件地址");return}w(!0);try{let e=await fetch("/api/auth/resend-verification-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r||(null==S?void 0:S.email)})}),t=await e.json();if(!e.ok)throw Error(t.message||"發送失敗");Z(60)}catch(e){b(e.message||"重新發送失敗，請重試")}finally{w(!1)}};return x?(0,n.jsx)(c.Zb,{className:"w-full max-w-md mx-auto",children:(0,n.jsxs)(c.Ol,{className:"space-y-1 text-center",children:[(0,n.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100",children:(0,n.jsx)(u.Z,{className:"h-6 w-6 text-blue-600 animate-spin"})}),(0,n.jsx)(c.ll,{className:"text-2xl font-bold",children:"驗證中"}),(0,n.jsx)(c.SZ,{children:"正在驗證您的電子郵件，請稍候..."})]})}):p?(0,n.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto",children:[(0,n.jsxs)(c.Ol,{className:"space-y-1 text-center",children:[(0,n.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:(0,n.jsx)(d.Z,{className:"h-6 w-6 text-green-600"})}),(0,n.jsx)(c.ll,{className:"text-2xl font-bold",children:"驗證成功"}),(0,n.jsx)(c.SZ,{children:"您的電子郵件已成功驗證，歡迎加入呼嚕寵物協尋！"})]}),(0,n.jsx)(c.aY,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"text-center text-sm text-muted-foreground space-y-2",children:[(0,n.jsx)("p",{children:"您現在可以使用所有功能了。"}),(0,n.jsx)("p",{children:"頁面將在 3 秒後自動跳轉到首頁..."})]})}),(0,n.jsx)(c.eW,{children:(0,n.jsx)(a.z,{className:"w-full",onClick:()=>R.push("/"),children:"前往首頁"})})]}):j?(0,n.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto",children:[(0,n.jsxs)(c.Ol,{className:"space-y-1 text-center",children:[(0,n.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:(0,n.jsx)(f.Z,{className:"h-6 w-6 text-red-600"})}),(0,n.jsx)(c.ll,{className:"text-2xl font-bold",children:"驗證失敗"}),(0,n.jsx)(c.SZ,{children:v||"電子郵件驗證失敗"})]}),(0,n.jsx)(c.aY,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"text-center text-sm text-muted-foreground space-y-2",children:[(0,n.jsx)("p",{children:"可能的原因："}),(0,n.jsxs)("ul",{className:"text-left space-y-1",children:[(0,n.jsx)("li",{children:"• 驗證連結已過期"}),(0,n.jsx)("li",{children:"• 驗證連結已被使用"}),(0,n.jsx)("li",{children:"• 驗證連結無效"})]})]})}),(0,n.jsxs)(c.eW,{className:"flex flex-col space-y-4",children:[(0,n.jsx)(a.z,{className:"w-full",onClick:E,disabled:N||k>0,children:N?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"重新發送中..."]}):k>0?"請等待 ".concat(k," 秒後重試"):"重新發送驗證郵件"}),(0,n.jsx)(o.Z,{}),(0,n.jsx)(a.z,{variant:"outline",className:"w-full",onClick:()=>R.push("/auth/login"),children:"返回登入"})]})]}):(0,n.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto",children:[(0,n.jsxs)(c.Ol,{className:"space-y-1 text-center",children:[(0,n.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100",children:(0,n.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"})}),(0,n.jsx)(c.ll,{className:"text-2xl font-bold",children:"驗證您的電子郵件"}),(0,n.jsx)(c.SZ,{children:"我們已發送驗證連結到您的電子郵件"})]}),(0,n.jsx)(c.aY,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"text-center text-sm text-muted-foreground space-y-2",children:[(0,n.jsx)("p",{children:"請檢查您的電子郵件信箱："}),(r||(null==S?void 0:S.email))&&(0,n.jsx)("p",{className:"font-medium text-foreground",children:r||(null==S?void 0:S.email)}),(0,n.jsx)("p",{children:"點擊郵件中的驗證連結來完成註冊。"}),(0,n.jsx)("p",{children:"如果您沒有收到郵件，請檢查垃圾郵件資料夾。"})]})}),(0,n.jsxs)(c.eW,{className:"flex flex-col space-y-4",children:[(0,n.jsx)(a.z,{className:"w-full",onClick:E,disabled:N||k>0||!r&&!(null==S?void 0:S.email),children:N?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"重新發送中..."]}):k>0?"請等待 ".concat(k," 秒後重試"):"重新發送驗證郵件"}),(0,n.jsx)(o.Z,{}),(0,n.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:["已經驗證過了？"," ",(0,n.jsx)("button",{type:"button",onClick:()=>R.push("/auth/login"),className:"text-primary hover:underline font-medium",children:"立即登入"})]})]})]})}function h(){let e=(0,s.useSearchParams)(),t=null==e?void 0:e.get("token"),r=null==e?void 0:e.get("email"),l={};return t&&(l.token=t),r&&(l.email=r),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-blue-50 p-4",children:(0,n.jsx)(x,{...l})})}function p(){return(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-blue-50 p-4",children:(0,n.jsx)(c.Zb,{className:"w-full max-w-md mx-auto",children:(0,n.jsx)(c.aY,{className:"flex items-center justify-center py-8",children:(0,n.jsx)(u.Z,{className:"h-8 w-8 animate-spin"})})})}),children:(0,n.jsx)(h,{})})}},575:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return o}});var n=r(7437),l=r(2265),s=r(7256),i=r(6061),a=r(2169);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=l.forwardRef((e,t)=>{let{className:r,variant:l,size:i,asChild:o=!1,...u}=e,d=o?s.g7:"button";return(0,n.jsx)(d,{className:(0,a.cn)(c({variant:l,size:i,className:r})),ref:t,...u})});o.displayName="Button"},5671:function(e,t,r){"use strict";r.d(t,{Ol:function(){return a},SZ:function(){return o},Zb:function(){return i},aY:function(){return u},eW:function(){return d},ll:function(){return c}});var n=r(7437),l=r(2265),s=r(2169);let i=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...l})});i.displayName="Card";let a=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...l})});a.displayName="CardHeader";let c=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...l})});c.displayName="CardTitle";let o=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...l})});o.displayName="CardDescription";let u=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...l})});u.displayName="CardContent";let d=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...l})});d.displayName="CardFooter"},5453:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7437),l=r(2265),s=r(6823),i=r(2169);let a=l.forwardRef((e,t)=>{let{className:r,orientation:l="horizontal",decorative:a=!0,...c}=e;return(0,n.jsx)(s.f,{ref:t,decorative:a,orientation:l,className:(0,i.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",r),...c})});a.displayName=s.f.displayName},4033:function(e,t,r){e.exports=r(5313)},2210:function(e,t,r){"use strict";r.d(t,{F:function(){return s},e:function(){return i}});var n=r(2265);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,n=e.map(e=>{let n=l(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():l(e[t],null)}}}}function i(...e){return n.useCallback(s(...e),e)}},9381:function(e,t,r){"use strict";r.d(t,{WV:function(){return a},jH:function(){return c}});var n=r(2265),l=r(4887),s=r(7256),i=r(7437),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,s.Z8)(`Primitive.${t}`),l=n.forwardRef((e,n)=>{let{asChild:l,...s}=e,a=l?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(a,{...s,ref:n})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{});function c(e,t){e&&l.flushSync(()=>e.dispatchEvent(t))}},6823:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var n=r(2265),l=r(9381),s=r(7437),i="horizontal",a=["horizontal","vertical"],c=n.forwardRef((e,t)=>{let{decorative:r,orientation:n=i,...c}=e,o=a.includes(n)?n:i;return(0,s.jsx)(l.WV.div,{"data-orientation":o,...r?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...c,ref:t})});c.displayName="Separator";var o=c},7256:function(e,t,r){"use strict";r.d(t,{Z8:function(){return i},g7:function(){return a},sA:function(){return o}});var n=r(2265),l=r(2210),s=r(7437);function i(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...s}=e;if(n.isValidElement(r)){let e,i;let a=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,c=function(e,t){let r={...t};for(let n in t){let l=e[n],s=t[n];/^on[A-Z]/.test(n)?l&&s?r[n]=(...e)=>{let t=s(...e);return l(...e),t}:l&&(r[n]=l):"style"===n?r[n]={...l,...s}:"className"===n&&(r[n]=[l,s].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==n.Fragment&&(c.ref=t?(0,l.F)(t,a):a),n.cloneElement(r,c)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:l,...i}=e,a=n.Children.toArray(l),c=a.find(u);if(c){let e=c.props.children,l=a.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...i,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,l):null})}return(0,s.jsx)(t,{...i,ref:r,children:l})});return r.displayName=`${e}.Slot`,r}var a=i("Slot"),c=Symbol("radix.slottable");function o(e){let t=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=c,t}function u(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}},6061:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var n=r(7042);let l=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=n.W,i=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return s(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:a}=t,c=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==a?void 0:a[e];if(null===t)return null;let s=l(t)||l(n);return i[e][s]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return s(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...l}=t;return Object.entries(l).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...o}[t]):({...a,...o})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},3771:function(e,t,r){"use strict";r.d(t,{o:function(){return l}});class n extends Error{}function l(e,t){let r;if("string"!=typeof e)throw new n("Invalid token specified: must be a string");t||(t={});let l=!0===t.header?0:1,s=e.split(".")[l];if("string"!=typeof s)throw new n(`Invalid token specified: missing part #${l+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(s)}catch(e){throw new n(`Invalid token specified: invalid base64 for part #${l+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new n(`Invalid token specified: invalid json for part #${l+1} (${e.message})`)}}n.prototype.name="InvalidTokenError"}},function(e){e.O(0,[9061,4046,2971,4938,1744],function(){return e(e.s=9608)}),_N_E=e.O()}]);