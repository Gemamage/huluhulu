"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5701],{7226:function(e,a,l){l.d(a,{Z:function(){return w}});var s=l(7437),t=l(2265),r=l(575),n=l(5671),i=l(8641),c=l(2782),o=l(5005),d=l(6072),u=l(2169);let f=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,s.jsxs)(d.fC,{ref:a,className:(0,u.cn)("relative flex w-full touch-none select-none items-center",l),...t,children:[(0,s.jsx)(d.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(d.e6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(d.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});f.displayName=d.fC.displayName;var x=l(3277),m=l(5453),h=l(6532),p=l(2549),v=l(6142);let b=[{value:"dog",label:"狗"},{value:"cat",label:"貓"},{value:"bird",label:"鳥"},{value:"rabbit",label:"兔子"},{value:"hamster",label:"倉鼠"},{value:"fish",label:"魚"},{value:"reptile",label:"爬蟲"},{value:"other",label:"其他"}],j=[{value:"lost",label:"走失"},{value:"found",label:"尋獲"},{value:"reunited",label:"團聚"}],y=[{value:"relevance",label:"相關性"},{value:"date_desc",label:"最新發布"},{value:"date_asc",label:"最早發布"},{value:"distance",label:"距離最近"},{value:"reward_desc",label:"獎金最高"},{value:"createdAt",label:"發布時間"},{value:"lastSeen",label:"最後見到時間"},{value:"views",label:"瀏覽次數"}],g=["黃金獵犬","拉布拉多","柴犬","貴賓犬","博美犬","吉娃娃","哈士奇","邊境牧羊犬","德國牧羊犬","法國鬥牛犬","英國鬥牛犬","比熊犬","馬爾濟斯","約克夏","西施犬","米格魯","柯基犬","薩摩耶","阿拉斯加雪橇犬","秋田犬","其他"],N=["英國短毛貓","美國短毛貓","波斯貓","暹羅貓","緬因貓","布偶貓","俄羅斯藍貓","蘇格蘭摺耳貓","孟加拉貓","阿比西尼亞貓","挪威森林貓","土耳其安哥拉貓","埃及貓","曼島貓","加拿大無毛貓","米克斯","其他"];function w(e){let{filters:a,onFiltersChange:l,onSearch:d,onReset:u,className:w}=e,[k,C]=(0,t.useState)(!1),Z=(e,s)=>{l({...a,[e]:s})},_=async()=>{if(!navigator.geolocation){alert("您的瀏覽器不支援地理位置功能");return}C(!0),navigator.geolocation.getCurrentPosition(async e=>{try{let{latitude:a,longitude:l}=e.coords,s="台北市信義區 (".concat(a.toFixed(4),", ").concat(l.toFixed(4),")");Z("location",s),Z("latitude",a),Z("longitude",l)}catch(e){console.error("獲取地址失敗:",e),alert("無法獲取當前地址，請手動輸入")}finally{C(!1)}},e=>{console.error("獲取位置失敗:",e),alert("無法獲取當前位置，請檢查位置權限設定"),C(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},z=Object.values(a).filter(e=>void 0!==e&&""!==e&&null!==e&&("object"!=typeof e||0!==Object.keys(e).length)).length>0;return(0,s.jsxs)(n.Zb,{className:w,children:[(0,s.jsx)(n.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5"}),"進階搜尋",z&&(0,s.jsxs)(x.C,{variant:"secondary",className:"ml-2",children:[Object.values(a).filter(e=>void 0!==e&&""!==e&&null!==e&&("object"!=typeof e||0!==Object.keys(e).length)).length," 個篩選條件"]})]}),(0,s.jsx)(n.SZ,{children:"使用更多條件來精確搜尋寵物協尋案例"})]}),z&&(0,s.jsxs)(r.z,{variant:"outline",size:"sm",onClick:u,children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"清除篩選"]})]})}),(0,s.jsxs)(n.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o._,{children:"寵物類型"}),(0,s.jsxs)(i.Ph,{value:a.type||"all",onValueChange:e=>{Z("type","all"===e?void 0:e),e!==a.type&&Z("breed",void 0)},children:[(0,s.jsx)(i.i4,{children:(0,s.jsx)(i.ki,{placeholder:"選擇寵物類型"})}),(0,s.jsxs)(i.Bw,{children:[(0,s.jsx)(i.Ql,{value:"all",children:"全部類型"}),b.map(e=>(0,s.jsx)(i.Ql,{value:e.value,children:e.label},e.value))]})]})]}),a.type&&("dog"===a.type||"cat"===a.type)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o._,{children:"品種"}),(0,s.jsxs)(i.Ph,{value:a.breed||"all",onValueChange:e=>Z("breed","all"===e?void 0:e),children:[(0,s.jsx)(i.i4,{children:(0,s.jsx)(i.ki,{placeholder:"選擇品種"})}),(0,s.jsxs)(i.Bw,{children:[(0,s.jsx)(i.Ql,{value:"all",children:"全部品種"}),("dog"===a.type?g:"cat"===a.type?N:[]).map(e=>(0,s.jsx)(i.Ql,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o._,{children:"狀態"}),(0,s.jsxs)(i.Ph,{value:a.status||"all",onValueChange:e=>Z("status","all"===e?void 0:e),children:[(0,s.jsx)(i.i4,{children:(0,s.jsx)(i.ki,{placeholder:"選擇狀態"})}),(0,s.jsxs)(i.Bw,{children:[(0,s.jsx)(i.Ql,{value:"all",children:"全部狀態"}),j.map(e=>(0,s.jsx)(i.Ql,{value:e.value,children:e.label},e.value))]})]})]}),(0,s.jsx)(m.Z,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o._,{children:"地點搜尋"}),(0,s.jsxs)(r.z,{type:"button",variant:"outline",size:"sm",onClick:_,disabled:k,children:[(0,s.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),k?"定位中...":"使用當前位置"]})]}),(0,s.jsx)(c.I,{placeholder:"輸入地點 (例: 台北市信義區)",value:a.location||"",onChange:e=>Z("location",e.target.value||void 0)}),a.location&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(o._,{children:["搜尋範圍: ",a.radius||10," 公里"]}),(0,s.jsx)(f,{value:[a.radius||10],onValueChange:e=>{let[a]=e;return Z("radius",a)},max:50,min:1,step:1,className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:"1km"}),(0,s.jsx)("span",{children:"50km"})]})]})]}),(0,s.jsx)(m.Z,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(o._,{children:"排序方式"}),(0,s.jsxs)(i.Ph,{value:a.sortBy||"relevance",onValueChange:e=>Z("sortBy",e),children:[(0,s.jsx)(i.i4,{children:(0,s.jsx)(i.ki,{})}),(0,s.jsx)(i.Bw,{children:y.map(e=>(0,s.jsx)(i.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsxs)(r.z,{onClick:d,className:"flex-1",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"套用篩選"]}),z&&(0,s.jsx)(r.z,{variant:"outline",onClick:u,children:"重置"})]})]})]})}},7539:function(e,a,l){l.d(a,{X:function(){return h}});var s=l(7437),t=l(2265),r=l(7578),n=l(575),i=l(2782),c=l(5671),o=l(3277),d=l(1827),u=l(2549),f=l(6141),x=l(5790),m=l(2169);function h(e){let{value:a,onChange:l,onSearch:h,placeholder:p="搜尋寵物名稱、品種、地點...",className:v}=e,[b,j]=(0,t.useState)([]),[y,g]=(0,t.useState)(!1),[N,w]=(0,t.useState)(!1),[k,C]=(0,t.useState)(-1),Z=(0,t.useRef)(null),_=(0,t.useRef)(null),z=(0,t.useRef)(),R=async e=>{if(!e.trim()){j([]);return}try{w(!0);let a=(await r.e.getSearchSuggestions(e)).map(e=>({query:e,count:0,type:"popular"}));j(a)}catch(e){console.error("載入搜尋建議失敗:",e),j([])}finally{w(!1)}},S=e=>{l(e),C(-1),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{R(e)},300)},B=e=>{l(e.query),g(!1),C(-1),h()};return(0,t.useEffect)(()=>()=>{z.current&&clearTimeout(z.current)},[]),(0,s.jsxs)("div",{className:(0,m.cn)("relative",v),children:[(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),h(),g(!1)},className:"relative",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(i.I,{ref:Z,type:"text",value:a,onChange:e=>S(e.target.value),onFocus:()=>{g(!0),a.trim()&&R(a)},onBlur:e=>{setTimeout(()=>{var a;(null===(a=_.current)||void 0===a?void 0:a.contains(e.relatedTarget))||(g(!1),C(-1))},150)},onKeyDown:e=>{if(!y||0===b.length){"Enter"===e.key&&(h(),g(!1));return}switch(e.key){case"ArrowDown":e.preventDefault(),C(e=>e<b.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),C(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),k>=0&&b[k]?B(b[k]):(h(),g(!1));break;case"Escape":var a;g(!1),C(-1),null===(a=Z.current)||void 0===a||a.blur()}},placeholder:p,className:"pl-10 pr-10"}),a&&(0,s.jsx)(n.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-gray-100",onClick:()=>{var e;l(""),j([]),g(!1),C(-1),null===(e=Z.current)||void 0===e||e.focus()},children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})})]})}),y&&(b.length>0||N)&&(0,s.jsx)(c.Zb,{ref:_,className:"absolute top-full left-0 right-0 mt-1 z-50 shadow-lg border",children:(0,s.jsx)(c.aY,{className:"p-0",children:N?(0,s.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"搜尋中..."}):(0,s.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[b.map((e,a)=>(0,s.jsxs)("div",{className:(0,m.cn)("flex items-center justify-between px-4 py-3 cursor-pointer transition-colors","hover:bg-gray-50",k===a&&"bg-blue-50 border-l-2 border-blue-500"),onClick:()=>B(e),onMouseEnter:()=>C(a),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:["history"===e.type?(0,s.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(x.Z,{className:"h-4 w-4 text-blue-500"}),(0,s.jsx)("span",{className:"text-sm",children:e.query}),"popular"===e.type&&(0,s.jsx)(o.C,{variant:"secondary",className:"text-xs",children:"熱門"})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.count," 次"]})]},"".concat(e.type,"-").concat(e.query))),0===b.length&&!N&&(0,s.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"無相關搜尋建議"})]})})})]})}},3277:function(e,a,l){l.d(a,{C:function(){return i}});var s=l(7437);l(2265);var t=l(6061),r=l(2169);let n=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:l,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)(n({variant:l}),a),...t})}},2782:function(e,a,l){l.d(a,{I:function(){return n}});var s=l(7437),t=l(2265),r=l(2169);let n=t.forwardRef((e,a)=>{let{className:l,type:t,...n}=e;return(0,s.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:a,...n})});n.displayName="Input"},5005:function(e,a,l){l.d(a,{_:function(){return o}});var s=l(7437),t=l(2265),r=l(6743),n=l(6061),i=l(2169);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,s.jsx)(r.f,{ref:a,className:(0,i.cn)(c(),l),...t})});o.displayName=r.f.displayName},8641:function(e,a,l){l.d(a,{Bw:function(){return h},Ph:function(){return d},Ql:function(){return p},i4:function(){return f},ki:function(){return u}});var s=l(7437),t=l(2265),r=l(8010),n=l(3523),i=l(9224),c=l(2442),o=l(2169);let d=r.fC;r.ZA;let u=r.B4,f=t.forwardRef((e,a)=>{let{className:l,children:t,...i}=e;return(0,s.jsxs)(r.xz,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",l),...i,children:[t,(0,s.jsx)(r.JO,{asChild:!0,children:(0,s.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=r.xz.displayName;let x=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,s.jsx)(r.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",l),...t,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let m=t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,s.jsx)(r.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",l),...t,children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})});m.displayName=r.$G.displayName;let h=t.forwardRef((e,a)=>{let{className:l,children:t,position:n="popper",...i}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsxs)(r.VY,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",l),position:n,...i,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.l_,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,s.jsx)(m,{})]})})});h.displayName=r.VY.displayName,t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,s.jsx)(r.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",l),...t})}).displayName=r.__.displayName;let p=t.forwardRef((e,a)=>{let{className:l,children:t,...n}=e;return(0,s.jsxs)(r.ck,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.wU,{children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(r.eT,{children:t})]})});p.displayName=r.ck.displayName,t.forwardRef((e,a)=>{let{className:l,...t}=e;return(0,s.jsx)(r.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",l),...t})}).displayName=r.Z0.displayName},5453:function(e,a,l){l.d(a,{Z:function(){return i}});var s=l(7437),t=l(2265),r=l(6823),n=l(2169);let i=t.forwardRef((e,a)=>{let{className:l,orientation:t="horizontal",decorative:i=!0,...c}=e;return(0,s.jsx)(r.f,{ref:a,decorative:i,orientation:t,className:(0,n.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",l),...c})});i.displayName=r.f.displayName}}]);