"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6171],{6171:function(e,s,t){t.d(s,{B:function(){return v}});var a=t(7437),r=t(2265),n=t(4033),l=t(6210),o=t(575),i=t(2782),d=t(5005),c=t(5671),m=t(5453),u=t(9024),f=t(7972),p=t(1295),h=t(2741),x=t(5589),g=t(7216),b=t(211),w=t(6782);function v(e){let{onSwitchToLogin:s,redirectTo:t="/"}=e,[v,N]=(0,r.useState)({email:"",password:"",confirmPassword:"",name:"",phone:""}),[j,y]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[Z,I]=(0,r.useState)(!1),[_,P]=(0,r.useState)({}),[S,z]=(0,r.useState)(!1),{register:R}=(0,l.a)(),F=(0,n.useRouter)(),V=()=>{let e=(0,w.oM)(v);if(!e.isValid){let s=(0,w._s)(e.errors);return v.password!==v.confirmPassword&&(s.confirmPassword="確認密碼與密碼不一致"),Z||(s.terms="請同意服務條款和隱私政策"),P(s),!1}let s={};return(v.password!==v.confirmPassword&&(s.confirmPassword="確認密碼與密碼不一致"),Z||(s.terms="請同意服務條款和隱私政策"),Object.keys(s).length>0)?(P(s),!1):(P({}),!0)},L=async e=>{if(e.preventDefault(),V()){z(!0);try{await R(v.email,v.password,v.name,v.phone||void 0),F.push(t)}catch(e){}finally{z(!1)}}},$=(e,s)=>{N(t=>({...t,[e]:s})),_[e]&&P(s=>({...s,[e]:""}))};return(0,a.jsxs)(c.Zb,{className:"w-full max-w-md mx-auto",children:[(0,a.jsxs)(c.Ol,{className:"space-y-1",children:[(0,a.jsx)(c.ll,{className:"text-2xl font-bold text-center",children:"註冊"}),(0,a.jsx)(c.SZ,{className:"text-center",children:"加入呼嚕寵物協尋，幫助更多毛孩回家"})]}),(0,a.jsxs)("form",{onSubmit:L,children:[(0,a.jsxs)(c.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"name",children:"姓名 *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.I,{id:"name",type:"text",placeholder:"請輸入您的姓名",value:v.name,onChange:e=>$("name",e.target.value),className:"pl-10 ".concat(_.name?"border-red-500":""),disabled:S})]}),_.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:_.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"email",children:"電子郵件 *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.I,{id:"email",type:"email",placeholder:"請輸入您的電子郵件",value:v.email,onChange:e=>$("email",e.target.value),className:"pl-10 ".concat(_.email?"border-red-500":""),disabled:S})]}),_.email&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:_.email})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"phone",children:"手機號碼"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.I,{id:"phone",type:"tel",placeholder:"請輸入您的手機號碼（選填）",value:v.phone,onChange:e=>$("phone",e.target.value),className:"pl-10 ".concat(_.phone?"border-red-500":""),disabled:S})]}),_.phone&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:_.phone})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"password",children:"密碼 *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.I,{id:"password",type:j?"text":"password",placeholder:"請輸入密碼（至少 8 個字符）",value:v.password,onChange:e=>$("password",e.target.value),className:"pl-10 pr-10 ".concat(_.password?"border-red-500":""),disabled:S}),(0,a.jsx)("button",{type:"button",onClick:()=>y(!j),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",disabled:S,children:j?(0,a.jsx)(g.Z,{className:"h-4 w-4"}):(0,a.jsx)(b.Z,{className:"h-4 w-4"})})]}),_.password&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:_.password})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"confirmPassword",children:"確認密碼 *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.I,{id:"confirmPassword",type:k?"text":"password",placeholder:"請再次輸入密碼",value:v.confirmPassword,onChange:e=>$("confirmPassword",e.target.value),className:"pl-10 pr-10 ".concat(_.confirmPassword?"border-red-500":""),disabled:S}),(0,a.jsx)("button",{type:"button",onClick:()=>C(!k),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",disabled:S,children:k?(0,a.jsx)(g.Z,{className:"h-4 w-4"}):(0,a.jsx)(b.Z,{className:"h-4 w-4"})})]}),_.confirmPassword&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:_.confirmPassword})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.X,{id:"terms",checked:Z,onCheckedChange:e=>{I(e),_.terms&&P(e=>({...e,terms:""}))},disabled:S}),(0,a.jsxs)(d._,{htmlFor:"terms",className:"text-sm",children:["我同意"," ",(0,a.jsx)("a",{href:"/terms",className:"text-primary hover:underline",target:"_blank",children:"服務條款"})," ","和"," ",(0,a.jsx)("a",{href:"/privacy",className:"text-primary hover:underline",target:"_blank",children:"隱私政策"})]})]}),_.terms&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:_.terms})]}),(0,a.jsxs)(c.eW,{className:"flex flex-col space-y-4",children:[(0,a.jsx)(o.z,{type:"submit",className:"w-full",disabled:S,children:S?"註冊中...":"註冊"}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{}),(0,a.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:["已經有帳號？"," ",(0,a.jsx)("button",{type:"button",onClick:s,className:"text-primary hover:underline font-medium",disabled:S,children:"立即登入"})]})]})]})]})]})}},575:function(e,s,t){t.d(s,{d:function(){return i},z:function(){return d}});var a=t(7437),r=t(2265),n=t(7256),l=t(6061),o=t(2169);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:d=!1,...c}=e,m=d?n.g7:"button";return(0,a.jsx)(m,{className:(0,o.cn)(i({variant:r,size:l,className:t})),ref:s,...c})});d.displayName="Button"},5671:function(e,s,t){t.d(s,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return m},ll:function(){return i}});var a=t(7437),r=t(2265),n=t(2169);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});o.displayName="CardHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});i.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});m.displayName="CardFooter"},9024:function(e,s,t){t.d(s,{X:function(){return i}});var a=t(7437),r=t(2265),n=t(6062),l=t(2442),o=t(2169);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{ref:s,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(n.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})})});i.displayName=n.fC.displayName},2782:function(e,s,t){t.d(s,{I:function(){return l}});var a=t(7437),r=t(2265),n=t(2169);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});l.displayName="Input"},5005:function(e,s,t){t.d(s,{_:function(){return d}});var a=t(7437),r=t(2265),n=t(6743),l=t(6061),o=t(2169);let i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.f,{ref:s,className:(0,o.cn)(i(),t),...r})});d.displayName=n.f.displayName},5453:function(e,s,t){t.d(s,{Z:function(){return o}});var a=t(7437),r=t(2265),n=t(6823),l=t(2169);let o=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:o=!0,...i}=e;return(0,a.jsx)(n.f,{ref:s,decorative:o,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...i})});o.displayName=n.f.displayName},6782:function(e,s,t){t.d(s,{$s:function(){return c},Y_:function(){return u},_s:function(){return i},iu:function(){return d},oM:function(){return o},wm:function(){return m}});let a=e=>!!e&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()),r=e=>{if(e.length<8)return!1;let s=/[A-Z]/.test(e),t=/[a-z]/.test(e),a=/[0-9]/.test(e),r=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e);return s&&t&&a&&r},n=e=>{if(!e||!/^[0-9\+\-\(\)\s]+$/.test(e))return!1;let s=e.replace(/\D/g,"");return s.length>=8&&s.length<15},l=e=>null!=e&&("string"!=typeof e||e.trim().length>0),o=e=>{let s=[];return l(e.name)?e.name.trim().length<2&&s.push({field:"name",message:"姓名至少需要2個字符"}):s.push({field:"name",message:"請輸入姓名"}),l(e.email)?a(e.email)||s.push({field:"email",message:"請輸入有效的電子郵件格式"}):s.push({field:"email",message:"請輸入電子郵件"}),l(e.password)?e.password.length<8&&s.push({field:"password",message:"密碼至少需要8個字符"}):s.push({field:"password",message:"請輸入密碼"}),e.phone&&e.phone.trim()&&!n(e.phone)&&s.push({field:"phone",message:"請輸入有效的手機號碼"}),{isValid:0===s.length,errors:s}},i=e=>{let s={};return e.forEach(e=>{s[e.field]=e.message}),s},d=e=>{let s=[];return l(e.email)?a(e.email)||s.push({field:"email",message:"請輸入有效的電子郵件格式"}):s.push({field:"email",message:"電子郵件為必填項目"}),l(e.password)||s.push({field:"password",message:"密碼為必填項目"}),{isValid:0===s.length,errors:s}},c=e=>{let s=[];return l(e.password)?r(e.password)||s.push({field:"password",message:"密碼至少需要8個字符，包含大小寫字母、數字和特殊字符"}):s.push({field:"password",message:"密碼為必填項目"}),l(e.confirmPassword)||s.push({field:"confirmPassword",message:"確認密碼為必填項目"}),{isValid:0===s.length,errors:s}},m=e=>{let s=[];return l(e.name)||s.push({field:"name",message:"寵物名稱為必填項目"}),l(e.type)||s.push({field:"type",message:"寵物類型為必填項目"}),l(e.gender)||s.push({field:"gender",message:"寵物性別為必填項目"}),l(e.size)||s.push({field:"size",message:"寵物體型為必填項目"}),l(e.status)||s.push({field:"status",message:"寵物狀態為必填項目"}),void 0!==e.age&&("number"!=typeof e.age||e.age<0)&&s.push({field:"age",message:"寵物年齡必須為正數"}),e.lastSeenLocation?l(e.lastSeenLocation.address)||s.push({field:"lastSeenLocation.address",message:"最後出現地點為必填項目"}):s.push({field:"lastSeenLocation",message:"最後出現地點為必填項目"}),e.contactInfo?(e.contactInfo.email&&!a(e.contactInfo.email)&&s.push({field:"contactInfo.email",message:"請輸入有效的電子郵件地址"}),e.contactInfo.phone&&!n(e.contactInfo.phone)&&s.push({field:"contactInfo.phone",message:"請輸入有效的電話號碼"}),e.contactInfo.phone||e.contactInfo.email||s.push({field:"contactInfo",message:"至少需要提供一種聯絡方式"})):s.push({field:"contactInfo",message:"聯絡資訊為必填項目"}),{isValid:0===s.length,errors:s}},u={email:{test:e=>a(e),message:"請輸入有效的電子郵件格式"},password:{test:e=>r(e),message:"密碼至少需要8個字符，包含大小寫字母、數字和特殊字符"},phone:{test:e=>n(e),message:"請輸入有效的電話號碼"},name:{test:e=>e&&e.trim().length>=2,message:"姓名至少需要2個字符"}}}}]);