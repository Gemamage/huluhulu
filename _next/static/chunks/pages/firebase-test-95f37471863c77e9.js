(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3860],{1339:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/firebase-test",function(){return s(3282)}])},3282:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return u}});var t=s(5893),o=s(7294),i=s(3977),r=s(6517),a=s(9261);let l=(0,i.C6)().length?(0,i.C6)()[0]:(0,i.ZF)({apiKey:"AIzaSyAeDAcAvq_bWMCzEOb4ZKYN1FfyA2SWkqY",authDomain:"pet-find-4ce00.firebaseapp.com",projectId:"pet-find-4ce00",storageBucket:"pet-find-4ce00.firebasestorage.app",messagingSenderId:"1002054218017",appId:"1:1002054218017:web:2a0e988b59a191371c4e60",measurementId:"G-0BJ5CFRM3L"}),c=null;if("serviceWorker"in navigator)try{c=(0,r.KL)(l)}catch(e){console.error("Firebase messaging initialization failed:",e)}try{(0,a.IH)(l)}catch(e){console.error("Firebase analytics initialization failed:",e)}let d=async()=>{if(!c)return console.warn("Firebase messaging not initialized"),null;try{let e="BJ6NLL0yveEK_SvqelRnNlC61AWRZKkbzj4ytXQ7h69f_-yDi_9lAUEd_ZAU1CLme6QFSDuFBBdbn66ce1X3Kc0";if(!e)return console.error("VAPID key not configured"),null;let n=await (0,r.LP)(c,{vapidKey:e});if(n)return console.log("FCM Token generated:",n),n;return console.log("No registration token available."),null}catch(e){return console.error("An error occurred while retrieving token:",e),null}},g=async()=>"Notification"in window?"granted"===Notification.permission?"granted":"denied"===Notification.permission?"denied":await Notification.requestPermission():(console.warn("This browser does not support notifications"),"denied");var u=()=>{let[e,n]=(0,o.useState)(null),[s,i]=(0,o.useState)("default"),[r,a]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),u=()=>{console.log("Firebase Config Test:"),console.log("API Key:","✓ Set"),console.log("Auth Domain:","✓ Set"),console.log("Project ID:","✓ Set"),console.log("Messaging Sender ID:","✓ Set"),console.log("App ID:","✓ Set"),console.log("VAPID Key:","✓ Set")},h=async()=>{try{let e=await g();i(e),console.log("Notification permission:",e)}catch(e){console.error("Permission request failed:",e),a(e instanceof Error?e.message:"Permission request failed")}},m=async()=>{c(!0),a(null);try{let e=await d();n(e),console.log("FCM Token:",e)}catch(e){console.error("FCM Token generation failed:",e),a(e instanceof Error?e.message:"FCM Token generation failed")}finally{c(!1)}};return(0,o.useEffect)(()=>{u()},[]),(0,t.jsxs)("div",{className:"container mx-auto p-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Firebase 測試頁面"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"環境變數檢查"}),(0,t.jsx)("button",{onClick:u,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"檢查 Firebase 配置"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"請查看瀏覽器控制台以獲取詳細信息"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"通知權限測試"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{onClick:h,className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"請求通知權限"}),(0,t.jsxs)("span",{className:"px-3 py-1 rounded text-sm ".concat("granted"===s?"bg-green-100 text-green-800":"denied"===s?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:["權限狀態: ",s]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"FCM Token 測試"}),(0,t.jsx)("button",{onClick:m,disabled:l,className:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 disabled:opacity-50",children:l?"生成中...":"生成 FCM Token"}),e&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"FCM Token:"}),(0,t.jsx)("p",{className:"text-sm bg-gray-100 p-2 rounded break-all",children:e})]}),r&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:[(0,t.jsx)("strong",{children:"錯誤:"})," ",r]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Service Worker 狀態"}),(0,t.jsx)("button",{onClick:()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{console.log("Service Worker registrations:",e),e.forEach(e=>{var n;console.log("SW:",e.scope,null===(n=e.active)||void 0===n?void 0:n.state)})})},className:"bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600",children:"檢查 Service Worker 狀態"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"請查看瀏覽器控制台以獲取詳細信息"})]})]})]})}}},function(e){e.O(0,[9774,6450,2888,179],function(){return e(e.s=1339)}),_N_E=e.O()}]);