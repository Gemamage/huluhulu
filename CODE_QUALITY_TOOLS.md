# ä»£ç¢¼å“è³ªå·¥å…·ä½¿ç”¨æŒ‡å—

æœ¬é …ç›®æä¾›äº†ä¸€å¥—å®Œæ•´çš„ä»£ç¢¼å“è³ªç®¡ç†å·¥å…·ï¼Œå¹«åŠ©æ‚¨ç¶­è­·é«˜å“è³ªçš„ä»£ç¢¼åº«ã€‚

## ğŸ› ï¸ å·¥å…·æ¦‚è¦½

### 1. ä»£ç¢¼å“è³ªæª¢æŸ¥å·¥å…· (`code-quality-check.js`)
è‡ªå‹•æª¢æ¸¬ä»£ç¢¼æ–‡ä»¶é•·åº¦ã€è¤‡é›œåº¦å’Œæ½›åœ¨å•é¡Œã€‚

### 2. è‡ªå‹•é‡æ§‹å·¥å…· (`auto-refactor.js`)
å¹«åŠ©å°‡å¤§å‹æ–‡ä»¶æ‹†åˆ†ç‚ºæ›´å°ã€æ›´æ˜“ç¶­è­·çš„æ¨¡å¡Šã€‚

### 3. Git Hooks ç®¡ç†å·¥å…· (`setup-git-hooks.js`)
è¨­ç½®è‡ªå‹•åŒ–çš„ä»£ç¢¼å“è³ªæª¢æŸ¥æµç¨‹ã€‚

### 4. å“è³ªå„€è¡¨æ¿ (`quality-dashboard.js`)
ç”Ÿæˆå¯è¦–åŒ–çš„ä»£ç¢¼å“è³ªå ±å‘Šå’Œè¶¨å‹¢åˆ†æã€‚

## ğŸ“‹ å¯ç”¨å‘½ä»¤

### ä»£ç¢¼å“è³ªæª¢æŸ¥
```bash
# åŸºæœ¬å“è³ªæª¢æŸ¥
npm run quality:check

# ç”Ÿæˆè©³ç´°å ±å‘Š
npm run quality:report

# ä¿®å¾©ä»£ç¢¼é¢¨æ ¼å•é¡Œ
npm run quality:fix

# åš´æ ¼æ¨¡å¼æª¢æŸ¥
npm run refactor:check

# å®Œæ•´å“è³ªæª¢æŸ¥ï¼ˆåŒ…å«å„€è¡¨æ¿ï¼‰
npm run quality:full
```

### è‡ªå‹•é‡æ§‹
```bash
# é è¦½é‡æ§‹å»ºè­°ï¼ˆä¸åŸ·è¡Œå¯¦éš›é‡æ§‹ï¼‰
npm run refactor:preview

# è‡ªå‹•é‡æ§‹æŒ‡å®šæ–‡ä»¶
npm run refactor:auto <file-path>

# ç¯„ä¾‹ï¼šé‡æ§‹ lost-pet-form.tsx
npm run refactor:auto frontend/src/components/pets/lost-pet-form.tsx

# é è¦½æ¨¡å¼
npm run refactor:auto frontend/src/components/pets/lost-pet-form.tsx --dry-run
```

### Git Hooks ç®¡ç†
```bash
# è¨­ç½® Git hooks
npm run hooks:setup

# æª¢æŸ¥ hooks ç‹€æ…‹
npm run hooks:check

# æ¸¬è©¦ hooks
npm run hooks:test

# ç§»é™¤ hooks
npm run hooks:remove
```

### å“è³ªå„€è¡¨æ¿
```bash
# é¡¯ç¤ºå“è³ªå„€è¡¨æ¿
npm run dashboard

# é¡¯ç¤ºå“è³ªè¶¨å‹¢
npm run dashboard:trends
```

## ğŸ¯ ä½¿ç”¨æµç¨‹

### æ—¥å¸¸é–‹ç™¼æµç¨‹

1. **é–‹å§‹é–‹ç™¼å‰**
   ```bash
   # æª¢æŸ¥ç•¶å‰ä»£ç¢¼å“è³ª
   npm run quality:check
   
   # æŸ¥çœ‹å„€è¡¨æ¿
   npm run dashboard
   ```

2. **é–‹ç™¼éç¨‹ä¸­**
   ```bash
   # å®šæœŸæª¢æŸ¥ä»£ç¢¼å“è³ª
   npm run quality:check
   
   # ä¿®å¾©ä»£ç¢¼é¢¨æ ¼å•é¡Œ
   npm run quality:fix
   ```

3. **æäº¤å‰**
   ```bash
   # Git hooks æœƒè‡ªå‹•åŸ·è¡Œä»¥ä¸‹æª¢æŸ¥ï¼š
   # - ä»£ç¢¼å“è³ªæª¢æŸ¥
   # - ä»£ç¢¼é¢¨æ ¼æª¢æŸ¥
   # - æ¸¬è©¦
   # - æäº¤è¨Šæ¯æ ¼å¼æª¢æŸ¥
   ```

4. **æ¨é€å‰**
   ```bash
   # Git hooks æœƒè‡ªå‹•åŸ·è¡Œï¼š
   # - å®Œæ•´æ¸¬è©¦å¥—ä»¶
   # - æ§‹å»ºæª¢æŸ¥
   ```

### é‡æ§‹æµç¨‹

1. **è­˜åˆ¥éœ€è¦é‡æ§‹çš„æ–‡ä»¶**
   ```bash
   npm run quality:check
   ```

2. **é è¦½é‡æ§‹å»ºè­°**
   ```bash
   npm run refactor:auto <file-path> --dry-run
   ```

3. **åŸ·è¡Œé‡æ§‹**
   ```bash
   npm run refactor:auto <file-path>
   ```

4. **é©—è­‰é‡æ§‹çµæœ**
   ```bash
   npm test
   npm run lint
   npm run quality:check
   ```

## ğŸ“Š å“è³ªæ¨™æº–

### æ–‡ä»¶å¤§å°é™åˆ¶
- **è­¦å‘Šç·š**: 550 è¡Œ
- **é™åˆ¶ç·š**: 600 è¡Œ
- **å»ºè­°**: å–®å€‹æ–‡ä»¶ä¸è¶…é 600 è¡Œ

### è¤‡é›œåº¦æŒ‡æ¨™
- **å‡½æ•¸æ•¸é‡**: å–®æ–‡ä»¶ä¸è¶…é 20 å€‹å‡½æ•¸
- **çµ„ä»¶æ•¸é‡**: å–®æ–‡ä»¶å»ºè­°åªåŒ…å« 1 å€‹ä¸»è¦çµ„ä»¶
- **å°å…¥èªå¥**: åˆç†çµ„ç¹”ï¼Œé¿å…éå¤šä¾è³´

### æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™
- **æœ€ä½è¦æ±‚**: 50%
- **è‰¯å¥½æ¨™æº–**: 70%
- **å„ªç§€æ¨™æº–**: 90%+

### å“è³ªè©•åˆ†æ¨™æº–
- **A+ (90-100)**: ğŸ† å„ªç§€
- **A (80-89)**: âœ¨ è‰¯å¥½
- **B+ (70-79)**: ğŸ‘ åˆæ ¼
- **B (60-69)**: ğŸ‘Œ å¯æ¥å—
- **C+ (50-59)**: âš ï¸ éœ€è¦æ”¹é€²
- **C (40-49)**: âš ï¸ æœ‰å•é¡Œ
- **D (30-39)**: ğŸ˜Ÿ åš´é‡å•é¡Œ
- **F (0-29)**: ğŸ’¥ éœ€è¦é‡æ§‹

## ğŸ”§ å·¥å…·é…ç½®

### ä»£ç¢¼å“è³ªæª¢æŸ¥é…ç½®
æ–‡ä»¶: `scripts/code-quality-check.js`

```javascript
const CONFIG = {
  maxLines: 600,           // æœ€å¤§è¡Œæ•¸é™åˆ¶
  warningLines: 550,       // è­¦å‘Šè¡Œæ•¸
  excludeDirs: [           // æ’é™¤çš„ç›®éŒ„
    'node_modules', 
    '.git', 
    'dist', 
    'build', 
    '.next', 
    'coverage'
  ],
  includeExtensions: [     // åŒ…å«çš„æ–‡ä»¶é¡å‹
    '.ts', '.tsx', '.js', '.jsx'
  ]
};
```

### Git Hooks é…ç½®

#### Pre-commit Hook
- ä»£ç¢¼å“è³ªæª¢æŸ¥
- ä»£ç¢¼é¢¨æ ¼æª¢æŸ¥ (ESLint)
- å–®å…ƒæ¸¬è©¦
- æäº¤è¨Šæ¯æ ¼å¼æª¢æŸ¥

#### Pre-push Hook
- å®Œæ•´æ¸¬è©¦å¥—ä»¶
- æ§‹å»ºæª¢æŸ¥
- å¤§å‹æ–‡ä»¶è­¦å‘Š

#### Commit Message æ ¼å¼
```
<type>(<scope>): <description>

é¡å‹ (type):
- feat:     æ–°åŠŸèƒ½
- fix:      ä¿®å¾© bug
- docs:     æ–‡æª”æ›´æ–°
- style:    ä»£ç¢¼æ ¼å¼èª¿æ•´
- refactor: é‡æ§‹ä»£ç¢¼
- test:     æ¸¬è©¦ç›¸é—œ
- chore:    å…¶ä»–é›œé …

ç¯„ä¾‹:
feat(auth): æ·»åŠ ç”¨æˆ¶ç™»éŒ„åŠŸèƒ½
fix(api): ä¿®å¾©å¯µç‰©æœç´¢ API éŒ¯èª¤
docs: æ›´æ–° README æ–‡æª”
```

## ğŸ“ˆ å ±å‘Šå’Œåˆ†æ

### å“è³ªå ±å‘Šæ–‡ä»¶
- `code-quality-report.json`: è©³ç´°çš„ä»£ç¢¼å“è³ªå ±å‘Š
- `quality-reports/`: æ­·å²å ±å‘Šç›®éŒ„
- `quality-reports/latest-report.json`: æœ€æ–°å ±å‘Š

### å„€è¡¨æ¿åŠŸèƒ½
- ç¸½é«”å“è³ªè©•åˆ†
- é …ç›®çµ±è¨ˆä¿¡æ¯
- Git çµ±è¨ˆä¿¡æ¯
- ä¾è³´çµ±è¨ˆ
- æ¸¬è©¦è¦†è“‹ç‡
- ä»£ç¢¼å“è³ªå•é¡Œåˆ—è¡¨
- æ”¹é€²å»ºè­°
- è¶¨å‹¢åˆ†æ

## ğŸš€ æœ€ä½³å¯¦è¸

### 1. å®šæœŸæª¢æŸ¥
- æ¯æ—¥é‹è¡Œ `npm run quality:check`
- æ¯é€±æŸ¥çœ‹ `npm run dashboard`
- æ¯æœˆåˆ†æ `npm run dashboard:trends`

### 2. é‡æ§‹ç­–ç•¥
- å„ªå…ˆè™•ç†è¶…é 600 è¡Œçš„æ–‡ä»¶
- æŒ‰ç…§é‡æ§‹æŒ‡å—é€æ­¥æ‹†åˆ†
- é‡æ§‹å¾Œç«‹å³é‹è¡Œæ¸¬è©¦

### 3. åœ˜éšŠå”ä½œ
- æ‰€æœ‰åœ˜éšŠæˆå“¡éƒ½æ‡‰è¨­ç½® Git hooks
- å®šæœŸåˆ†äº«å“è³ªå ±å‘Š
- å»ºç«‹ä»£ç¢¼å¯©æŸ¥æµç¨‹

### 4. æŒçºŒæ”¹é€²
- æ ¹æ“šè¶¨å‹¢åˆ†æèª¿æ•´é–‹ç™¼ç­–ç•¥
- å®šæœŸæ›´æ–°å“è³ªæ¨™æº–
- æ”¶é›†åœ˜éšŠåé¥‹å„ªåŒ–å·¥å…·

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. Git hooks ä¸å·¥ä½œ
```bash
# æª¢æŸ¥ hooks ç‹€æ…‹
npm run hooks:check

# é‡æ–°è¨­ç½® hooks
npm run hooks:setup

# æ¸¬è©¦ hooks
npm run hooks:test
```

#### 2. ä»£ç¢¼å“è³ªæª¢æŸ¥å¤±æ•—
```bash
# æŸ¥çœ‹è©³ç´°éŒ¯èª¤
npm run quality:check

# ä¿®å¾©ä»£ç¢¼é¢¨æ ¼
npm run quality:fix

# æŸ¥çœ‹å…·é«”å•é¡Œ
cat code-quality-report.json
```

#### 3. é‡æ§‹å·¥å…·éŒ¯èª¤
```bash
# ä½¿ç”¨é è¦½æ¨¡å¼æª¢æŸ¥
npm run refactor:auto <file-path> --dry-run

# æª¢æŸ¥å‚™ä»½æ–‡ä»¶
ls refactor-backup/
```

#### 4. æ¸¬è©¦è¦†è“‹ç‡æ•¸æ“šç¼ºå¤±
```bash
# é‹è¡Œæ¸¬è©¦ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
npm run test:coverage

# æª¢æŸ¥è¦†è“‹ç‡æ–‡ä»¶
ls frontend/coverage/
ls backend/coverage/
```

## ğŸ“š ç›¸é—œæ–‡æª”

- [ä»£ç¢¼å“è³ªå¢å¼·è¨ˆåŠƒ](./CODE_QUALITY_ENHANCEMENT.md)
- [é‡æ§‹æŒ‡å—](./REFACTORING_GUIDE.md)
- [Netlify éƒ¨ç½²æŒ‡å—](./NETLIFY_DEPLOYMENT.md)
- [é …ç›® README](./README.md)

## ğŸ¤ è²¢ç»

å¦‚æœæ‚¨æœ‰æ”¹é€²å»ºè­°æˆ–ç™¼ç¾å•é¡Œï¼Œè«‹ï¼š

1. å‰µå»º Issue æè¿°å•é¡Œ
2. æäº¤ Pull Request åŒ…å«æ”¹é€²
3. æ›´æ–°ç›¸é—œæ–‡æª”
4. ç¢ºä¿æ‰€æœ‰å“è³ªæª¢æŸ¥é€šé

---

**è¨˜ä½**: ä»£ç¢¼å“è³ªæ˜¯ä¸€å€‹æŒçºŒæ”¹é€²çš„éç¨‹ã€‚é€™äº›å·¥å…·å¹«åŠ©æ‚¨ç¶­è­·é«˜æ¨™æº–ï¼Œä½†æœ€é‡è¦çš„æ˜¯åœ˜éšŠçš„å…±åŒåŠªåŠ›å’ŒæŒçºŒå­¸ç¿’ã€‚