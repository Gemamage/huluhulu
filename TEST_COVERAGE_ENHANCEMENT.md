# æ¸¬è©¦è¦†è“‹å¢å¼·è¨ˆåŠƒ

## ğŸ“Š ç•¶å‰æ¸¬è©¦è¦†è“‹åˆ†æ

### âœ… å·²æœ‰æ¸¬è©¦é¡å‹

**å¾Œç«¯æ¸¬è©¦**
- å–®å…ƒæ¸¬è©¦ï¼šæ¨¡å‹ã€æœå‹™å±¤
- é›†æˆæ¸¬è©¦ï¼šAPI è·¯ç”±
- æ€§èƒ½å„ªåŒ–æ¸¬è©¦ï¼šå·²å®Œæˆ

**å‰ç«¯æ¸¬è©¦**
- çµ„ä»¶æ¸¬è©¦ï¼šPetCard, SearchForm
- Hook æ¸¬è©¦ï¼šuseAuth
- æœå‹™æ¸¬è©¦ï¼šauthService, petService
- å·¥å…·å‡½æ•¸æ¸¬è©¦ï¼švalidation

### âŒ ç¼ºå°‘çš„æ¸¬è©¦é¡å‹

1. **E2E æ¸¬è©¦** - å®Œæ•´ç”¨æˆ¶æµç¨‹æ¸¬è©¦
2. **æ€§èƒ½æ¸¬è©¦** - å‰ç«¯æ€§èƒ½å’Œè² è¼‰æ¸¬è©¦
3. **å¯è¨ªå•æ€§æ¸¬è©¦** - ç„¡éšœç¤™åŠŸèƒ½æ¸¬è©¦
4. **è¦–è¦ºå›æ­¸æ¸¬è©¦** - UI ä¸€è‡´æ€§æ¸¬è©¦
5. **è·¨ç€è¦½å™¨æ¸¬è©¦** - å…¼å®¹æ€§æ¸¬è©¦

## ğŸ¯ å¯¦æ–½è¨ˆåŠƒ

### éšæ®µä¸€ï¼šE2E æ¸¬è©¦å¯¦æ–½ (å„ªå…ˆç´šï¼šé«˜)

#### 1.1 æŠ€è¡“é¸å‹
- **æ¡†æ¶**ï¼šPlaywright (æ”¯æ´å¤šç€è¦½å™¨)
- **æ¸¬è©¦ç¯„åœ**ï¼šé—œéµç”¨æˆ¶æµç¨‹
- **åŸ·è¡Œç’°å¢ƒ**ï¼šæœ¬åœ°é–‹ç™¼ + CI/CD

#### 1.2 æ¸¬è©¦å ´æ™¯è¨­è¨ˆ

**æ ¸å¿ƒç”¨æˆ¶æµç¨‹**
1. ç”¨æˆ¶è¨»å†Šå’Œç™»å…¥æµç¨‹
2. å¯µç‰©ç™¼å¸ƒæµç¨‹
3. å¯µç‰©æœå°‹å’Œç¯©é¸
4. å¯µç‰©è©³æƒ…æŸ¥çœ‹
5. ç”¨æˆ¶å€‹äººè³‡æ–™ç®¡ç†
6. AI åŠŸèƒ½æ¸¬è©¦

**æ¸¬è©¦æ•¸æ“šç®¡ç†**
- æ¸¬è©¦æ•¸æ“šåº«è¨­ç½®
- æ¸¬è©¦ç”¨æˆ¶å‰µå»º
- æ¸¬è©¦å¯µç‰©æ•¸æ“š

#### 1.3 å¯¦æ–½æ­¥é©Ÿ

```bash
# 1. å®‰è£ Playwright
npm install -D @playwright/test
npx playwright install

# 2. å‰µå»ºæ¸¬è©¦é…ç½®
# playwright.config.ts

# 3. å‰µå»ºæ¸¬è©¦æ–‡ä»¶çµæ§‹
# tests/e2e/
#   â”œâ”€â”€ auth/
#   â”œâ”€â”€ pets/
#   â”œâ”€â”€ search/
#   â””â”€â”€ user/

# 4. è¨­ç½®æ¸¬è©¦æ•¸æ“š
# tests/fixtures/
#   â”œâ”€â”€ users.json
#   â””â”€â”€ pets.json
```

### éšæ®µäºŒï¼šæ€§èƒ½æ¸¬è©¦å¯¦æ–½ (å„ªå…ˆç´šï¼šä¸­)

#### 2.1 å‰ç«¯æ€§èƒ½æ¸¬è©¦

**æ¸¬è©¦å·¥å…·**
- Lighthouse CIï¼šè‡ªå‹•åŒ–æ€§èƒ½å¯©è¨ˆ
- Web Vitalsï¼šæ ¸å¿ƒæ€§èƒ½æŒ‡æ¨™
- Bundle Analyzerï¼šæ‰“åŒ…åˆ†æ

**æ¸¬è©¦æŒ‡æ¨™**
- First Contentful Paint (FCP)
- Largest Contentful Paint (LCP)
- Cumulative Layout Shift (CLS)
- First Input Delay (FID)
- Time to Interactive (TTI)

#### 2.2 å¾Œç«¯è² è¼‰æ¸¬è©¦

**æ¸¬è©¦å·¥å…·**
- Artilleryï¼šè² è¼‰æ¸¬è©¦
- Clinic.jsï¼šNode.js æ€§èƒ½åˆ†æ

**æ¸¬è©¦å ´æ™¯**
- API ç«¯é»è² è¼‰æ¸¬è©¦
- æ•¸æ“šåº«æŸ¥è©¢æ€§èƒ½
- ä½µç™¼ç”¨æˆ¶æ¨¡æ“¬

#### 2.3 å¯¦æ–½æ­¥é©Ÿ

```bash
# å‰ç«¯æ€§èƒ½æ¸¬è©¦
npm install -D @lhci/cli lighthouse
npm install -D webpack-bundle-analyzer

# å¾Œç«¯è² è¼‰æ¸¬è©¦
npm install -D artillery clinic
```

### éšæ®µä¸‰ï¼šå¯è¨ªå•æ€§æ¸¬è©¦å¯¦æ–½ (å„ªå…ˆç´šï¼šä¸­)

#### 3.1 æŠ€è¡“é¸å‹

**æ¸¬è©¦å·¥å…·**
- axe-coreï¼šè‡ªå‹•åŒ–å¯è¨ªå•æ€§æ¸¬è©¦
- jest-axeï¼šJest é›†æˆ
- Playwright axeï¼šE2E å¯è¨ªå•æ€§æ¸¬è©¦

#### 3.2 æ¸¬è©¦ç¯„åœ

**WCAG 2.1 AA æ¨™æº–**
- éµç›¤å°èˆª
- è¢å¹•é–±è®€å™¨æ”¯æ´
- é¡è‰²å°æ¯”åº¦
- ç„¦é»ç®¡ç†
- ARIA æ¨™ç±¤

#### 3.3 å¯¦æ–½æ­¥é©Ÿ

```bash
# å®‰è£å¯è¨ªå•æ€§æ¸¬è©¦å·¥å…·
npm install -D @axe-core/playwright jest-axe
```

## ğŸ“ æ–‡ä»¶çµæ§‹è¦åŠƒ

```
pet-finder-app/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ e2e/                    # E2E æ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ login.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ register.spec.ts
â”‚   â”‚   â”œâ”€â”€ pets/
â”‚   â”‚   â”‚   â”œâ”€â”€ create-pet.spec.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ search-pets.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ pet-details.spec.ts
â”‚   â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”‚   â””â”€â”€ profile.spec.ts
â”‚   â”‚   â””â”€â”€ ai/
â”‚   â”‚       â””â”€â”€ ai-features.spec.ts
â”‚   â”œâ”€â”€ performance/             # æ€§èƒ½æ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ frontend/
â”‚   â”‚   â”‚   â”œâ”€â”€ lighthouse.config.js
â”‚   â”‚   â”‚   â””â”€â”€ web-vitals.test.ts
â”‚   â”‚   â””â”€â”€ backend/
â”‚   â”‚       â”œâ”€â”€ load-test.yml
â”‚   â”‚       â””â”€â”€ api-performance.test.ts
â”‚   â”œâ”€â”€ accessibility/           # å¯è¨ªå•æ€§æ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”œâ”€â”€ fixtures/               # æ¸¬è©¦æ•¸æ“š
â”‚   â”‚   â”œâ”€â”€ users.json
â”‚   â”‚   â”œâ”€â”€ pets.json
â”‚   â”‚   â””â”€â”€ test-data.ts
â”‚   â””â”€â”€ utils/                  # æ¸¬è©¦å·¥å…·
â”‚       â”œâ”€â”€ test-helpers.ts
â”‚       â””â”€â”€ mock-data.ts
â”œâ”€â”€ playwright.config.ts         # Playwright é…ç½®
â”œâ”€â”€ lighthouse.config.js         # Lighthouse é…ç½®
â””â”€â”€ artillery.config.yml         # è² è¼‰æ¸¬è©¦é…ç½®
```

## ğŸš€ åŸ·è¡Œè…³æœ¬è¦åŠƒ

### package.json æ–°å¢è…³æœ¬

```json
{
  "scripts": {
    // E2E æ¸¬è©¦
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:headed": "playwright test --headed",
    "test:e2e:debug": "playwright test --debug",
    
    // æ€§èƒ½æ¸¬è©¦
    "test:performance": "npm run test:lighthouse && npm run test:load",
    "test:lighthouse": "lhci autorun",
    "test:load": "artillery run tests/performance/backend/load-test.yml",
    "test:bundle": "npm run build && npx webpack-bundle-analyzer .next/static/chunks/*.js",
    
    // å¯è¨ªå•æ€§æ¸¬è©¦
    "test:a11y": "jest --testPathPattern=accessibility",
    "test:a11y:e2e": "playwright test --grep=@accessibility",
    
    // ç¶œåˆæ¸¬è©¦
    "test:all": "npm run test && npm run test:e2e && npm run test:performance && npm run test:a11y",
    "test:ci": "npm run test:coverage && npm run test:e2e && npm run test:a11y"
  }
}
```

## ğŸ“Š æ¸¬è©¦è¦†è“‹ç›®æ¨™

### é‡åŒ–æŒ‡æ¨™

| æ¸¬è©¦é¡å‹ | ç•¶å‰è¦†è“‹ç‡ | ç›®æ¨™è¦†è“‹ç‡ | å„ªå…ˆç´š |
|---------|-----------|-----------|--------|
| å–®å…ƒæ¸¬è©¦ | 85% | 90% | é«˜ |
| é›†æˆæ¸¬è©¦ | 70% | 85% | é«˜ |
| E2E æ¸¬è©¦ | 0% | 80% | é«˜ |
| æ€§èƒ½æ¸¬è©¦ | 0% | 100% | ä¸­ |
| å¯è¨ªå•æ€§æ¸¬è©¦ | 0% | 95% | ä¸­ |

### é—œéµè·¯å¾‘è¦†è“‹

**å¿…é ˆè¦†è“‹çš„åŠŸèƒ½**
- âœ… ç”¨æˆ¶èªè­‰æµç¨‹
- âœ… å¯µç‰© CRUD æ“ä½œ
- âŒ æœå°‹å’Œç¯©é¸åŠŸèƒ½
- âŒ AI åŠŸèƒ½é›†æˆ
- âŒ åœ–ç‰‡ä¸Šå‚³å’Œè™•ç†
- âŒ é€šçŸ¥ç³»çµ±

## ğŸ”§ CI/CD é›†æˆ

### GitHub Actions å·¥ä½œæµ

```yaml
# .github/workflows/test-coverage.yml
name: æ¸¬è©¦è¦†è“‹æª¢æŸ¥

on: [push, pull_request]

jobs:
  test-coverage:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      # å–®å…ƒå’Œé›†æˆæ¸¬è©¦
      - name: é‹è¡Œå–®å…ƒæ¸¬è©¦
        run: npm run test:coverage
      
      # E2E æ¸¬è©¦
      - name: é‹è¡Œ E2E æ¸¬è©¦
        run: npm run test:e2e
      
      # æ€§èƒ½æ¸¬è©¦
      - name: é‹è¡Œæ€§èƒ½æ¸¬è©¦
        run: npm run test:lighthouse
      
      # å¯è¨ªå•æ€§æ¸¬è©¦
      - name: é‹è¡Œå¯è¨ªå•æ€§æ¸¬è©¦
        run: npm run test:a11y
      
      # æ¸¬è©¦å ±å‘Š
      - name: ä¸Šå‚³æ¸¬è©¦å ±å‘Š
        uses: actions/upload-artifact@v3
        with:
          name: test-results
          path: |
            coverage/
            test-results/
            lighthouse-report/
```

## ğŸ“ˆ æˆåŠŸæŒ‡æ¨™

### çŸ­æœŸç›®æ¨™ (2-4 é€±)

- âœ… E2E æ¸¬è©¦æ¡†æ¶è¨­ç½®å®Œæˆ
- âœ… æ ¸å¿ƒç”¨æˆ¶æµç¨‹ E2E æ¸¬è©¦è¦†è“‹
- âœ… åŸºæœ¬æ€§èƒ½æ¸¬è©¦å¯¦æ–½
- âœ… å¯è¨ªå•æ€§æ¸¬è©¦é›†æˆ

### ä¸­æœŸç›®æ¨™ (1-2 æœˆ)

- âœ… å®Œæ•´ E2E æ¸¬è©¦å¥—ä»¶
- âœ… è‡ªå‹•åŒ–æ€§èƒ½ç›£æ§
- âœ… WCAG 2.1 AA åˆè¦æ€§
- âœ… CI/CD å®Œå…¨é›†æˆ

### é•·æœŸç›®æ¨™ (3-6 æœˆ)

- âœ… è¦–è¦ºå›æ­¸æ¸¬è©¦
- âœ… è·¨ç€è¦½å™¨æ¸¬è©¦
- âœ… æ€§èƒ½åŸºæº–ç›£æ§
- âœ… æ¸¬è©¦æ•¸æ“šç®¡ç†è‡ªå‹•åŒ–

## ğŸ¯ å¯¦æ–½å„ªå…ˆç´š

### ç¬¬ä¸€å„ªå…ˆç´š (ç«‹å³é–‹å§‹)
1. **E2E æ¸¬è©¦æ¡†æ¶è¨­ç½®**
2. **æ ¸å¿ƒæµç¨‹ E2E æ¸¬è©¦**
3. **åŸºæœ¬å¯è¨ªå•æ€§æ¸¬è©¦**

### ç¬¬äºŒå„ªå…ˆç´š (2 é€±å…§)
1. **æ€§èƒ½æ¸¬è©¦é›†æˆ**
2. **æ¸¬è©¦æ•¸æ“šç®¡ç†**
3. **CI/CD é›†æˆ**

### ç¬¬ä¸‰å„ªå…ˆç´š (1 æœˆå…§)
1. **è¦–è¦ºå›æ­¸æ¸¬è©¦**
2. **è·¨ç€è¦½å™¨æ¸¬è©¦**
3. **é«˜ç´šæ€§èƒ½ç›£æ§**

## ğŸ“ æ³¨æ„äº‹é …

### æŠ€è¡“è€ƒé‡

1. **æ¸¬è©¦ç’°å¢ƒéš”é›¢**ï¼šç¢ºä¿æ¸¬è©¦ä¸å½±éŸ¿ç”Ÿç”¢æ•¸æ“š
2. **æ¸¬è©¦æ•¸æ“šç®¡ç†**ï¼šä½¿ç”¨å›ºå®šæ¸¬è©¦æ•¸æ“šé›†
3. **ä¸¦è¡ŒåŸ·è¡Œ**ï¼šå„ªåŒ–æ¸¬è©¦åŸ·è¡Œæ™‚é–“
4. **éŒ¯èª¤è™•ç†**ï¼šå®Œå–„çš„æ¸¬è©¦å¤±æ•—è™•ç†æ©Ÿåˆ¶

### åœ˜éšŠå”ä½œ

1. **æ¸¬è©¦æ–‡æª”**ï¼šè©³ç´°çš„æ¸¬è©¦ç”¨ä¾‹æ–‡æª”
2. **ä»£ç¢¼å¯©æŸ¥**ï¼šæ¸¬è©¦ä»£ç¢¼ä¹Ÿéœ€è¦å¯©æŸ¥
3. **çŸ¥è­˜åˆ†äº«**ï¼šåœ˜éšŠæ¸¬è©¦æœ€ä½³å¯¦è¸åˆ†äº«
4. **æŒçºŒæ”¹é€²**ï¼šå®šæœŸè©•ä¼°å’Œå„ªåŒ–æ¸¬è©¦ç­–ç•¥

---

*è¨ˆåŠƒåˆ¶å®šæ—¥æœŸï¼š2024å¹´12æœˆ*  
*é è¨ˆå®Œæˆæ™‚é–“ï¼š2025å¹´2æœˆ*  
*è² è²¬äººï¼šé–‹ç™¼åœ˜éšŠ*