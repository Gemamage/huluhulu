{"file":"C:\\Users\\User\\Desktop\\traeproject\\test2\\pet-finder-app\\backend\\src\\utils\\errors.ts","mappings":";;;AAAA;;GAEG;AACH,MAAa,QAAS,SAAQ,KAAK;IAIjC,YACE,OAAe,EACf,aAAqB,GAAG,EACxB,gBAAyB,IAAI;QAE7B,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QAEnC,aAAa;QACb,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;IAClD,CAAC;CACF;AAjBD,4BAiBC;AAED;;GAEG;AACH,MAAa,eAAgB,SAAQ,QAAQ;IAC3C,YAAY,UAAkB,UAAU;QACtC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACtB,CAAC;CACF;AAJD,0CAIC;AAED;;GAEG;AACH,MAAa,mBAAoB,SAAQ,QAAQ;IAC/C,YAAY,UAAkB,MAAM;QAClC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACtB,CAAC;CACF;AAJD,kDAIC;AAED;;GAEG;AACH,MAAa,kBAAmB,SAAQ,QAAQ;IAC9C,YAAY,UAAkB,MAAM;QAClC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACtB,CAAC;CACF;AAJD,gDAIC;AAED;;GAEG;AACH,MAAa,cAAe,SAAQ,kBAAkB;IACpD,YAAY,UAAkB,MAAM;QAClC,KAAK,CAAC,OAAO,CAAC,CAAC;IACjB,CAAC;CACF;AAJD,wCAIC;AAED;;GAEG;AACH,MAAa,aAAc,SAAQ,QAAQ;IACzC,YAAY,UAAkB,OAAO;QACnC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACtB,CAAC;CACF;AAJD,sCAIC;AAED;;GAEG;AACH,MAAa,aAAc,SAAQ,QAAQ;IACzC,YAAY,UAAkB,MAAM;QAClC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACtB,CAAC;CACF;AAJD,sCAIC;AAED;;GAEG;AACH,MAAa,cAAe,SAAQ,QAAQ;IAC1C,YAAY,UAAkB,QAAQ;QACpC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;IACtB,CAAC;CACF;AAJD,wCAIC;AAED;;GAEG;AACH,MAAa,mBAAoB,SAAQ,QAAQ;IAC/C,YAAY,UAAkB,SAAS;QACrC,KAAK,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;IAC7B,CAAC;CACF;AAJD,kDAIC;AAED;;GAEG;AACH,MAAa,uBAAwB,SAAQ,QAAQ;IACnD,YAAY,UAAkB,SAAS;QACrC,KAAK,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;IAC7B,CAAC;CACF;AAJD,0DAIC;AAED;;GAEG;AACI,MAAM,kBAAkB,GAAG,CAAC,KAAY,EAAW,EAAE;IAC1D,IAAI,KAAK,YAAY,QAAQ,EAAE,CAAC;QAC9B,OAAO,KAAK,CAAC,aAAa,CAAC;IAC7B,CAAC;IACD,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AALW,QAAA,kBAAkB,sBAK7B","names":[],"sources":["C:\\Users\\User\\Desktop\\traeproject\\test2\\pet-finder-app\\backend\\src\\utils\\errors.ts"],"sourcesContent":["/**\n * 自定義錯誤類別\n */\nexport class AppError extends Error {\n  public readonly statusCode: number;\n  public readonly isOperational: boolean;\n\n  constructor(\n    message: string,\n    statusCode: number = 500,\n    isOperational: boolean = true\n  ) {\n    super(message);\n    \n    this.statusCode = statusCode;\n    this.isOperational = isOperational;\n    \n    // 確保錯誤堆疊追蹤正確\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\n/**\n * 驗證錯誤\n */\nexport class ValidationError extends AppError {\n  constructor(message: string = '輸入資料驗證失敗') {\n    super(message, 400);\n  }\n}\n\n/**\n * 認證錯誤\n */\nexport class AuthenticationError extends AppError {\n  constructor(message: string = '認證失敗') {\n    super(message, 401);\n  }\n}\n\n/**\n * 授權錯誤\n */\nexport class AuthorizationError extends AppError {\n  constructor(message: string = '權限不足') {\n    super(message, 403);\n  }\n}\n\n/**\n * 禁止訪問錯誤（AuthorizationError 的別名）\n */\nexport class ForbiddenError extends AuthorizationError {\n  constructor(message: string = '禁止訪問') {\n    super(message);\n  }\n}\n\n/**\n * 資源未找到錯誤\n */\nexport class NotFoundError extends AppError {\n  constructor(message: string = '資源未找到') {\n    super(message, 404);\n  }\n}\n\n/**\n * 衝突錯誤\n */\nexport class ConflictError extends AppError {\n  constructor(message: string = '資源衝突') {\n    super(message, 409);\n  }\n}\n\n/**\n * 速率限制錯誤\n */\nexport class RateLimitError extends AppError {\n  constructor(message: string = '請求過於頻繁') {\n    super(message, 429);\n  }\n}\n\n/**\n * 內部伺服器錯誤\n */\nexport class InternalServerError extends AppError {\n  constructor(message: string = '內部伺服器錯誤') {\n    super(message, 500, false);\n  }\n}\n\n/**\n * 服務不可用錯誤\n */\nexport class ServiceUnavailableError extends AppError {\n  constructor(message: string = '服務暫時不可用') {\n    super(message, 503, false);\n  }\n}\n\n/**\n * 檢查錯誤是否為操作性錯誤\n */\nexport const isOperationalError = (error: Error): boolean => {\n  if (error instanceof AppError) {\n    return error.isOperational;\n  }\n  return false;\n};"],"version":3}