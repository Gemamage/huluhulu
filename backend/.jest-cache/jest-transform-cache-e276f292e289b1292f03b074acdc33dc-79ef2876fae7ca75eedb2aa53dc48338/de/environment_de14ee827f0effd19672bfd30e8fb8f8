e2dc91a65985917e6dd3634711933881
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.config = void 0;
const dotenv_1 = __importDefault(require("dotenv"));
const joi_1 = __importDefault(require("joi"));
// 載入環境變數
dotenv_1.default.config();
// 環境變數驗證 schema
const envSchema = joi_1.default.object({
    NODE_ENV: joi_1.default.string()
        .valid('development', 'production', 'test')
        .default('development'),
    PORT: joi_1.default.number().default(3001),
    MONGODB_URI: joi_1.default.string().required(),
    JWT_SECRET: joi_1.default.string().min(32).required(),
    JWT_EXPIRES_IN: joi_1.default.string().default('7d'),
    CORS_ORIGIN: joi_1.default.string().default('http://localhost:3000'),
    CLOUDINARY_CLOUD_NAME: joi_1.default.string().required(),
    CLOUDINARY_API_KEY: joi_1.default.string().required(),
    CLOUDINARY_API_SECRET: joi_1.default.string().required(),
    EMAIL_HOST: joi_1.default.string().default('smtp.gmail.com'),
    EMAIL_PORT: joi_1.default.number().default(587),
    EMAIL_USER: joi_1.default.string().email().required(),
    EMAIL_PASS: joi_1.default.string().required(),
    EMAIL_FROM_NAME: joi_1.default.string().default('呼嚕寵物協尋網站'),
    EMAIL_FROM_EMAIL: joi_1.default.string().email().required(),
    CLIENT_URL: joi_1.default.string().default('http://localhost:3000'),
    RATE_LIMIT_WINDOW_MS: joi_1.default.number().default(15 * 60 * 1000),
    RATE_LIMIT_MAX_REQUESTS: joi_1.default.number().default(100),
    LOG_LEVEL: joi_1.default.string()
        .valid('error', 'warn', 'info', 'debug')
        .default('info'),
    // Google OAuth 配置
    GOOGLE_CLIENT_ID: joi_1.default.string().required(),
    GOOGLE_CLIENT_SECRET: joi_1.default.string().required(),
    GOOGLE_CALLBACK_URL: joi_1.default.string().default('/api/auth/google/callback'),
    // Session 配置
    SESSION_SECRET: joi_1.default.string().min(32).required(),
    // AWS S3 配置
    AWS_ACCESS_KEY_ID: joi_1.default.string().optional(),
    AWS_SECRET_ACCESS_KEY: joi_1.default.string().optional(),
    AWS_REGION: joi_1.default.string().default('ap-northeast-1'),
    AWS_S3_BUCKET: joi_1.default.string().optional(),
    // Google Vision AI 配置
    GOOGLE_VISION_PROJECT_ID: joi_1.default.string().optional(),
    GOOGLE_VISION_KEY_PATH: joi_1.default.string().optional(),
}).unknown();
// 驗證環境變數
const { error, value: envVars } = envSchema.validate(process.env);
if (error) {
    throw new Error(`環境變數配置錯誤: ${error.message}`);
}
// 導出配置物件
exports.config = {
    env: envVars.NODE_ENV,
    port: envVars.PORT,
    // 資料庫配置
    database: {
        uri: envVars.MONGODB_URI,
        options: {
            maxPoolSize: 10,
            serverSelectionTimeoutMS: 5000,
            socketTimeoutMS: 45000,
        },
    },
    // JWT 配置
    jwt: {
        secret: envVars.JWT_SECRET,
        expiresIn: envVars.JWT_EXPIRES_IN,
    },
    // CORS 配置
    cors: {
        allowedOrigins: envVars.CORS_ORIGIN.split(',').map((origin) => origin.trim()),
    },
    // Cloudinary 配置
    cloudinary: {
        cloudName: envVars.CLOUDINARY_CLOUD_NAME,
        apiKey: envVars.CLOUDINARY_API_KEY,
        apiSecret: envVars.CLOUDINARY_API_SECRET,
    },
    // 郵件配置
    email: {
        host: envVars.EMAIL_HOST,
        port: envVars.EMAIL_PORT,
        secure: envVars.EMAIL_PORT === 465,
        user: envVars.EMAIL_USER,
        password: envVars.EMAIL_PASS,
        fromName: envVars.EMAIL_FROM_NAME,
        fromEmail: envVars.EMAIL_FROM_EMAIL,
    },
    // 客戶端 URL
    clientUrl: envVars.CLIENT_URL,
    // 速率限制配置
    rateLimit: {
        windowMs: envVars.RATE_LIMIT_WINDOW_MS,
        maxRequests: envVars.RATE_LIMIT_MAX_REQUESTS,
    },
    // 日誌配置
    logging: {
        level: envVars.LOG_LEVEL,
    },
    // 檔案上傳配置
    upload: {
        maxFileSize: 5 * 1024 * 1024, // 5MB
        allowedMimeTypes: [
            'image/jpeg',
            'image/png',
            'image/webp',
            'image/gif',
        ],
        maxFiles: 5,
    },
    // 分頁配置
    pagination: {
        defaultLimit: 20,
        maxLimit: 100,
    },
    // 快取配置
    cache: {
        ttl: 5 * 60, // 5 分鐘
    },
    // Google 服務配置
    google: {
        clientId: envVars.GOOGLE_CLIENT_ID,
        clientSecret: envVars.GOOGLE_CLIENT_SECRET,
        callbackUrl: envVars.GOOGLE_CALLBACK_URL,
        projectId: envVars.GOOGLE_VISION_PROJECT_ID,
        visionKeyPath: envVars.GOOGLE_VISION_KEY_PATH,
    },
    // Session 配置
    session: {
        secret: envVars.SESSION_SECRET,
        maxAge: 24 * 60 * 60 * 1000, // 24 小時
    },
    // AWS S3 配置
    aws: {
        accessKeyId: envVars.AWS_ACCESS_KEY_ID,
        secretAccessKey: envVars.AWS_SECRET_ACCESS_KEY,
        region: envVars.AWS_REGION,
        s3Bucket: envVars.AWS_S3_BUCKET,
    },
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFx0cmFlcHJvamVjdFxcdGVzdDJcXHBldC1maW5kZXItYXBwXFxiYWNrZW5kXFxzcmNcXGNvbmZpZ1xcZW52aXJvbm1lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsb0RBQTRCO0FBQzVCLDhDQUFzQjtBQUV0QixTQUFTO0FBQ1QsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUVoQixnQkFBZ0I7QUFDaEIsTUFBTSxTQUFTLEdBQUcsYUFBRyxDQUFDLE1BQU0sQ0FBQztJQUMzQixRQUFRLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRTtTQUNuQixLQUFLLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUM7U0FDMUMsT0FBTyxDQUFDLGFBQWEsQ0FBQztJQUN6QixJQUFJLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDaEMsV0FBVyxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDcEMsVUFBVSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQzNDLGNBQWMsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztJQUMxQyxXQUFXLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztJQUMxRCxxQkFBcUIsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQzlDLGtCQUFrQixFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDM0MscUJBQXFCLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUM5QyxVQUFVLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztJQUNsRCxVQUFV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LFFBQVEsRUFBRSxDQUFDO0tBQ1o7SUFFRCxPQUFPO0lBQ1AsVUFBVSxFQUFFO1FBQ1YsWUFBWSxFQUFFLEVBQUU7UUFDaEIsUUFBUSxFQUFFLEdBQUc7S0FDZDtJQUVELE9BQU87SUFDUCxLQUFLLEVBQUU7UUFDTCxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxPQUFPO0tBQ3JCO0lBRUQsY0FBYztJQUNkLE1BQU0sRUFBRTtRQUNOLFFBQVEsRUFBRSxPQUFPLENBQUMsZ0JBQTBCO1FBQzVDLFlBQVksRUFBRSxPQUFPLENBQUMsb0JBQThCO1FBQ3BELFdBQVcsRUFBRSxPQUFPLENBQUMsbUJBQTZCO1FBQ2xELFNBQVMsRUFBRSxPQUFPLENBQUMsd0JBQWtDO1FBQ3JELGFBQWEsRUFBRSxPQUFPLENBQUMsc0JBQWdDO0tBQ3hEO0lBRUQsYUFBYTtJQUNiLE9BQU8sRUFBRTtRQUNQLE1BQU0sRUFBRSxPQUFPLENBQUMsY0FBd0I7UUFDeEMsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxRQUFRO0tBQ3RDO0lBRUQsWUFBWTtJQUNaLEdBQUcsRUFBRTtRQUNILFdBQVcsRUFBRSxPQUFPLENBQUMsaUJBQTJCO1FBQ2hELGVBQWUsRUFBRSxPQUFPLENBQUMscUJBQStCO1FBQ3hELE1BQU0sRUFBRSxPQUFPLENBQUMsVUFBb0I7UUFDcEMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxhQUF1QjtLQUMxQztDQUNPLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFx0cmFlcHJvamVjdFxcdGVzdDJcXHBldC1maW5kZXItYXBwXFxiYWNrZW5kXFxzcmNcXGNvbmZpZ1xcZW52aXJvbm1lbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuXG4vLyDovInlhaXnkrDlooPorormlbhcbmRvdGVudi5jb25maWcoKTtcblxuLy8g55Kw5aKD6K6K5pW46amX6K2JIHNjaGVtYVxuY29uc3QgZW52U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIE5PREVfRU5WOiBKb2kuc3RyaW5nKClcbiAgICAudmFsaWQoJ2RldmVsb3BtZW50JywgJ3Byb2R1Y3Rpb24nLCAndGVzdCcpXG4gICAgLmRlZmF1bHQoJ2RldmVsb3BtZW50JyksXG4gIFBPUlQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDMwMDEpLFxuICBNT05HT0RCX1VSSTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIEpXVF9TRUNSRVQ6IEpvaS5zdHJpbmcoKS5taW4oMzIpLnJlcXVpcmVkKCksXG4gIEpXVF9FWFBJUkVTX0lOOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnN2QnKSxcbiAgQ09SU19PUklHSU46IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAnKSxcbiAgQ0xPVURJTkFSWV9DTE9VRF9OQU1FOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgQ0xPVURJTkFSWV9BUElfS0VZOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgQ0xPVURJTkFSWV9BUElfU0VDUkVUOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgRU1BSUxfSE9TVDogSm9pLnN0cmluZygpLmRlZmF1bHQoJ3NtdHAuZ21haWwuY29tJyksXG4gIEVNQUlMX1BPUlQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU4NyksXG4gIEVNQUlMX1VTRVI6IEpvaS5zdHJpbmcoKS5lbWFpbCgpLnJlcXVpcmVkKCksXG4gIEVNQUlMX1BBU1M6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBFTUFJTF9GUk9NX05BTUU6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCflkbzlmpXlr7XnianljZTlsIvntrLnq5knKSxcbiAgRU1BSUxfRlJPTV9FTUFJTDogSm9pLnN0cmluZygpLmVtYWlsKCkucmVxdWlyZWQoKSxcbiAgQ0xJRU5UX1VSTDogSm9pLnN0cmluZygpLmRlZmF1bHQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpLFxuICBSQVRFX0xJTUlUX1dJTkRPV19NUzogSm9pLm51bWJlcigpLmRlZmF1bHQoMTUgKiA2MCAqIDEwMDApLFxuICBSQVRFX0xJTUlUX01BWF9SRVFVRVNUUzogSm9pLm51bWJlcigpLmRlZmF1bHQoMTAwKSxcbiAgTE9HX0xFVkVMOiBKb2kuc3RyaW5nKClcbiAgICAudmFsaWQoJ2Vycm9yJywgJ3dhcm4nLCAnaW5mbycsICdkZWJ1ZycpXG4gICAgLmRlZmF1bHQoJ2luZm8nKSxcbiAgLy8gR29vZ2xlIE9BdXRoIOmFjee9rlxuICBHT09HTEVfQ0xJRU5UX0lEOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgR09PR0xFX0NMSUVOVF9TRUNSRVQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBHT09HTEVfQ0FMTEJBQ0tfVVJMOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnL2FwaS9hdXRoL2dvb2dsZS9jYWxsYmFjaycpLFxuICAvLyBTZXNzaW9uIOmFjee9rlxuICBTRVNTSU9OX1NFQ1JFVDogSm9pLnN0cmluZygpLm1pbigzMikucmVxdWlyZWQoKSxcbiAgLy8gQVdTIFMzIOmFjee9rlxuICBBV1NfQUNDRVNTX0tFWV9JRDogSm9pLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIEFXU19TRUNSRVRfQUNDRVNTX0tFWTogSm9pLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIEFXU19SRUdJT046IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCdhcC1ub3J0aGVhc3QtMScpLFxuICBBV1NfUzNfQlVDS0VUOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLy8gR29vZ2xlIFZpc2lvbiBBSSDphY3nva5cbiAgR09PR0xFX1ZJU0lPTl9QUk9KRUNUX0lEOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgR09PR0xFX1ZJU0lPTl9LRVlfUEFUSDogSm9pLnN0cmluZygpLm9wdGlvbmFsKCksXG59KS51bmtub3duKCk7XG5cbi8vIOmpl+itieeSsOWig+iuiuaVuFxuY29uc3QgeyBlcnJvciwgdmFsdWU6IGVudlZhcnMgfSA9IGVudlNjaGVtYS52YWxpZGF0ZShwcm9jZXNzLmVudik7XG5cbmlmIChlcnJvcikge1xuICB0aHJvdyBuZXcgRXJyb3IoYOeSsOWig+iuiuaVuOmFjee9rumMr+iqpDogJHtlcnJvci5tZXNzYWdlfWApO1xufVxuXG4vLyDlsI7lh7rphY3nva7nianku7ZcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGVudjogZW52VmFycy5OT0RFX0VOViBhcyAnZGV2ZWxvcG1lbnQnIHwgJ3Byb2R1Y3Rpb24nIHwgJ3Rlc3QnLFxuICBwb3J0OiBlbnZWYXJzLlBPUlQgYXMgbnVtYmVyLFxuICBcbiAgLy8g6LOH5paZ5bqr6YWN572uXG4gIGRhdGFiYXNlOiB7XG4gICAgdXJpOiBlbnZWYXJzLk1PTkdPREJfVVJJIGFzIHN0cmluZyxcbiAgICBvcHRpb25zOiB7XG4gICAgICBtYXhQb29sU2l6ZTogMTAsXG4gICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDUwMDAsXG4gICAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLFxuICAgIH0sXG4gIH0sXG4gIFxuICAvLyBKV1Qg6YWN572uXG4gIGp3dDoge1xuICAgIHNlY3JldDogZW52VmFycy5KV1RfU0VDUkVUIGFzIHN0cmluZyxcbiAgICBleHBpcmVzSW46IGVudlZhcnMuSldUX0VYUElSRVNfSU4gYXMgc3RyaW5nLFxuICB9LFxuICBcbiAgLy8gQ09SUyDphY3nva5cbiAgY29yczoge1xuICAgIGFsbG93ZWRPcmlnaW5zOiBlbnZWYXJzLkNPUlNfT1JJR0lOLnNwbGl0KCcsJykubWFwKChvcmlnaW46IHN0cmluZykgPT4gb3JpZ2luLnRyaW0oKSksXG4gIH0sXG4gIFxuICAvLyBDbG91ZGluYXJ5IOmFjee9rlxuICBjbG91ZGluYXJ5OiB7XG4gICAgY2xvdWROYW1lOiBlbnZWYXJzLkNMT1VESU5BUllfQ0xPVURfTkFNRSBhcyBzdHJpbmcsXG4gICAgYXBpS2V5OiBlbnZWYXJzLkNMT1VESU5BUllfQVBJX0tFWSBhcyBzdHJpbmcsXG4gICAgYXBpU2VjcmV0OiBlbnZWYXJzLkNMT1VESU5BUllfQVBJX1NFQ1JFVCBhcyBzdHJpbmcsXG4gIH0sXG4gIFxuICAvLyDpg7Xku7bphY3nva5cbiAgZW1haWw6IHtcbiAgICBob3N0OiBlbnZWYXJzLkVNQUlMX0hPU1QgYXMgc3RyaW5nLFxuICAgIHBvcnQ6IGVudlZhcnMuRU1BSUxfUE9SVCBhcyBudW1iZXIsXG4gICAgc2VjdXJlOiBlbnZWYXJzLkVNQUlMX1BPUlQgPT09IDQ2NSxcbiAgICB1c2VyOiBlbnZWYXJzLkVNQUlMX1VTRVIgYXMgc3RyaW5nLFxuICAgIHBhc3N3b3JkOiBlbnZWYXJzLkVNQUlMX1BBU1MgYXMgc3RyaW5nLFxuICAgIGZyb21OYW1lOiBlbnZWYXJzLkVNQUlMX0ZST01fTkFNRSBhcyBzdHJpbmcsXG4gICAgZnJvbUVtYWlsOiBlbnZWYXJzLkVNQUlMX0ZST01fRU1BSUwgYXMgc3RyaW5nLFxuICB9LFxuXG4gIC8vIOWuouaItuerryBVUkxcbiAgY2xpZW50VXJsOiBlbnZWYXJzLkNMSUVOVF9VUkwgYXMgc3RyaW5nLFxuICBcbiAgLy8g6YCf546H6ZmQ5Yi26YWN572uXG4gIHJhdGVMaW1pdDoge1xuICAgIHdpbmRvd01zOiBlbnZWYXJzLlJBVEVfTElNSVRfV0lORE9XX01TIGFzIG51bWJlcixcbiAgICBtYXhSZXF1ZXN0czogZW52VmFycy5SQVRFX0xJTUlUX01BWF9SRVFVRVNUUyBhcyBudW1iZXIsXG4gIH0sXG4gIFxuICAvLyDml6XoqozphY3nva5cbiAgbG9nZ2luZzoge1xuICAgIGxldmVsOiBlbnZWYXJzLkxPR19MRVZFTCBhcyBzdHJpbmcsXG4gIH0sXG4gIFxuICAvLyDmqpTmoYjkuIrlgrPphY3nva5cbiAgdXBsb2FkOiB7XG4gICAgbWF4RmlsZVNpemU6IDUgKiAxMDI0ICogMTAyNCwgLy8gNU1CXG4gICAgYWxsb3dlZE1pbWVUeXBlczogW1xuICAgICAgJ2ltYWdlL2pwZWcnLFxuICAgICAgJ2ltYWdlL3BuZycsXG4gICAgICAnaW1hZ2Uvd2VicCcsXG4gICAgICAnaW1hZ2UvZ2lmJyxcbiAgICBdLFxuICAgIG1heEZpbGVzOiA1LFxuICB9LFxuICBcbiAgLy8g5YiG6aCB6YWN572uXG4gIHBhZ2luYXRpb246IHtcbiAgICBkZWZhdWx0TGltaXQ6IDIwLFxuICAgIG1heExpbWl0OiAxMDAsXG4gIH0sXG4gIFxuICAvLyDlv6vlj5bphY3nva5cbiAgY2FjaGU6IHtcbiAgICB0dGw6IDUgKiA2MCwgLy8gNSDliIbpkJhcbiAgfSxcbiAgXG4gIC8vIEdvb2dsZSDmnI3li5nphY3nva5cbiAgZ29vZ2xlOiB7XG4gICAgY2xpZW50SWQ6IGVudlZhcnMuR09PR0xFX0NMSUVOVF9JRCBhcyBzdHJpbmcsXG4gICAgY2xpZW50U2VjcmV0OiBlbnZWYXJzLkdPT0dMRV9DTElFTlRfU0VDUkVUIGFzIHN0cmluZyxcbiAgICBjYWxsYmFja1VybDogZW52VmFycy5HT09HTEVfQ0FMTEJBQ0tfVVJMIGFzIHN0cmluZyxcbiAgICBwcm9qZWN0SWQ6IGVudlZhcnMuR09PR0xFX1ZJU0lPTl9QUk9KRUNUX0lEIGFzIHN0cmluZyxcbiAgICB2aXNpb25LZXlQYXRoOiBlbnZWYXJzLkdPT0dMRV9WSVNJT05fS0VZX1BBVEggYXMgc3RyaW5nLFxuICB9LFxuICBcbiAgLy8gU2Vzc2lvbiDphY3nva5cbiAgc2Vzc2lvbjoge1xuICAgIHNlY3JldDogZW52VmFycy5TRVNTSU9OX1NFQ1JFVCBhcyBzdHJpbmcsXG4gICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLCAvLyAyNCDlsI/mmYJcbiAgfSxcbiAgXG4gIC8vIEFXUyBTMyDphY3nva5cbiAgYXdzOiB7XG4gICAgYWNjZXNzS2V5SWQ6IGVudlZhcnMuQVdTX0FDQ0VTU19LRVlfSUQgYXMgc3RyaW5nLFxuICAgIHNlY3JldEFjY2Vzc0tleTogZW52VmFycy5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgYXMgc3RyaW5nLFxuICAgIHJlZ2lvbjogZW52VmFycy5BV1NfUkVHSU9OIGFzIHN0cmluZyxcbiAgICBzM0J1Y2tldDogZW52VmFycy5BV1NfUzNfQlVDS0VUIGFzIHN0cmluZyxcbiAgfSxcbn0gYXMgY29uc3Q7XG5cbi8vIOWei+WIpeWumue+qVxuZXhwb3J0IHR5cGUgQ29uZmlnID0gdHlwZW9mIGNvbmZpZztcbmV4cG9ydCB0eXBlIEVudmlyb25tZW50ID0gdHlwZW9mIGNvbmZpZy5lbnY7Il0sInZlcnNpb24iOjN9