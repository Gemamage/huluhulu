3a54a43e37f68dc1511e37527a68be95
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateQuery = exports.validateRequest = exports.privacySettingsSchema = exports.petSearchSchema = exports.petUpdateSchema = exports.petSchema = exports.forgotPasswordSchema = exports.passwordResetSchema = exports.userUpdateSchema = exports.userLoginSchema = exports.userRegistrationSchema = exports.nameSchema = exports.phoneSchema = exports.passwordSchema = exports.emailSchema = void 0;
const zod_1 = require("zod");
// 基礎驗證規則
exports.emailSchema = zod_1.z.string().email('請提供有效的電子郵件地址');
exports.passwordSchema = zod_1.z.string().min(6, '密碼長度至少需要 6 個字符');
exports.phoneSchema = zod_1.z.string().regex(/^[+]?[0-9\s\-()]+$/, '請提供有效的電話號碼').optional();
exports.nameSchema = zod_1.z.string().trim().min(1, '姓名為必填項目').max(50, '姓名長度不能超過 50 個字符');
// 用戶相關驗證架構
exports.userRegistrationSchema = zod_1.z.object({
    email: exports.emailSchema,
    password: exports.passwordSchema,
    name: exports.nameSchema,
    phone: exports.phoneSchema,
});
exports.userLoginSchema = zod_1.z.object({
    email: exports.emailSchema,
    password: zod_1.z.string().min(1, '密碼為必填項目'),
});
exports.userUpdateSchema = zod_1.z.object({
    name: exports.nameSchema.optional(),
    phone: exports.phoneSchema,
    avatar: zod_1.z.string().url('請提供有效的圖片 URL').optional(),
}).partial();
exports.passwordResetSchema = zod_1.z.object({
    token: zod_1.z.string().min(1, '請提供重設令牌'),
    newPassword: exports.passwordSchema,
});
exports.forgotPasswordSchema = zod_1.z.object({
    email: exports.emailSchema,
});
// 寵物相關驗證架構
exports.petSchema = zod_1.z.object({
    name: zod_1.z.string().trim().min(1, '寵物名稱為必填項目').max(50, '寵物名稱不能超過 50 個字符'),
    type: zod_1.z.enum(['dog', 'cat', 'bird', 'rabbit', 'hamster', 'fish', 'reptile', 'other'], {
        errorMap: () => ({ message: '請選擇有效的寵物類型' }),
    }),
    breed: zod_1.z.string().trim().max(50, '品種名稱不能超過 50 個字符').optional(),
    gender: zod_1.z.enum(['male', 'female', 'unknown'], {
        errorMap: () => ({ message: '請選擇有效的性別' }),
    }),
    age: zod_1.z.number().int().min(0, '年齡不能為負數').max(30, '年齡不能超過 30 歲').optional(),
    color: zod_1.z.string().trim().max(50, '顏色描述不能超過 50 個字符').optional(),
    size: zod_1.z.enum(['small', 'medium', 'large'], {
        errorMap: () => ({ message: '請選擇有效的體型' }),
    }).optional(),
    status: zod_1.z.enum(['lost', 'found'], {
        errorMap: () => ({ message: '請選擇有效的狀態' }),
    }),
    description: zod_1.z.string().trim().max(1000, '描述不能超過 1000 個字符').optional(),
    lastSeenLocation: zod_1.z.string().trim().min(1, '最後出現地點為必填項目').max(200, '地點描述不能超過 200 個字符'),
    lastSeenDate: zod_1.z.string().datetime('請提供有效的日期時間格式'),
    contactInfo: zod_1.z.object({
        name: exports.nameSchema,
        phone: zod_1.z.string().regex(/^[+]?[0-9\s\-()]+$/, '請提供有效的電話號碼'),
        email: exports.emailSchema.optional(),
    }),
    images: zod_1.z.array(zod_1.z.string().url('請提供有效的圖片 URL')).max(5, '最多只能上傳 5 張圖片').optional(),
    reward: zod_1.z.number().min(0, '獎勵金額不能為負數').optional(),
    isUrgent: zod_1.z.boolean().default(false),
    microchipId: zod_1.z.string().trim().max(50, '晶片 ID 不能超過 50 個字符').optional(),
    vaccinated: zod_1.z.boolean().optional(),
    medicalConditions: zod_1.z.string().trim().max(500, '醫療狀況描述不能超過 500 個字符').optional(),
    specialMarks: zod_1.z.string().trim().max(500, '特殊標記描述不能超過 500 個字符').optional(),
    personality: zod_1.z.string().trim().max(500, '個性描述不能超過 500 個字符').optional(),
});
exports.petUpdateSchema = exports.petSchema.partial().omit({ status: true });
// 搜尋相關驗證架構
exports.petSearchSchema = zod_1.z.object({
    type: zod_1.z.enum(['dog', 'cat', 'bird', 'rabbit', 'hamster', 'fish', 'reptile', 'other']).optional(),
    status: zod_1.z.enum(['lost', 'found']).optional(),
    location: zod_1.z.string().trim().optional(),
    radius: zod_1.z.string().transform(val => val ? Number(val) : undefined).pipe(zod_1.z.number().min(1).max(100, '搜尋半徑不能超過 100 公里')).optional(),
    page: zod_1.z.string().transform(val => val ? Number(val) : 1).pipe(zod_1.z.number().int().min(1, '頁碼必須大於 0')).default('1'),
    limit: zod_1.z.string().transform(val => val ? Number(val) : 10).pipe(zod_1.z.number().int().min(1).max(50, '每頁數量不能超過 50')).default('10'),
    sortBy: zod_1.z.enum(['createdAt', 'lastSeenDate', 'reward']).default('createdAt'),
    sortOrder: zod_1.z.enum(['asc', 'desc']).default('desc'),
    search: zod_1.z.string().trim().optional(),
    breed: zod_1.z.string().trim().optional(),
});
// 隱私設定驗證架構
exports.privacySettingsSchema = zod_1.z.object({
    showEmail: zod_1.z.boolean().default(false),
    showPhone: zod_1.z.boolean().default(true),
    allowDirectContact: zod_1.z.boolean().default(true),
    showFullName: zod_1.z.boolean().default(false),
    profileVisibility: zod_1.z.enum(['public', 'registered', 'private']).default('registered'),
    emailNotifications: zod_1.z.object({
        newMatches: zod_1.z.boolean().default(true),
        messages: zod_1.z.boolean().default(true),
        updates: zod_1.z.boolean().default(false),
        marketing: zod_1.z.boolean().default(false),
    }).default({}),
    smsNotifications: zod_1.z.object({
        urgentAlerts: zod_1.z.boolean().default(true),
        matches: zod_1.z.boolean().default(false),
    }).default({}),
});
// 驗證中介軟體輔助函數
const validateRequest = (schema) => {
    return (req, res, next) => {
        try {
            const validatedData = schema.parse(req.body);
            req.validatedData = validatedData;
            next();
        }
        catch (error) {
            if (error instanceof zod_1.z.ZodError) {
                return res.status(400).json({
                    success: false,
                    message: '輸入資料驗證失敗',
                    errors: error.errors.map(err => ({
                        field: err.path.join('.'),
                        message: err.message,
                    })),
                });
            }
            next(error);
        }
    };
};
exports.validateRequest = validateRequest;
// 查詢參數驗證中介軟體
const validateQuery = (schema) => {
    return (req, res, next) => {
        try {
            const validatedQuery = schema.parse(req.query);
            req.validatedQuery = validatedQuery;
            next();
        }
        catch (error) {
            if (error instanceof zod_1.z.ZodError) {
                return res.status(400).json({
                    success: false,
                    message: '查詢參數驗證失敗',
                    errors: error.errors.map(err => ({
                        field: err.path.join('.'),
                        message: err.message,
                    })),
                });
            }
            next(error);
        }
    };
};
exports.validateQuery = validateQuery;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFx0cmFlcHJvamVjdFxcdGVzdDJcXHBldC1maW5kZXItYXBwXFxiYWNrZW5kXFxzcmNcXHV0aWxzXFx2YWxpZGF0aW9uLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLDZCQUF3QjtBQUV4QixTQUFTO0FBQ0ksUUFBQSxXQUFXLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUMvQyxRQUFBLGNBQWMsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3JELFFBQUEsV0FBVyxHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsWUFBWSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDOUUsUUFBQSxVQUFVLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBRXpGLFdBQVc7QUFDRSxRQUFBLHNCQUFzQixHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7SUFDN0MsS0FBSyxFQUFFLG1CQUFXO0lBQ2xCLFFBQVEsRUFBRSxzQkFBYztJQUN4QixJQUFJLEVBQUUsa0JBQVU7SUFDaEIsS0FBSyxFQUFFLG1CQUFXO0NBQ25CLENBQUMsQ0FBQztBQUVVLFFBQUEsZUFBZSxHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7SUFDdEMsS0FBSyxFQUFFLG1CQUFXO0lBQ2xCLFFBQVEsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUM7Q0FDdkMsQ0FBQyxDQUFDO0FBRVUsUUFBQSxnQkFBZ0IsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQ3ZDLElBQUksRUFBRSxrQkFBVSxD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QyxDQUFDLElBQUksQ0FBQyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7SUFDL0csS0FBSyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDN0gsTUFBTSxFQUFFLE9BQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLEVBQUUsY0FBYyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztJQUM1RSxTQUFTLEVBQUUsT0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7SUFDbEQsTUFBTSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDcEMsS0FBSyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUU7Q0FDcEMsQ0FBQyxDQUFDO0FBRUgsV0FBVztBQUNFLFFBQUEscUJBQXFCLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUM1QyxTQUFTLEVBQUUsT0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7SUFDckMsU0FBUyxFQUFFLE9BQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFB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Z0JBQ2hDLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7b0JBQzFCLE9BQU8sRUFBRSxLQUFLO29CQUNkLE9BQU8sRUFBRSxVQUFVO29CQUNuQixNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUMvQixLQUFLLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO3dCQUN6QixPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU87cUJBQ3JCLENBQUMsQ0FBQztpQkFDSixDQUFDLENBQUM7WUFDTCxDQUFDO1lBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQXBCVyxRQUFBLGFBQWEsaUJBb0J4QiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERlc2t0b3BcXHRyYWVwcm9qZWN0XFx0ZXN0MlxccGV0LWZpbmRlci1hcHBcXGJhY2tlbmRcXHNyY1xcdXRpbHNcXHZhbGlkYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbi8vIOWfuuekjumpl+itieimj+WJh1xuZXhwb3J0IGNvbnN0IGVtYWlsU2NoZW1hID0gei5zdHJpbmcoKS5lbWFpbCgn6KuL5o+Q5L6b5pyJ5pWI55qE6Zu75a2Q6YO15Lu25Zyw5Z2AJyk7XG5leHBvcnQgY29uc3QgcGFzc3dvcmRTY2hlbWEgPSB6LnN0cmluZygpLm1pbig2LCAn5a+G56K86ZW35bqm6Iez5bCR6ZyA6KaBIDYg5YCL5a2X56ymJyk7XG5leHBvcnQgY29uc3QgcGhvbmVTY2hlbWEgPSB6LnN0cmluZygpLnJlZ2V4KC9eWytdP1swLTlcXHNcXC0oKV0rJC8sICfoq4vmj5DkvpvmnInmlYjnmoTpm7voqbHomZ/norwnKS5vcHRpb25hbCgpO1xuZXhwb3J0IGNvbnN0IG5hbWVTY2hlbWEgPSB6LnN0cmluZygpLnRyaW0oKS5taW4oMSwgJ+Wnk+WQjeeCuuW/heWhq+mgheebricpLm1heCg1MCwgJ+Wnk+WQjemVt+W6puS4jeiDvei2hemBjiA1MCDlgIvlrZfnrKYnKTtcblxuLy8g55So5oi255u46Zec6amX6K2J5p625qeLXG5leHBvcnQgY29uc3QgdXNlclJlZ2lzdHJhdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZW1haWw6IGVtYWlsU2NoZW1hLFxuICBwYXNzd29yZDogcGFzc3dvcmRTY2hlbWEsXG4gIG5hbWU6IG5hbWVTY2hlbWEsXG4gIHBob25lOiBwaG9uZVNjaGVtYSxcbn0pO1xuXG5leHBvcnQgY29uc3QgdXNlckxvZ2luU2NoZW1hID0gei5vYmplY3Qoe1xuICBlbWFpbDogZW1haWxTY2hlbWEsXG4gIHBhc3N3b3JkOiB6LnN0cmluZygpLm1pbigxLCAn5a+G56K854K65b+F5aGr6aCF55uuJyksXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZXJVcGRhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IG5hbWVTY2hlbWEub3B0aW9uYWwoKSxcbiAgcGhvbmU6IHBob25lU2NoZW1hLFxuICBhdmF0YXI6IHouc3RyaW5nKCkudXJsKCfoq4vmj5DkvpvmnInmlYjnmoTlnJbniYcgVVJMJykub3B0aW9uYWwoKSxcbn0pLnBhcnRpYWwoKTtcblxuZXhwb3J0IGNvbnN0IHBhc3N3b3JkUmVzZXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRva2VuOiB6LnN0cmluZygpLm1pbigxLCAn6KuL5o+Q5L6b6YeN6Kit5Luk54mMJyksXG4gIG5ld1Bhc3N3b3JkOiBwYXNzd29yZFNjaGVtYSxcbn0pO1xuXG5leHBvcnQgY29uc3QgZm9yZ290UGFzc3dvcmRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVtYWlsOiBlbWFpbFNjaGVtYSxcbn0pO1xuXG4vLyDlr7Xniannm7jpl5zpqZforYnmnrbmp4tcbmV4cG9ydCBjb25zdCBwZXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKCkudHJpbSgpLm1pbigxLCAn5a+154mp5ZCN56ix54K65b+F5aGr6aCF55uuJykubWF4KDUwLCAn5a+154mp5ZCN56ix5LiN6IO96LaF6YGOIDUwIOWAi+Wtl+espicpLFxuICB0eXBlOiB6LmVudW0oWydkb2cnLCAnY2F0JywgJ2JpcmQnLCAncmFiYml0JywgJ2hhbXN0ZXInLCAnZmlzaCcsICdyZXB0aWxlJywgJ290aGVyJ10sIHtcbiAgICBlcnJvck1hcDogKCkgPT4gKHsgbWVzc2FnZTogJ+iri+mBuOaTh+acieaViOeahOWvteeJqemhnuWeiycgfSksXG4gIH0pLFxuICBicmVlZDogei5zdHJpbmcoKS50cmltKCkubWF4KDUwLCAn5ZOB56iu5ZCN56ix5LiN6IO96LaF6YGOIDUwIOWAi+Wtl+espicpLm9wdGlvbmFsKCksXG4gIGdlbmRlcjogei5lbnVtKFsnbWFsZScsICdmZW1hbGUnLCAndW5rbm93biddLCB7XG4gICAgZXJyb3JNYXA6ICgpID0+ICh7IG1lc3NhZ2U6ICfoq4vpgbjmk4fmnInmlYjnmoTmgKfliKUnIH0pLFxuICB9KSxcbiAgYWdlOiB6Lm51bWJlcigpLmludCgpLm1pbigwLCAn5bm06b2h5LiN6IO954K66LKg5pW4JykubWF4KDMwLCAn5bm06b2h5LiN6IO96LaF6YGOIDMwIOatsicpLm9wdGlvbmFsKCksXG4gIGNvbG9yOiB6LnN0cmluZygpLnRyaW0oKS5tYXgoNTAsICfpoY/oibLmj4/ov7DkuI3og73otoXpgY4gNTAg5YCL5a2X56ymJykub3B0aW9uYWwoKSxcbiAgc2l6ZTogei5lbnVtKFsnc21hbGwnLCAnbWVkaXVtJywgJ2xhcmdlJ10sIHtcbiAgICBlcnJvck1hcDogKCkgPT4gKHsgbWVzc2FnZTogJ+iri+mBuOaTh+acieaViOeahOmrlOWeiycgfSksXG4gIH0pLm9wdGlvbmFsKCksXG4gIHN0YXR1czogei5lbnVtKFsnbG9zdCcsICdmb3VuZCddLCB7XG4gICAgZXJyb3JNYXA6ICgpID0+ICh7IG1lc3NhZ2U6ICfoq4vpgbjmk4fmnInmlYjnmoTni4DmhYsnIH0pLFxuICB9KSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkudHJpbSgpLm1heCgxMDAwLCAn5o+P6L+w5LiN6IO96LaF6YGOIDEwMDAg5YCL5a2X56ymJykub3B0aW9uYWwoKSxcbiAgbGFzdFNlZW5Mb2NhdGlvbjogei5zdHJpbmcoKS50cmltKCkubWluKDEsICfmnIDlvozlh7rnj77lnLDpu57ngrrlv4XloavpoIXnm64nKS5tYXgoMjAwLCAn5Zyw6bue5o+P6L+w5LiN6IO96LaF6YGOIDIwMCDlgIvlrZfnrKYnKSxcbiAgbGFzdFNlZW5EYXRlOiB6LnN0cmluZygpLmRhdGV0aW1lKCfoq4vmj5DkvpvmnInmlYjnmoTml6XmnJ/mmYLplpPmoLzlvI8nKSxcbiAgY29udGFjdEluZm86IHoub2JqZWN0KHtcbiAgICBuYW1lOiBuYW1lU2NoZW1hLFxuICAgIHBob25lOiB6LnN0cmluZygpLnJlZ2V4KC9eWytdP1swLTlcXHNcXC0oKV0rJC8sICfoq4vmj5DkvpvmnInmlYjnmoTpm7voqbHomZ/norwnKSxcbiAgICBlbWFpbDogZW1haWxTY2hlbWEub3B0aW9uYWwoKSxcbiAgfSksXG4gIGltYWdlczogei5hcnJheSh6LnN0cmluZygpLnVybCgn6KuL5o+Q5L6b5pyJ5pWI55qE5ZyW54mHIFVSTCcpKS5tYXgoNSwgJ+acgOWkmuWPquiDveS4iuWCsyA1IOW8teWclueJhycpLm9wdGlvbmFsKCksXG4gIHJld2FyZDogei5udW1iZXIoKS5taW4oMCwgJ+eNjuWLtemHkemhjeS4jeiDveeCuuiyoOaVuCcpLm9wdGlvbmFsKCksXG4gIGlzVXJnZW50OiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgbWljcm9jaGlwSWQ6IHouc3RyaW5nKCkudHJpbSgpLm1heCg1MCwgJ+aZtueJhyBJRCDkuI3og73otoXpgY4gNTAg5YCL5a2X56ymJykub3B0aW9uYWwoKSxcbiAgdmFjY2luYXRlZDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgbWVkaWNhbENvbmRpdGlvbnM6IHouc3RyaW5nKCkudHJpbSgpLm1heCg1MDAsICfphqvnmYLni4Dms4Hmj4/ov7DkuI3og73otoXpgY4gNTAwIOWAi+Wtl+espicpLm9wdGlvbmFsKCksXG4gIHNwZWNpYWxNYXJrczogei5zdHJpbmcoKS50cmltKCkubWF4KDUwMCwgJ+eJueauiuaomeiomOaPj+i/sOS4jeiDvei2hemBjiA1MDAg5YCL5a2X56ymJykub3B0aW9uYWwoKSxcbiAgcGVyc29uYWxpdHk6IHouc3RyaW5nKCkudHJpbSgpLm1heCg1MDAsICflgIvmgKfmj4/ov7DkuI3og73otoXpgY4gNTAwIOWAi+Wtl+espicpLm9wdGlvbmFsKCksXG59KTtcblxuZXhwb3J0IGNvbnN0IHBldFVwZGF0ZVNjaGVtYSA9IHBldFNjaGVtYS5wYXJ0aWFsKCkub21pdCh7IHN0YXR1czogdHJ1ZSB9KTtcblxuLy8g5pCc5bCL55u46Zec6amX6K2J5p625qeLXG5leHBvcnQgY29uc3QgcGV0U2VhcmNoU2NoZW1hID0gei5vYmplY3Qoe1xuICB0eXBlOiB6LmVudW0oWydkb2cnLCAnY2F0JywgJ2JpcmQnLCAncmFiYml0JywgJ2hhbXN0ZXInLCAnZmlzaCcsICdyZXB0aWxlJywgJ290aGVyJ10pLm9wdGlvbmFsKCksXG4gIHN0YXR1czogei5lbnVtKFsnbG9zdCcsICdmb3VuZCddKS5vcHRpb25hbCgpLFxuICBsb2NhdGlvbjogei5zdHJpbmcoKS50cmltKCkub3B0aW9uYWwoKSxcbiAgcmFkaXVzOiB6LnN0cmluZygpLnRyYW5zZm9ybSh2YWwgPT4gdmFsID8gTnVtYmVyKHZhbCkgOiB1bmRlZmluZWQpLnBpcGUoei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCwgJ+aQnOWwi+WNiuW+keS4jeiDvei2hemBjiAxMDAg5YWs6YeMJykpLm9wdGlvbmFsKCksXG4gIHBhZ2U6IHouc3RyaW5nKCkudHJhbnNmb3JtKHZhbCA9PiB2YWwgPyBOdW1iZXIodmFsKSA6IDEpLnBpcGUoei5udW1iZXIoKS5pbnQoKS5taW4oMSwgJ+mggeeivOW/hemgiOWkp+aWvCAwJykpLmRlZmF1bHQoJzEnKSxcbiAgbGltaXQ6IHouc3RyaW5nKCkudHJhbnNmb3JtKHZhbCA9PiB2YWwgPyBOdW1iZXIodmFsKSA6IDEwKS5waXBlKHoubnVtYmVyKCkuaW50KCkubWluKDEpLm1heCg1MCwgJ+avj+mggeaVuOmHj+S4jeiDvei2hemBjiA1MCcpKS5kZWZhdWx0KCcxMCcpLFxuICBzb3J0Qnk6IHouZW51bShbJ2NyZWF0ZWRBdCcsICdsYXN0U2VlbkRhdGUnLCAncmV3YXJkJ10pLmRlZmF1bHQoJ2NyZWF0ZWRBdCcpLFxuICBzb3J0T3JkZXI6IHouZW51bShbJ2FzYycsICdkZXNjJ10pLmRlZmF1bHQoJ2Rlc2MnKSxcbiAgc2VhcmNoOiB6LnN0cmluZygpLnRyaW0oKS5vcHRpb25hbCgpLFxuICBicmVlZDogei5zdHJpbmcoKS50cmltKCkub3B0aW9uYWwoKSxcbn0pO1xuXG4vLyDpmrHnp4HoqK3lrprpqZforYnmnrbmp4tcbmV4cG9ydCBjb25zdCBwcml2YWN5U2V0dGluZ3NTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHNob3dFbWFpbDogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gIHNob3dQaG9uZTogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgYWxsb3dEaXJlY3RDb250YWN0OiB6LmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICBzaG93RnVsbE5hbWU6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICBwcm9maWxlVmlzaWJpbGl0eTogei5lbnVtKFsncHVibGljJywgJ3JlZ2lzdGVyZWQnLCAncHJpdmF0ZSddKS5kZWZhdWx0KCdyZWdpc3RlcmVkJyksXG4gIGVtYWlsTm90aWZpY2F0aW9uczogei5vYmplY3Qoe1xuICAgIG5ld01hdGNoZXM6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgbWVzc2FnZXM6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgdXBkYXRlczogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgbWFya2V0aW5nOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgfSkuZGVmYXVsdCh7fSksXG4gIHNtc05vdGlmaWNhdGlvbnM6IHoub2JqZWN0KHtcbiAgICB1cmdlbnRBbGVydHM6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgbWF0Y2hlczogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gIH0pLmRlZmF1bHQoe30pLFxufSk7XG5cbi8vIOmpl+itieS4reS7i+i7n+mrlOi8lOWKqeWHveaVuFxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlUmVxdWVzdCA9IChzY2hlbWE6IHouWm9kU2NoZW1hKSA9PiB7XG4gIHJldHVybiAocmVxOiBhbnksIHJlczogYW55LCBuZXh0OiBhbnkpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IHNjaGVtYS5wYXJzZShyZXEuYm9keSk7XG4gICAgICByZXEudmFsaWRhdGVkRGF0YSA9IHZhbGlkYXRlZERhdGE7XG4gICAgICBuZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAn6Ly45YWl6LOH5paZ6amX6K2J5aSx5pWXJyxcbiAgICAgICAgICBlcnJvcnM6IGVycm9yLmVycm9ycy5tYXAoZXJyID0+ICh7XG4gICAgICAgICAgICBmaWVsZDogZXJyLnBhdGguam9pbignLicpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfTtcbn07XG5cbi8vIOafpeipouWPg+aVuOmpl+itieS4reS7i+i7n+mrlFxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlUXVlcnkgPSAoc2NoZW1hOiB6LlpvZFNjaGVtYSkgPT4ge1xuICByZXR1cm4gKHJlcTogYW55LCByZXM6IGFueSwgbmV4dDogYW55KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRlZFF1ZXJ5ID0gc2NoZW1hLnBhcnNlKHJlcS5xdWVyeSk7XG4gICAgICByZXEudmFsaWRhdGVkUXVlcnkgPSB2YWxpZGF0ZWRRdWVyeTtcbiAgICAgIG5leHQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICfmn6XoqaLlj4PmlbjpqZforYnlpLHmlZcnLFxuICAgICAgICAgIGVycm9yczogZXJyb3IuZXJyb3JzLm1hcChlcnIgPT4gKHtcbiAgICAgICAgICAgIGZpZWxkOiBlcnIucGF0aC5qb2luKCcuJyksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9O1xufTtcblxuLy8g6aGe5Z6L5bCO5Ye6XG5leHBvcnQgdHlwZSBVc2VyUmVnaXN0cmF0aW9uRGF0YSA9IHouaW5mZXI8dHlwZW9mIHVzZXJSZWdpc3RyYXRpb25TY2hlbWE+O1xuZXhwb3J0IHR5cGUgVXNlckxvZ2luRGF0YSA9IHouaW5mZXI8dHlwZW9mIHVzZXJMb2dpblNjaGVtYT47XG5leHBvcnQgdHlwZSBVc2VyVXBkYXRlRGF0YSA9IHouaW5mZXI8dHlwZW9mIHVzZXJVcGRhdGVTY2hlbWE+O1xuZXhwb3J0IHR5cGUgUGV0RGF0YSA9IHouaW5mZXI8dHlwZW9mIHBldFNjaGVtYT47XG5leHBvcnQgdHlwZSBQZXRVcGRhdGVEYXRhID0gei5pbmZlcjx0eXBlb2YgcGV0VXBkYXRlU2NoZW1hPjtcbmV4cG9ydCB0eXBlIFBldFNlYXJjaFF1ZXJ5ID0gei5pbmZlcjx0eXBlb2YgcGV0U2VhcmNoU2NoZW1hPjtcbmV4cG9ydCB0eXBlIFByaXZhY3lTZXR0aW5ncyA9IHouaW5mZXI8dHlwZW9mIHByaXZhY3lTZXR0aW5nc1NjaGVtYT47Il0sInZlcnNpb24iOjN9