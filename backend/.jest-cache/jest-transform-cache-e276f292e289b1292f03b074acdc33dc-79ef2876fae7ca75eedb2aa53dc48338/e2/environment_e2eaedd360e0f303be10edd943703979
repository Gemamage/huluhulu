9ee804242f2da902e90888500ec40543
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.config = void 0;
const dotenv_1 = __importDefault(require("dotenv"));
const joi_1 = __importDefault(require("joi"));
// 載入環境變數
dotenv_1.default.config();
// 環境變數驗證 schema
const envSchema = joi_1.default.object({
    NODE_ENV: joi_1.default.string()
        .valid('development', 'production', 'test')
        .default('development'),
    PORT: joi_1.default.number().default(3001),
    MONGODB_URI: joi_1.default.string().required(),
    JWT_SECRET: joi_1.default.string().min(32).required(),
    JWT_EXPIRES_IN: joi_1.default.string().default('7d'),
    CORS_ORIGIN: joi_1.default.string().default('http://localhost:3000'),
    CLOUDINARY_CLOUD_NAME: joi_1.default.string().required(),
    CLOUDINARY_API_KEY: joi_1.default.string().required(),
    CLOUDINARY_API_SECRET: joi_1.default.string().required(),
    EMAIL_HOST: joi_1.default.string().default('smtp.gmail.com'),
    EMAIL_PORT: joi_1.default.number().default(587),
    EMAIL_USER: joi_1.default.string().email().required(),
    EMAIL_PASS: joi_1.default.string().required(),
    EMAIL_FROM_NAME: joi_1.default.string().default('呼嚕寵物協尋網站'),
    EMAIL_FROM_EMAIL: joi_1.default.string().email().required(),
    CLIENT_URL: joi_1.default.string().default('http://localhost:3000'),
    RATE_LIMIT_WINDOW_MS: joi_1.default.number().default(15 * 60 * 1000),
    RATE_LIMIT_MAX_REQUESTS: joi_1.default.number().default(100),
    LOG_LEVEL: joi_1.default.string()
        .valid('error', 'warn', 'info', 'debug')
        .default('info'),
    // Google OAuth 配置
    GOOGLE_CLIENT_ID: joi_1.default.string().required(),
    GOOGLE_CLIENT_SECRET: joi_1.default.string().required(),
    GOOGLE_CALLBACK_URL: joi_1.default.string().default('/api/auth/google/callback'),
    // Session 配置
    SESSION_SECRET: joi_1.default.string().min(32).required(),
    // Google Vision AI 配置
    GOOGLE_VISION_PROJECT_ID: joi_1.default.string().optional(),
    GOOGLE_VISION_KEY_PATH: joi_1.default.string().optional(),
    // Firebase 配置
    FIREBASE_PROJECT_ID: joi_1.default.string().optional(),
    FIREBASE_SERVICE_ACCOUNT_KEY: joi_1.default.string().optional(),
    // SendGrid 配置
    SENDGRID_API_KEY: joi_1.default.string().optional(),
    SENDGRID_FROM_EMAIL: joi_1.default.string().email().optional(),
    // 通知配置
    NOTIFICATION_CLEANUP_INTERVAL: joi_1.default.number().default(60 * 60 * 1000), // 1 小時
    NOTIFICATION_RETENTION_DAYS: joi_1.default.number().default(30),
}).unknown();
// 驗證環境變數
const { error, value: envVars } = envSchema.validate(process.env);
if (error) {
    throw new Error(`環境變數配置錯誤: ${error.message}`);
}
// 導出配置物件
exports.config = {
    env: envVars.NODE_ENV,
    port: envVars.PORT,
    // 資料庫配置
    database: {
        uri: envVars.MONGODB_URI,
        options: {
            maxPoolSize: 10,
            serverSelectionTimeoutMS: 5000,
            socketTimeoutMS: 45000,
        },
    },
    // JWT 配置
    jwt: {
        secret: envVars.JWT_SECRET,
        expiresIn: envVars.JWT_EXPIRES_IN,
    },
    // CORS 配置
    cors: {
        allowedOrigins: envVars.CORS_ORIGIN.split(',').map((origin) => origin.trim()),
    },
    // Cloudinary 配置
    cloudinary: {
        cloudName: envVars.CLOUDINARY_CLOUD_NAME,
        apiKey: envVars.CLOUDINARY_API_KEY,
        apiSecret: envVars.CLOUDINARY_API_SECRET,
    },
    // 郵件配置
    email: {
        host: envVars.EMAIL_HOST,
        port: envVars.EMAIL_PORT,
        secure: envVars.EMAIL_PORT === 465,
        user: envVars.EMAIL_USER,
        password: envVars.EMAIL_PASS,
        fromName: envVars.EMAIL_FROM_NAME,
        fromEmail: envVars.EMAIL_FROM_EMAIL,
    },
    // 客戶端 URL
    clientUrl: envVars.CLIENT_URL,
    // 速率限制配置
    rateLimit: {
        windowMs: envVars.RATE_LIMIT_WINDOW_MS,
        maxRequests: envVars.RATE_LIMIT_MAX_REQUESTS,
    },
    // 日誌配置
    logging: {
        level: envVars.LOG_LEVEL,
    },
    // 檔案上傳配置
    upload: {
        maxFileSize: 5 * 1024 * 1024, // 5MB
        allowedMimeTypes: [
            'image/jpeg',
            'image/png',
            'image/webp',
            'image/gif',
        ],
        maxFiles: 5,
    },
    // 分頁配置
    pagination: {
        defaultLimit: 20,
        maxLimit: 100,
    },
    // 快取配置
    cache: {
        ttl: 5 * 60, // 5 分鐘
    },
    // Google 服務配置
    google: {
        clientId: envVars.GOOGLE_CLIENT_ID,
        clientSecret: envVars.GOOGLE_CLIENT_SECRET,
        callbackUrl: envVars.GOOGLE_CALLBACK_URL,
        projectId: envVars.GOOGLE_VISION_PROJECT_ID || '',
        visionKeyPath: envVars.GOOGLE_VISION_KEY_PATH || '',
    },
    // Session 配置
    session: {
        secret: envVars.SESSION_SECRET,
        maxAge: 24 * 60 * 60 * 1000, // 24 小時
    },
    // Firebase 配置
    firebase: {
        projectId: envVars.FIREBASE_PROJECT_ID || '',
        serviceAccountKey: envVars.FIREBASE_SERVICE_ACCOUNT_KEY
            ? JSON.parse(envVars.FIREBASE_SERVICE_ACCOUNT_KEY)
            : null,
    },
    // SendGrid 配置
    sendgrid: {
        apiKey: envVars.SENDGRID_API_KEY || '',
        fromEmail: envVars.SENDGRID_FROM_EMAIL || envVars.EMAIL_FROM_EMAIL,
    },
    // 通知配置
    notification: {
        cleanupInterval: envVars.NOTIFICATION_CLEANUP_INTERVAL,
        retentionDays: envVars.NOTIFICATION_RETENTION_DAYS,
        batchSize: 100,
        maxRetries: 3,
        retryDelay: 5000, // 5 秒
    },
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFx0cmFlcHJvamVjdFxcdGVzdDJcXHBldC1maW5kZXItYXBwXFxiYWNrZW5kXFxzcmNcXGNvbmZpZ1xcZW52aXJvbm1lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsb0RBQTRCO0FBQzVCLDhDQUFzQjtBQUV0QixTQUFTO0FBQ1QsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUVoQixnQkFBZ0I7QUFDaEIsTUFBTSxTQUFTLEdBQUcsYUFBRyxDQUFDLE1BQU0sQ0FBQztJQUMzQixRQUFRLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRTtTQUNuQixLQUFLLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUM7U0FDMUMsT0FBTyxDQUFDLGFBQWEsQ0FBQztJQUN6QixJQUFJLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDaEMsV0FBVyxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDcEMsVUFBVSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQzNDLGNBQWMsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztJQUMxQyxXQUFXLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztJQUMxRCxxQkFBcUIsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQzlDLGtCQUFrQixFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDM0MscUJBQXFCLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUM5QyxVQUFVLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztJQUNsRCxVQUFV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TUFBTSxFQUFFLE9BQU8sQ0FBQyxnQkFBMEIsSUFBSSxFQUFFO1FBQ2hELFNBQVMsRUFBRSxPQUFPLENBQUMsbUJBQTZCLElBQUksT0FBTyxDQUFDLGdCQUEwQjtLQUN2RjtJQUVELE9BQU87SUFDUCxZQUFZLEVBQUU7UUFDWixlQUFlLEVBQUUsT0FBTyxDQUFDLDZCQUF1QztRQUNoRSxhQUFhLEVBQUUsT0FBTyxDQUFDLDJCQUFxQztRQUM1RCxTQUFTLEVBQUUsR0FBRztRQUNkLFVBQVUsRUFBRSxDQUFDO1FBQ2IsVUFBVSxFQUFFLElBQUksRUFBRSxNQUFNO0tBQ3pCO0NBRU8sQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERlc2t0b3BcXHRyYWVwcm9qZWN0XFx0ZXN0MlxccGV0LWZpbmRlci1hcHBcXGJhY2tlbmRcXHNyY1xcY29uZmlnXFxlbnZpcm9ubWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbi8vIOi8ieWFpeeSsOWig+iuiuaVuFxuZG90ZW52LmNvbmZpZygpO1xuXG4vLyDnkrDlooPorormlbjpqZforYkgc2NoZW1hXG5jb25zdCBlbnZTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgTk9ERV9FTlY6IEpvaS5zdHJpbmcoKVxuICAgIC52YWxpZCgnZGV2ZWxvcG1lbnQnLCAncHJvZHVjdGlvbicsICd0ZXN0JylcbiAgICAuZGVmYXVsdCgnZGV2ZWxvcG1lbnQnKSxcbiAgUE9SVDogSm9pLm51bWJlcigpLmRlZmF1bHQoMzAwMSksXG4gIE1PTkdPREJfVVJJOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgSldUX1NFQ1JFVDogSm9pLnN0cmluZygpLm1pbigzMikucmVxdWlyZWQoKSxcbiAgSldUX0VYUElSRVNfSU46IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCc3ZCcpLFxuICBDT1JTX09SSUdJTjogSm9pLnN0cmluZygpLmRlZmF1bHQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpLFxuICBDTE9VRElOQVJZX0NMT1VEX05BTUU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBDTE9VRElOQVJZX0FQSV9LRVk6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBDTE9VRElOQVJZX0FQSV9TRUNSRVQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBFTUFJTF9IT1NUOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnc210cC5nbWFpbC5jb20nKSxcbiAgRU1BSUxfUE9SVDogSm9pLm51bWJlcigpLmRlZmF1bHQoNTg3KSxcbiAgRU1BSUxfVVNFUjogSm9pLnN0cmluZygpLmVtYWlsKCkucmVxdWlyZWQoKSxcbiAgRU1BSUxfUEFTUzogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIEVNQUlMX0ZST01fTkFNRTogSm9pLnN0cmluZygpLmRlZmF1bHQoJ+WRvOWaleWvteeJqeWNlOWwi+e2suermScpLFxuICBFTUFJTF9GUk9NX0VNQUlMOiBKb2kuc3RyaW5nKCkuZW1haWwoKS5yZXF1aXJlZCgpLFxuICBDTElFTlRfVVJMOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwJyksXG4gIFJBVEVfTElNSVRfV0lORE9XX01TOiBKb2kubnVtYmVyKCkuZGVmYXVsdCgxNSAqIDYwICogMTAwMCksXG4gIFJBVEVfTElNSVRfTUFYX1JFUVVFU1RTOiBKb2kubnVtYmVyKCkuZGVmYXVsdCgxMDApLFxuICBMT0dfTEVWRUw6IEpvaS5zdHJpbmcoKVxuICAgIC52YWxpZCgnZXJyb3InLCAnd2FybicsICdpbmZvJywgJ2RlYnVnJylcbiAgICAuZGVmYXVsdCgnaW5mbycpLFxuICAvLyBHb29nbGUgT0F1dGgg6YWN572uXG4gIEdPT0dMRV9DTElFTlRfSUQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBHT09HTEVfQ0xJRU5UX1NFQ1JFVDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIEdPT0dMRV9DQUxMQkFDS19VUkw6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcvYXBpL2F1dGgvZ29vZ2xlL2NhbGxiYWNrJyksXG4gIC8vIFNlc3Npb24g6YWN572uXG4gIFNFU1NJT05fU0VDUkVUOiBKb2kuc3RyaW5nKCkubWluKDMyKS5yZXF1aXJlZCgpLFxuXG4gIC8vIEdvb2dsZSBWaXNpb24gQUkg6YWN572uXG4gIEdPT0dMRV9WSVNJT05fUFJPSkVDVF9JRDogSm9pLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIEdPT0dMRV9WSVNJT05fS0VZX1BBVEg6IEpvaS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBcbiAgLy8gRmlyZWJhc2Ug6YWN572uXG4gIEZJUkVCQVNFX1BST0pFQ1RfSUQ6IEpvaS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBGSVJFQkFTRV9TRVJWSUNFX0FDQ09VTlRfS0VZOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgXG4gIC8vIFNlbmRHcmlkIOmFjee9rlxuICBTRU5ER1JJRF9BUElfS0VZOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgU0VOREdSSURfRlJPTV9FTUFJTDogSm9pLnN0cmluZygpLmVtYWlsKCkub3B0aW9uYWwoKSxcbiAgXG4gIC8vIOmAmuefpemFjee9rlxuICBOT1RJRklDQVRJT05fQ0xFQU5VUF9JTlRFUlZBTDogSm9pLm51bWJlcigpLmRlZmF1bHQoNjAgKiA2MCAqIDEwMDApLCAvLyAxIOWwj+aZglxuICBOT1RJRklDQVRJT05fUkVURU5USU9OX0RBWVM6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDMwKSxcbn0pLnVua25vd24oKTtcblxuLy8g6amX6K2J55Kw5aKD6K6K5pW4XG5jb25zdCB7IGVycm9yLCB2YWx1ZTogZW52VmFycyB9ID0gZW52U2NoZW1hLnZhbGlkYXRlKHByb2Nlc3MuZW52KTtcblxuaWYgKGVycm9yKSB7XG4gIHRocm93IG5ldyBFcnJvcihg55Kw5aKD6K6K5pW46YWN572u6Yyv6KqkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG59XG5cbi8vIOWwjuWHuumFjee9rueJqeS7tlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZW52OiBlbnZWYXJzLk5PREVfRU5WIGFzICdkZXZlbG9wbWVudCcgfCAncHJvZHVjdGlvbicgfCAndGVzdCcsXG4gIHBvcnQ6IGVudlZhcnMuUE9SVCBhcyBudW1iZXIsXG4gIFxuICAvLyDos4fmlpnluqvphY3nva5cbiAgZGF0YWJhc2U6IHtcbiAgICB1cmk6IGVudlZhcnMuTU9OR09EQl9VUkkgYXMgc3RyaW5nLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIG1heFBvb2xTaXplOiAxMCxcbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCxcbiAgICAgIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsXG4gICAgfSxcbiAgfSxcbiAgXG4gIC8vIEpXVCDphY3nva5cbiAgand0OiB7XG4gICAgc2VjcmV0OiBlbnZWYXJzLkpXVF9TRUNSRVQgYXMgc3RyaW5nLFxuICAgIGV4cGlyZXNJbjogZW52VmFycy5KV1RfRVhQSVJFU19JTiBhcyBzdHJpbmcsXG4gIH0sXG4gIFxuICAvLyBDT1JTIOmFjee9rlxuICBjb3JzOiB7XG4gICAgYWxsb3dlZE9yaWdpbnM6IGVudlZhcnMuQ09SU19PUklHSU4uc3BsaXQoJywnKS5tYXAoKG9yaWdpbjogc3RyaW5nKSA9PiBvcmlnaW4udHJpbSgpKSxcbiAgfSxcbiAgXG4gIC8vIENsb3VkaW5hcnkg6YWN572uXG4gIGNsb3VkaW5hcnk6IHtcbiAgICBjbG91ZE5hbWU6IGVudlZhcnMuQ0xPVURJTkFSWV9DTE9VRF9OQU1FIGFzIHN0cmluZyxcbiAgICBhcGlLZXk6IGVudlZhcnMuQ0xPVURJTkFSWV9BUElfS0VZIGFzIHN0cmluZyxcbiAgICBhcGlTZWNyZXQ6IGVudlZhcnMuQ0xPVURJTkFSWV9BUElfU0VDUkVUIGFzIHN0cmluZyxcbiAgfSxcbiAgXG4gIC8vIOmDteS7tumFjee9rlxuICBlbWFpbDoge1xuICAgIGhvc3Q6IGVudlZhcnMuRU1BSUxfSE9TVCBhcyBzdHJpbmcsXG4gICAgcG9ydDogZW52VmFycy5FTUFJTF9QT1JUIGFzIG51bWJlcixcbiAgICBzZWN1cmU6IGVudlZhcnMuRU1BSUxfUE9SVCA9PT0gNDY1LFxuICAgIHVzZXI6IGVudlZhcnMuRU1BSUxfVVNFUiBhcyBzdHJpbmcsXG4gICAgcGFzc3dvcmQ6IGVudlZhcnMuRU1BSUxfUEFTUyBhcyBzdHJpbmcsXG4gICAgZnJvbU5hbWU6IGVudlZhcnMuRU1BSUxfRlJPTV9OQU1FIGFzIHN0cmluZyxcbiAgICBmcm9tRW1haWw6IGVudlZhcnMuRU1BSUxfRlJPTV9FTUFJTCBhcyBzdHJpbmcsXG4gIH0sXG5cbiAgLy8g5a6i5oi256uvIFVSTFxuICBjbGllbnRVcmw6IGVudlZhcnMuQ0xJRU5UX1VSTCBhcyBzdHJpbmcsXG4gIFxuICAvLyDpgJ/njofpmZDliLbphY3nva5cbiAgcmF0ZUxpbWl0OiB7XG4gICAgd2luZG93TXM6IGVudlZhcnMuUkFURV9MSU1JVF9XSU5ET1dfTVMgYXMgbnVtYmVyLFxuICAgIG1heFJlcXVlc3RzOiBlbnZWYXJzLlJBVEVfTElNSVRfTUFYX1JFUVVFU1RTIGFzIG51bWJlcixcbiAgfSxcbiAgXG4gIC8vIOaXpeiqjOmFjee9rlxuICBsb2dnaW5nOiB7XG4gICAgbGV2ZWw6IGVudlZhcnMuTE9HX0xFVkVMIGFzIHN0cmluZyxcbiAgfSxcbiAgXG4gIC8vIOaqlOahiOS4iuWCs+mFjee9rlxuICB1cGxvYWQ6IHtcbiAgICBtYXhGaWxlU2l6ZTogNSAqIDEwMjQgKiAxMDI0LCAvLyA1TUJcbiAgICBhbGxvd2VkTWltZVR5cGVzOiBbXG4gICAgICAnaW1hZ2UvanBlZycsXG4gICAgICAnaW1hZ2UvcG5nJyxcbiAgICAgICdpbWFnZS93ZWJwJyxcbiAgICAgICdpbWFnZS9naWYnLFxuICAgIF0sXG4gICAgbWF4RmlsZXM6IDUsXG4gIH0sXG4gIFxuICAvLyDliIbpoIHphY3nva5cbiAgcGFnaW5hdGlvbjoge1xuICAgIGRlZmF1bHRMaW1pdDogMjAsXG4gICAgbWF4TGltaXQ6IDEwMCxcbiAgfSxcbiAgXG4gIC8vIOW/q+WPlumFjee9rlxuICBjYWNoZToge1xuICAgIHR0bDogNSAqIDYwLCAvLyA1IOWIhumQmFxuICB9LFxuICBcbiAgLy8gR29vZ2xlIOacjeWLmemFjee9rlxuICBnb29nbGU6IHtcbiAgICBjbGllbnRJZDogZW52VmFycy5HT09HTEVfQ0xJRU5UX0lEIGFzIHN0cmluZyxcbiAgICBjbGllbnRTZWNyZXQ6IGVudlZhcnMuR09PR0xFX0NMSUVOVF9TRUNSRVQgYXMgc3RyaW5nLFxuICAgIGNhbGxiYWNrVXJsOiBlbnZWYXJzLkdPT0dMRV9DQUxMQkFDS19VUkwgYXMgc3RyaW5nLFxuICAgIHByb2plY3RJZDogZW52VmFycy5HT09HTEVfVklTSU9OX1BST0pFQ1RfSUQgYXMgc3RyaW5nIHx8ICcnLFxuICAgIHZpc2lvbktleVBhdGg6IGVudlZhcnMuR09PR0xFX1ZJU0lPTl9LRVlfUEFUSCBhcyBzdHJpbmcgfHwgJycsXG4gIH0sXG4gIFxuICAvLyBTZXNzaW9uIOmFjee9rlxuICBzZXNzaW9uOiB7XG4gICAgc2VjcmV0OiBlbnZWYXJzLlNFU1NJT05fU0VDUkVUIGFzIHN0cmluZyxcbiAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCAqIDEwMDAsIC8vIDI0IOWwj+aZglxuICB9LFxuICBcbiAgLy8gRmlyZWJhc2Ug6YWN572uXG4gIGZpcmViYXNlOiB7XG4gICAgcHJvamVjdElkOiBlbnZWYXJzLkZJUkVCQVNFX1BST0pFQ1RfSUQgYXMgc3RyaW5nIHx8ICcnLFxuICAgIHNlcnZpY2VBY2NvdW50S2V5OiBlbnZWYXJzLkZJUkVCQVNFX1NFUlZJQ0VfQUNDT1VOVF9LRVkgXG4gICAgICA/IEpTT04ucGFyc2UoZW52VmFycy5GSVJFQkFTRV9TRVJWSUNFX0FDQ09VTlRfS0VZIGFzIHN0cmluZykgXG4gICAgICA6IG51bGwsXG4gIH0sXG4gIFxuICAvLyBTZW5kR3JpZCDphY3nva5cbiAgc2VuZGdyaWQ6IHtcbiAgICBhcGlLZXk6IGVudlZhcnMuU0VOREdSSURfQVBJX0tFWSBhcyBzdHJpbmcgfHwgJycsXG4gICAgZnJvbUVtYWlsOiBlbnZWYXJzLlNFTkRHUklEX0ZST01fRU1BSUwgYXMgc3RyaW5nIHx8IGVudlZhcnMuRU1BSUxfRlJPTV9FTUFJTCBhcyBzdHJpbmcsXG4gIH0sXG4gIFxuICAvLyDpgJrnn6XphY3nva5cbiAgbm90aWZpY2F0aW9uOiB7XG4gICAgY2xlYW51cEludGVydmFsOiBlbnZWYXJzLk5PVElGSUNBVElPTl9DTEVBTlVQX0lOVEVSVkFMIGFzIG51bWJlcixcbiAgICByZXRlbnRpb25EYXlzOiBlbnZWYXJzLk5PVElGSUNBVElPTl9SRVRFTlRJT05fREFZUyBhcyBudW1iZXIsXG4gICAgYmF0Y2hTaXplOiAxMDAsXG4gICAgbWF4UmV0cmllczogMyxcbiAgICByZXRyeURlbGF5OiA1MDAwLCAvLyA1IOenklxuICB9LFxuXG59IGFzIGNvbnN0O1xuXG4vLyDlnovliKXlrprnvqlcbmV4cG9ydCB0eXBlIENvbmZpZyA9IHR5cGVvZiBjb25maWc7XG5leHBvcnQgdHlwZSBFbnZpcm9ubWVudCA9IHR5cGVvZiBjb25maWcuZW52OyJdLCJ2ZXJzaW9uIjozfQ==