{"file":"C:\\Users\\User\\Desktop\\traeproject\\test2\\pet-finder-app\\backend\\src\\routes\\reviews.ts","mappings":"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","names":[],"sources":["C:\\Users\\User\\Desktop\\traeproject\\test2\\pet-finder-app\\backend\\src\\routes\\reviews.ts"],"sourcesContent":["import express from 'express';\nimport { Request, Response } from 'express';\nimport { reviewService } from '../services/reviewService';\nimport { authenticate } from '../middleware/auth';\nimport { body, param, query } from 'express-validator';\n\nconst router = express.Router();\n\n/**\n * 創建評價\n */\nrouter.post('/',\n  authenticate,\n  [\n    body('targetUserId').isMongoId().withMessage('無效的目標用戶ID'),\n    body('rating').isInt({ min: 1, max: 5 }).withMessage('評分必須在1-5之間'),\n    body('content').optional().trim().isLength({ max: 500 }).withMessage('評價內容不能超過500字'),\n    body('petId').optional().isMongoId().withMessage('無效的寵物ID')\n  ],\n  async (req: Request, res: Response) => {\n    try {\n      const { targetUserId, rating, content, petId } = req.body;\n      const reviewerId = req.user!.id;\n\n      const review = await reviewService.createReview({\n        reviewerId,\n        targetUserId,\n        rating,\n        content,\n        petId\n      });\n\n      res.status(201).json({\n        success: true,\n        data: review,\n        message: '評價創建成功'\n      });\n    } catch (error: any) {\n      res.status(400).json({\n        success: false,\n        message: error.message || '創建評價失敗'\n      });\n    }\n  }\n);\n\n/**\n * 獲取用戶評價列表\n */\nrouter.get('/users/:userId',\n  [\n    param('userId').isMongoId().withMessage('無效的用戶ID'),\n    query('page').optional().isInt({ min: 1 }).withMessage('頁碼必須是正整數'),\n    query('limit').optional().isInt({ min: 1, max: 50 }).withMessage('每頁數量必須在1-50之間'),\n    query('rating').optional().isInt({ min: 1, max: 5 }).withMessage('評分篩選必須在1-5之間')\n  ],\n  async (req: Request, res: Response) => {\n    try {\n      const { userId } = req.params;\n      const {\n        page = 1,\n        limit = 20,\n        rating\n      } = req.query;\n\n      if (!userId) {\n        return res.status(400).json({\n          success: false,\n          message: '缺少用戶ID參數'\n        });\n      }\n\n      const result = await reviewService.getReviewsByUser(userId, {\n        page: Number(page),\n        limit: Number(limit),\n        rating: rating ? Number(rating) : undefined\n      });\n\n      return res.json({\n        success: true,\n        data: result\n      });\n    } catch (error: any) {\n      return res.status(400).json({\n        success: false,\n        message: error.message || '獲取評價列表失敗'\n      });\n    }\n  }\n);\n\n/**\n * 獲取用戶評價統計\n */\nrouter.get('/users/:userId/stats',\n  [\n    param('userId').isMongoId().withMessage('無效的用戶ID')\n  ],\n  async (req: Request, res: Response) => {\n    try {\n      const { userId } = req.params;\n\n      if (!userId) {\n        return res.status(400).json({\n          success: false,\n          message: '缺少用戶ID參數'\n        });\n      }\n\n      const stats = await reviewService.getReviewStats(userId);\n\n      return res.json({\n        success: true,\n        data: stats\n      });\n    } catch (error: any) {\n      return res.status(400).json({\n        success: false,\n        message: error.message || '獲取評價統計失敗'\n      });\n    }\n  }\n);\n\n/**\n * 更新評價\n */\nrouter.put('/:reviewId',\n  authenticate,\n  [\n    param('reviewId').isMongoId().withMessage('無效的評價ID'),\n    body('rating').optional().isInt({ min: 1, max: 5 }).withMessage('評分必須在1-5之間'),\n    body('content').optional().trim().isLength({ max: 500 }).withMessage('評價內容不能超過500字')\n  ],\n  async (req: Request, res: Response) => {\n    try {\n      const { reviewId } = req.params;\n      const { rating, content } = req.body;\n      const userId = req.user!.id;\n\n      if (!reviewId) {\n        return res.status(400).json({\n          success: false,\n          message: '缺少評價ID參數'\n        });\n      }\n\n      const review = await reviewService.updateReview(reviewId, userId, {\n        rating,\n        content\n      });\n\n      if (!review) {\n        return res.status(404).json({\n          success: false,\n          message: '評價不存在或無權限修改'\n        });\n      }\n\n      return res.json({\n        success: true,\n        data: review,\n        message: '評價更新成功'\n      });\n    } catch (error: any) {\n      return res.status(400).json({\n        success: false,\n        message: error.message || '更新評價失敗'\n      });\n    }\n  }\n);\n\n/**\n * 刪除評價\n */\nrouter.delete('/:reviewId',\n  authenticate,\n  [\n    param('reviewId').isMongoId().withMessage('無效的評價ID')\n  ],\n  async (req: Request, res: Response) => {\n    try {\n      const { reviewId } = req.params;\n      const userId = req.user!.id;\n\n      if (!reviewId) {\n        return res.status(400).json({\n          success: false,\n          message: '缺少評價ID參數'\n        });\n      }\n\n      const success = await reviewService.deleteReview(reviewId, userId);\n      if (!success) {\n        return res.status(404).json({\n          success: false,\n          message: '評價不存在或無權限刪除'\n        });\n      }\n\n      return res.json({\n        success: true,\n        message: '評價刪除成功'\n      });\n    } catch (error: any) {\n      return res.status(400).json({\n        success: false,\n        message: error.message || '刪除評價失敗'\n      });\n    }\n  }\n);\n\n/**\n * 舉報評價\n */\nrouter.post('/:reviewId/report',\n  authenticate,\n  [\n    param('reviewId').isMongoId().withMessage('無效的評價ID'),\n    body('reason').trim().isLength({ min: 1, max: 200 }).withMessage('舉報原因長度必須在1-200字之間')\n  ],\n  async (req: Request, res: Response) => {\n    try {\n      const { reviewId } = req.params;\n      const { reason } = req.body;\n      const userId = req.user!.id;\n\n      if (!reviewId) {\n        return res.status(400).json({\n          success: false,\n          message: '缺少評價ID參數'\n        });\n      }\n\n      await reviewService.reportReview(reviewId, userId, reason);\n\n      return res.json({\n        success: true,\n        message: '檢舉成功'\n      });\n    } catch (error: any) {\n      return res.status(400).json({\n        success: false,\n        message: error.message || '檢舉失敗'\n      });\n    }\n  }\n);\n\n/**\n * 檢查是否可以評價用戶\n */\nrouter.get('/can-review/:targetUserId',\n  authenticate,\n  [\n    param('targetUserId').isMongoId().withMessage('無效的目標用戶ID')\n  ],\n  async (req: Request, res: Response) => {\n    try {\n      const { targetUserId } = req.params;\n      const reviewerId = req.user!.id;\n\n      if (!targetUserId) {\n        return res.status(400).json({\n          success: false,\n          message: '缺少目標用戶ID參數'\n        });\n      }\n\n      const canReview = await reviewService.canReview(reviewerId, targetUserId);\n\n      return res.json({\n        success: true,\n        data: { canReview }\n      });\n    } catch (error: any) {\n      return res.status(400).json({\n        success: false,\n        message: error.message || '檢查評價權限失敗'\n      });\n    }\n  }\n);\n\nexport default router;"],"version":3}