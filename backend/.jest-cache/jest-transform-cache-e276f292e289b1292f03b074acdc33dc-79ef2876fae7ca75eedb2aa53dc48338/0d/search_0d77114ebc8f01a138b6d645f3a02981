60e8ce7fb44dfc84efffade184b13866
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.searchHistorySchema = exports.aiSearchSchema = exports.petSearchSchema = void 0;
const zod_1 = require("zod");
// 搜尋相關驗證架構
exports.petSearchSchema = zod_1.z.object({
    type: zod_1.z.enum(["dog", "cat", "bird", "rabbit", "other"]).optional(),
    status: zod_1.z.enum(["lost", "found", "reunited"]).optional(),
    location: zod_1.z.string().trim().optional(),
    radius: zod_1.z
        .string()
        .transform((val) => (val ? Number(val) : undefined))
        .pipe(zod_1.z.number().min(1).max(100, "搜尋半徑不能超過 100 公里"))
        .optional(),
    page: zod_1.z
        .string()
        .transform((val) => (val ? Number(val) : 1))
        .pipe(zod_1.z.number().int().min(1, "頁碼必須大於 0"))
        .default("1"),
    limit: zod_1.z
        .string()
        .transform((val) => (val ? Number(val) : 10))
        .pipe(zod_1.z.number().int().min(1).max(50, "每頁數量不能超過 50"))
        .default("10"),
    sortBy: zod_1.z.enum(["createdAt", "lastSeenDate", "reward"]).default("createdAt"),
    sortOrder: zod_1.z.enum(["asc", "desc"]).default("desc"),
    search: zod_1.z.string().trim().optional(),
    breed: zod_1.z.string().trim().optional(),
});
// AI 搜尋驗證架構
exports.aiSearchSchema = zod_1.z.object({
    description: zod_1.z
        .string()
        .trim()
        .min(1, "描述為必填項目")
        .max(500, "描述不能超過 500 個字符"),
    location: zod_1.z.string().trim().optional(),
    type: zod_1.z.enum(["dog", "cat", "bird", "rabbit", "other"]).optional(),
    status: zod_1.z.enum(["lost", "found"]).optional(),
});
// 搜尋歷史驗證架構
exports.searchHistorySchema = zod_1.z.object({
    query: zod_1.z
        .string()
        .trim()
        .min(1, "搜尋查詢為必填項目")
        .max(200, "搜尋查詢不能超過 200 個字符"),
    filters: zod_1.z
        .object({
        type: zod_1.z.enum(["dog", "cat", "bird", "rabbit", "other"]).optional(),
        status: zod_1.z.enum(["lost", "found", "reunited"]).optional(),
        location: zod_1.z.string().trim().optional(),
        radius: zod_1.z.number().min(1).max(100).optional(),
    })
        .optional(),
    resultCount: zod_1.z.number().int().min(0).optional(),
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFx0cmFlcHJvamVjdFxcdGVzdDJcXHBldC1maW5kZXItYXBwXFxiYWNrZW5kXFxzcmNcXHNjaGVtYXNcXHNlYXJjaC50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSw2QkFBd0I7QUFFeEIsV0FBVztBQUNFLFFBQUEsZUFBZSxHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7SUFDdEMsSUFBSSxFQUFFLE9BQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7SUFDbEUsTUFBTSxFQUFFLE9BQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQ3hELFFBQVEsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQ3RDLE1BQU0sRUFBRSxPQUFDO1NBQ04sTUFBTSxFQUFFO1NBQ1IsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUNuRCxJQUFJLENBQUMsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLGlCQUFpQixDQUFDLENBQUM7U0FDbkQsUUFBUSxFQUFFO0lBQ2IsSUFBSSxFQUFFLE9BQUM7U0FDSixNQUFNLEVBQUU7U0FDUixTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzNDLElBQUksQ0FBQyxPQUFDLENBQUMsTUFB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QUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFO0NBQ2hELENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERlc2t0b3BcXHRyYWVwcm9qZWN0XFx0ZXN0MlxccGV0LWZpbmRlci1hcHBcXGJhY2tlbmRcXHNyY1xcc2NoZW1hc1xcc2VhcmNoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbi8vIOaQnOWwi+ebuOmXnOmpl+itieaetuani1xuZXhwb3J0IGNvbnN0IHBldFNlYXJjaFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdHlwZTogei5lbnVtKFtcImRvZ1wiLCBcImNhdFwiLCBcImJpcmRcIiwgXCJyYWJiaXRcIiwgXCJvdGhlclwiXSkub3B0aW9uYWwoKSxcbiAgc3RhdHVzOiB6LmVudW0oW1wibG9zdFwiLCBcImZvdW5kXCIsIFwicmV1bml0ZWRcIl0pLm9wdGlvbmFsKCksXG4gIGxvY2F0aW9uOiB6LnN0cmluZygpLnRyaW0oKS5vcHRpb25hbCgpLFxuICByYWRpdXM6IHpcbiAgICAuc3RyaW5nKClcbiAgICAudHJhbnNmb3JtKCh2YWwpID0+ICh2YWwgPyBOdW1iZXIodmFsKSA6IHVuZGVmaW5lZCkpXG4gICAgLnBpcGUoei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCwgXCLmkJzlsIvljYrlvpHkuI3og73otoXpgY4gMTAwIOWFrOmHjFwiKSlcbiAgICAub3B0aW9uYWwoKSxcbiAgcGFnZTogelxuICAgIC5zdHJpbmcoKVxuICAgIC50cmFuc2Zvcm0oKHZhbCkgPT4gKHZhbCA/IE51bWJlcih2YWwpIDogMSkpXG4gICAgLnBpcGUoei5udW1iZXIoKS5pbnQoKS5taW4oMSwgXCLpoIHnorzlv4XpoIjlpKfmlrwgMFwiKSlcbiAgICAuZGVmYXVsdChcIjFcIiksXG4gIGxpbWl0OiB6XG4gICAgLnN0cmluZygpXG4gICAgLnRyYW5zZm9ybSgodmFsKSA9PiAodmFsID8gTnVtYmVyKHZhbCkgOiAxMCkpXG4gICAgLnBpcGUoei5udW1iZXIoKS5pbnQoKS5taW4oMSkubWF4KDUwLCBcIuavj+mggeaVuOmHj+S4jeiDvei2hemBjiA1MFwiKSlcbiAgICAuZGVmYXVsdChcIjEwXCIpLFxuICBzb3J0Qnk6IHouZW51bShbXCJjcmVhdGVkQXRcIiwgXCJsYXN0U2VlbkRhdGVcIiwgXCJyZXdhcmRcIl0pLmRlZmF1bHQoXCJjcmVhdGVkQXRcIiksXG4gIHNvcnRPcmRlcjogei5lbnVtKFtcImFzY1wiLCBcImRlc2NcIl0pLmRlZmF1bHQoXCJkZXNjXCIpLFxuICBzZWFyY2g6IHouc3RyaW5nKCkudHJpbSgpLm9wdGlvbmFsKCksXG4gIGJyZWVkOiB6LnN0cmluZygpLnRyaW0oKS5vcHRpb25hbCgpLFxufSk7XG5cbi8vIEFJIOaQnOWwi+mpl+itieaetuani1xuZXhwb3J0IGNvbnN0IGFpU2VhcmNoU2NoZW1hID0gei5vYmplY3Qoe1xuICBkZXNjcmlwdGlvbjogelxuICAgIC5zdHJpbmcoKVxuICAgIC50cmltKClcbiAgICAubWluKDEsIFwi5o+P6L+w54K65b+F5aGr6aCF55uuXCIpXG4gICAgLm1heCg1MDAsIFwi5o+P6L+w5LiN6IO96LaF6YGOIDUwMCDlgIvlrZfnrKZcIiksXG4gIGxvY2F0aW9uOiB6LnN0cmluZygpLnRyaW0oKS5vcHRpb25hbCgpLFxuICB0eXBlOiB6LmVudW0oW1wiZG9nXCIsIFwiY2F0XCIsIFwiYmlyZFwiLCBcInJhYmJpdFwiLCBcIm90aGVyXCJdKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IHouZW51bShbXCJsb3N0XCIsIFwiZm91bmRcIl0pLm9wdGlvbmFsKCksXG59KTtcblxuLy8g5pCc5bCL5q235Y+y6amX6K2J5p625qeLXG5leHBvcnQgY29uc3Qgc2VhcmNoSGlzdG9yeVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcXVlcnk6IHpcbiAgICAuc3RyaW5nKClcbiAgICAudHJpbSgpXG4gICAgLm1pbigxLCBcIuaQnOWwi+afpeipoueCuuW/heWhq+mgheebrlwiKVxuICAgIC5tYXgoMjAwLCBcIuaQnOWwi+afpeipouS4jeiDvei2hemBjiAyMDAg5YCL5a2X56ymXCIpLFxuICBmaWx0ZXJzOiB6XG4gICAgLm9iamVjdCh7XG4gICAgICB0eXBlOiB6LmVudW0oW1wiZG9nXCIsIFwiY2F0XCIsIFwiYmlyZFwiLCBcInJhYmJpdFwiLCBcIm90aGVyXCJdKS5vcHRpb25hbCgpLFxuICAgICAgc3RhdHVzOiB6LmVudW0oW1wibG9zdFwiLCBcImZvdW5kXCIsIFwicmV1bml0ZWRcIl0pLm9wdGlvbmFsKCksXG4gICAgICBsb2NhdGlvbjogei5zdHJpbmcoKS50cmltKCkub3B0aW9uYWwoKSxcbiAgICAgIHJhZGl1czogei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgIC5vcHRpb25hbCgpLFxuICByZXN1bHRDb3VudDogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbn0pO1xuXG4vLyDpoZ7lnovlsI7lh7pcbmV4cG9ydCB0eXBlIFBldFNlYXJjaFF1ZXJ5ID0gei5pbmZlcjx0eXBlb2YgcGV0U2VhcmNoU2NoZW1hPjtcbmV4cG9ydCB0eXBlIEFpU2VhcmNoUXVlcnkgPSB6LmluZmVyPHR5cGVvZiBhaVNlYXJjaFNjaGVtYT47XG5leHBvcnQgdHlwZSBTZWFyY2hIaXN0b3J5RGF0YSA9IHouaW5mZXI8dHlwZW9mIHNlYXJjaEhpc3RvcnlTY2hlbWE+O1xuIl0sInZlcnNpb24iOjN9