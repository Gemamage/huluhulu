0c567e3fe5afdbe289c0639007425ebb
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.config = void 0;
const dotenv_1 = __importDefault(require("dotenv"));
const joi_1 = __importDefault(require("joi"));
// 載入環境變數
dotenv_1.default.config();
// 環境變數驗證 schema
const envSchema = joi_1.default.object({
    NODE_ENV: joi_1.default.string()
        .valid("development", "production", "test")
        .default("development"),
    PORT: joi_1.default.number().default(3001),
    MONGODB_URI: joi_1.default.string().required(),
    JWT_SECRET: joi_1.default.string().min(32).required(),
    JWT_EXPIRES_IN: joi_1.default.string().default("7d"),
    CORS_ORIGIN: joi_1.default.string().default("http://localhost:3000"),
    CLOUDINARY_CLOUD_NAME: joi_1.default.string().required(),
    CLOUDINARY_API_KEY: joi_1.default.string().required(),
    CLOUDINARY_API_SECRET: joi_1.default.string().required(),
    EMAIL_HOST: joi_1.default.string().default("smtp.gmail.com"),
    EMAIL_PORT: joi_1.default.number().default(587),
    EMAIL_USER: joi_1.default.string().email().required(),
    EMAIL_PASS: joi_1.default.string().required(),
    EMAIL_FROM_NAME: joi_1.default.string().default("呼嚕寵物協尋網站"),
    EMAIL_FROM_EMAIL: joi_1.default.string().email().required(),
    CLIENT_URL: joi_1.default.string().default("http://localhost:3000"),
    RATE_LIMIT_WINDOW_MS: joi_1.default.number().default(15 * 60 * 1000),
    RATE_LIMIT_MAX_REQUESTS: joi_1.default.number().default(100),
    LOG_LEVEL: joi_1.default.string()
        .valid("error", "warn", "info", "debug")
        .default("info"),
    // Google OAuth 配置
    GOOGLE_CLIENT_ID: joi_1.default.string().required(),
    GOOGLE_CLIENT_SECRET: joi_1.default.string().required(),
    GOOGLE_CALLBACK_URL: joi_1.default.string().default("/api/auth/google/callback"),
    // Session 配置
    SESSION_SECRET: joi_1.default.string().min(32).required(),
    // Google Vision AI 配置
    GOOGLE_VISION_PROJECT_ID: joi_1.default.string().optional(),
    GOOGLE_VISION_KEY_PATH: joi_1.default.string().optional(),
    // Firebase 配置
    FIREBASE_PROJECT_ID: joi_1.default.string().optional(),
    FIREBASE_SERVICE_ACCOUNT_KEY: joi_1.default.string().optional(),
    // SendGrid 配置
    SENDGRID_API_KEY: joi_1.default.string().optional(),
    SENDGRID_FROM_EMAIL: joi_1.default.string().email().optional(),
    // 通知配置
    NOTIFICATION_CLEANUP_INTERVAL: joi_1.default.number().default(60 * 60 * 1000), // 1 小時
    NOTIFICATION_RETENTION_DAYS: joi_1.default.number().default(30),
}).unknown();
// 驗證環境變數
const { error, value: envVars } = envSchema.validate(process.env);
if (error) {
    throw new Error(`環境變數配置錯誤: ${error.message}`);
}
// 導出配置物件
exports.config = {
    env: envVars.NODE_ENV,
    port: envVars.PORT,
    // 資料庫配置
    database: {
        uri: envVars.MONGODB_URI,
        options: {
            maxPoolSize: 10,
            serverSelectionTimeoutMS: 5000,
            socketTimeoutMS: 45000,
        },
    },
    // JWT 配置
    jwt: {
        secret: envVars.JWT_SECRET,
        expiresIn: envVars.JWT_EXPIRES_IN,
    },
    // CORS 配置
    cors: {
        allowedOrigins: envVars.CORS_ORIGIN.split(",").map((origin) => origin.trim()),
    },
    // Cloudinary 配置
    cloudinary: {
        cloudName: envVars.CLOUDINARY_CLOUD_NAME,
        apiKey: envVars.CLOUDINARY_API_KEY,
        apiSecret: envVars.CLOUDINARY_API_SECRET,
    },
    // 郵件配置
    email: {
        host: envVars.EMAIL_HOST,
        port: envVars.EMAIL_PORT,
        secure: envVars.EMAIL_PORT === 465,
        user: envVars.EMAIL_USER,
        password: envVars.EMAIL_PASS,
        fromName: envVars.EMAIL_FROM_NAME,
        fromEmail: envVars.EMAIL_FROM_EMAIL,
    },
    // 客戶端 URL
    clientUrl: envVars.CLIENT_URL,
    // 速率限制配置
    rateLimit: {
        windowMs: envVars.RATE_LIMIT_WINDOW_MS,
        maxRequests: envVars.RATE_LIMIT_MAX_REQUESTS,
    },
    // 日誌配置
    logging: {
        level: envVars.LOG_LEVEL,
    },
    // 檔案上傳配置
    upload: {
        maxFileSize: 5 * 1024 * 1024, // 5MB
        allowedMimeTypes: ["image/jpeg", "image/png", "image/webp", "image/gif"],
        maxFiles: 5,
    },
    // 分頁配置
    pagination: {
        defaultLimit: 20,
        maxLimit: 100,
    },
    // 快取配置
    cache: {
        ttl: 5 * 60, // 5 分鐘
    },
    // Google 服務配置
    google: {
        clientId: envVars.GOOGLE_CLIENT_ID,
        clientSecret: envVars.GOOGLE_CLIENT_SECRET,
        callbackUrl: envVars.GOOGLE_CALLBACK_URL,
        projectId: envVars.GOOGLE_VISION_PROJECT_ID || "",
        visionKeyPath: envVars.GOOGLE_VISION_KEY_PATH || "",
    },
    // Session 配置
    session: {
        secret: envVars.SESSION_SECRET,
        maxAge: 24 * 60 * 60 * 1000, // 24 小時
    },
    // Firebase 配置
    firebase: {
        projectId: envVars.FIREBASE_PROJECT_ID || "",
        serviceAccountKey: envVars.FIREBASE_SERVICE_ACCOUNT_KEY
            ? JSON.parse(envVars.FIREBASE_SERVICE_ACCOUNT_KEY)
            : null,
    },
    // SendGrid 配置
    sendgrid: {
        apiKey: envVars.SENDGRID_API_KEY || "",
        fromEmail: envVars.SENDGRID_FROM_EMAIL ||
            envVars.EMAIL_FROM_EMAIL,
    },
    // 通知配置
    notification: {
        cleanupInterval: envVars.NOTIFICATION_CLEANUP_INTERVAL,
        retentionDays: envVars.NOTIFICATION_RETENTION_DAYS,
        batchSize: 100,
        maxRetries: 3,
        retryDelay: 5000, // 5 秒
    },
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFx0cmFlcHJvamVjdFxcdGVzdDJcXHBldC1maW5kZXItYXBwXFxiYWNrZW5kXFxzcmNcXGNvbmZpZ1xcZW52aXJvbm1lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsb0RBQTRCO0FBQzVCLDhDQUFzQjtBQUV0QixTQUFTO0FBQ1QsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUVoQixnQkFBZ0I7QUFDaEIsTUFBTSxTQUFTLEdBQUcsYUFBRyxDQUFDLE1BQU0sQ0FBQztJQUMzQixRQUFRLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRTtTQUNuQixLQUFLLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUM7U0FDMUMsT0FBTyxDQUFDLGFBQWEsQ0FBQztJQUN6QixJQUFJLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDaEMsV0FBVyxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDcEMsVUFBVSxFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQzNDLGNBQWMsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztJQUMxQyxXQUFXLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztJQUMxRCxxQkFBcUIsRUFBRSxhQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQzlDLGtCQUFrQixFQUFFLGFBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7SUFDM0MscUJBQXFCLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUM5QyxVQUFVLEVBQUUsYUFBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztJQUNsRCxVQUFV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TUFBTSxFQUFHLE9BQU8sQ0FBQyxnQkFBMkIsSUFBSSxFQUFFO1FBQ2xELFNBQVMsRUFDTixPQUFPLENBQUMsbUJBQThCO1lBQ3RDLE9BQU8sQ0FBQyxnQkFBMkI7S0FDdkM7SUFFRCxPQUFPO0lBQ1AsWUFBWSxFQUFFO1FBQ1osZUFBZSxFQUFFLE9BQU8sQ0FBQyw2QkFBdUM7UUFDaEUsYUFBYSxFQUFFLE9BQU8sQ0FBQywyQkFBcUM7UUFDNUQsU0FBUyxFQUFFLEdBQUc7UUFDZCxVQUFVLEVBQUUsQ0FBQztRQUNiLFVBQVUsRUFBRSxJQUFJLEVBQUUsTUFBTTtLQUN6QjtDQUNPLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFx0cmFlcHJvamVjdFxcdGVzdDJcXHBldC1maW5kZXItYXBwXFxiYWNrZW5kXFxzcmNcXGNvbmZpZ1xcZW52aXJvbm1lbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgSm9pIGZyb20gXCJqb2lcIjtcblxuLy8g6LyJ5YWl55Kw5aKD6K6K5pW4XG5kb3RlbnYuY29uZmlnKCk7XG5cbi8vIOeSsOWig+iuiuaVuOmpl+itiSBzY2hlbWFcbmNvbnN0IGVudlNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBOT0RFX0VOVjogSm9pLnN0cmluZygpXG4gICAgLnZhbGlkKFwiZGV2ZWxvcG1lbnRcIiwgXCJwcm9kdWN0aW9uXCIsIFwidGVzdFwiKVxuICAgIC5kZWZhdWx0KFwiZGV2ZWxvcG1lbnRcIiksXG4gIFBPUlQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDMwMDEpLFxuICBNT05HT0RCX1VSSTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIEpXVF9TRUNSRVQ6IEpvaS5zdHJpbmcoKS5taW4oMzIpLnJlcXVpcmVkKCksXG4gIEpXVF9FWFBJUkVTX0lOOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChcIjdkXCIpLFxuICBDT1JTX09SSUdJTjogSm9pLnN0cmluZygpLmRlZmF1bHQoXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIiksXG4gIENMT1VESU5BUllfQ0xPVURfTkFNRTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIENMT1VESU5BUllfQVBJX0tFWTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIENMT1VESU5BUllfQVBJX1NFQ1JFVDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIEVNQUlMX0hPU1Q6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KFwic210cC5nbWFpbC5jb21cIiksXG4gIEVNQUlMX1BPUlQ6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDU4NyksXG4gIEVNQUlMX1VTRVI6IEpvaS5zdHJpbmcoKS5lbWFpbCgpLnJlcXVpcmVkKCksXG4gIEVNQUlMX1BBU1M6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBFTUFJTF9GUk9NX05BTUU6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KFwi5ZG85ZqV5a+154mp5Y2U5bCL57ay56uZXCIpLFxuICBFTUFJTF9GUk9NX0VNQUlMOiBKb2kuc3RyaW5nKCkuZW1haWwoKS5yZXF1aXJlZCgpLFxuICBDTElFTlRfVVJMOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiKSxcbiAgUkFURV9MSU1JVF9XSU5ET1dfTVM6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDE1ICogNjAgKiAxMDAwKSxcbiAgUkFURV9MSU1JVF9NQVhfUkVRVUVTVFM6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDEwMCksXG4gIExPR19MRVZFTDogSm9pLnN0cmluZygpXG4gICAgLnZhbGlkKFwiZXJyb3JcIiwgXCJ3YXJuXCIsIFwiaW5mb1wiLCBcImRlYnVnXCIpXG4gICAgLmRlZmF1bHQoXCJpbmZvXCIpLFxuICAvLyBHb29nbGUgT0F1dGgg6YWN572uXG4gIEdPT0dMRV9DTElFTlRfSUQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBHT09HTEVfQ0xJRU5UX1NFQ1JFVDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIEdPT0dMRV9DQUxMQkFDS19VUkw6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KFwiL2FwaS9hdXRoL2dvb2dsZS9jYWxsYmFja1wiKSxcbiAgLy8gU2Vzc2lvbiDphY3nva5cbiAgU0VTU0lPTl9TRUNSRVQ6IEpvaS5zdHJpbmcoKS5taW4oMzIpLnJlcXVpcmVkKCksXG5cbiAgLy8gR29vZ2xlIFZpc2lvbiBBSSDphY3nva5cbiAgR09PR0xFX1ZJU0lPTl9QUk9KRUNUX0lEOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgR09PR0xFX1ZJU0lPTl9LRVlfUEFUSDogSm9pLnN0cmluZygpLm9wdGlvbmFsKCksXG5cbiAgLy8gRmlyZWJhc2Ug6YWN572uXG4gIEZJUkVCQVNFX1BST0pFQ1RfSUQ6IEpvaS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBGSVJFQkFTRV9TRVJWSUNFX0FDQ09VTlRfS0VZOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKSxcblxuICAvLyBTZW5kR3JpZCDphY3nva5cbiAgU0VOREdSSURfQVBJX0tFWTogSm9pLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIFNFTkRHUklEX0ZST01fRU1BSUw6IEpvaS5zdHJpbmcoKS5lbWFpbCgpLm9wdGlvbmFsKCksXG5cbiAgLy8g6YCa55+l6YWN572uXG4gIE5PVElGSUNBVElPTl9DTEVBTlVQX0lOVEVSVkFMOiBKb2kubnVtYmVyKCkuZGVmYXVsdCg2MCAqIDYwICogMTAwMCksIC8vIDEg5bCP5pmCXG4gIE5PVElGSUNBVElPTl9SRVRFTlRJT05fREFZUzogSm9pLm51bWJlcigpLmRlZmF1bHQoMzApLFxufSkudW5rbm93bigpO1xuXG4vLyDpqZforYnnkrDlooPorormlbhcbmNvbnN0IHsgZXJyb3IsIHZhbHVlOiBlbnZWYXJzIH0gPSBlbnZTY2hlbWEudmFsaWRhdGUocHJvY2Vzcy5lbnYpO1xuXG5pZiAoZXJyb3IpIHtcbiAgdGhyb3cgbmV3IEVycm9yKGDnkrDlooPorormlbjphY3nva7pjK/oqqQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbn1cblxuLy8g5bCO5Ye66YWN572u54mp5Lu2XG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBlbnY6IGVudlZhcnMuTk9ERV9FTlYgYXMgXCJkZXZlbG9wbWVudFwiIHwgXCJwcm9kdWN0aW9uXCIgfCBcInRlc3RcIixcbiAgcG9ydDogZW52VmFycy5QT1JUIGFzIG51bWJlcixcblxuICAvLyDos4fmlpnluqvphY3nva5cbiAgZGF0YWJhc2U6IHtcbiAgICB1cmk6IGVudlZhcnMuTU9OR09EQl9VUkkgYXMgc3RyaW5nLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIG1heFBvb2xTaXplOiAxMCxcbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCxcbiAgICAgIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsXG4gICAgfSxcbiAgfSxcblxuICAvLyBKV1Qg6YWN572uXG4gIGp3dDoge1xuICAgIHNlY3JldDogZW52VmFycy5KV1RfU0VDUkVUIGFzIHN0cmluZyxcbiAgICBleHBpcmVzSW46IGVudlZhcnMuSldUX0VYUElSRVNfSU4gYXMgc3RyaW5nLFxuICB9LFxuXG4gIC8vIENPUlMg6YWN572uXG4gIGNvcnM6IHtcbiAgICBhbGxvd2VkT3JpZ2luczogZW52VmFycy5DT1JTX09SSUdJTi5zcGxpdChcIixcIikubWFwKChvcmlnaW46IHN0cmluZykgPT5cbiAgICAgIG9yaWdpbi50cmltKCksXG4gICAgKSxcbiAgfSxcblxuICAvLyBDbG91ZGluYXJ5IOmFjee9rlxuICBjbG91ZGluYXJ5OiB7XG4gICAgY2xvdWROYW1lOiBlbnZWYXJzLkNMT1VESU5BUllfQ0xPVURfTkFNRSBhcyBzdHJpbmcsXG4gICAgYXBpS2V5OiBlbnZWYXJzLkNMT1VESU5BUllfQVBJX0tFWSBhcyBzdHJpbmcsXG4gICAgYXBpU2VjcmV0OiBlbnZWYXJzLkNMT1VESU5BUllfQVBJX1NFQ1JFVCBhcyBzdHJpbmcsXG4gIH0sXG5cbiAgLy8g6YO15Lu26YWN572uXG4gIGVtYWlsOiB7XG4gICAgaG9zdDogZW52VmFycy5FTUFJTF9IT1NUIGFzIHN0cmluZyxcbiAgICBwb3J0OiBlbnZWYXJzLkVNQUlMX1BPUlQgYXMgbnVtYmVyLFxuICAgIHNlY3VyZTogZW52VmFycy5FTUFJTF9QT1JUID09PSA0NjUsXG4gICAgdXNlcjogZW52VmFycy5FTUFJTF9VU0VSIGFzIHN0cmluZyxcbiAgICBwYXNzd29yZDogZW52VmFycy5FTUFJTF9QQVNTIGFzIHN0cmluZyxcbiAgICBmcm9tTmFtZTogZW52VmFycy5FTUFJTF9GUk9NX05BTUUgYXMgc3RyaW5nLFxuICAgIGZyb21FbWFpbDogZW52VmFycy5FTUFJTF9GUk9NX0VNQUlMIGFzIHN0cmluZyxcbiAgfSxcblxuICAvLyDlrqLmiLbnq68gVVJMXG4gIGNsaWVudFVybDogZW52VmFycy5DTElFTlRfVVJMIGFzIHN0cmluZyxcblxuICAvLyDpgJ/njofpmZDliLbphY3nva5cbiAgcmF0ZUxpbWl0OiB7XG4gICAgd2luZG93TXM6IGVudlZhcnMuUkFURV9MSU1JVF9XSU5ET1dfTVMgYXMgbnVtYmVyLFxuICAgIG1heFJlcXVlc3RzOiBlbnZWYXJzLlJBVEVfTElNSVRfTUFYX1JFUVVFU1RTIGFzIG51bWJlcixcbiAgfSxcblxuICAvLyDml6XoqozphY3nva5cbiAgbG9nZ2luZzoge1xuICAgIGxldmVsOiBlbnZWYXJzLkxPR19MRVZFTCBhcyBzdHJpbmcsXG4gIH0sXG5cbiAgLy8g5qqU5qGI5LiK5YKz6YWN572uXG4gIHVwbG9hZDoge1xuICAgIG1heEZpbGVTaXplOiA1ICogMTAyNCAqIDEwMjQsIC8vIDVNQlxuICAgIGFsbG93ZWRNaW1lVHlwZXM6IFtcImltYWdlL2pwZWdcIiwgXCJpbWFnZS9wbmdcIiwgXCJpbWFnZS93ZWJwXCIsIFwiaW1hZ2UvZ2lmXCJdLFxuICAgIG1heEZpbGVzOiA1LFxuICB9LFxuXG4gIC8vIOWIhumggemFjee9rlxuICBwYWdpbmF0aW9uOiB7XG4gICAgZGVmYXVsdExpbWl0OiAyMCxcbiAgICBtYXhMaW1pdDogMTAwLFxuICB9LFxuXG4gIC8vIOW/q+WPlumFjee9rlxuICBjYWNoZToge1xuICAgIHR0bDogNSAqIDYwLCAvLyA1IOWIhumQmFxuICB9LFxuXG4gIC8vIEdvb2dsZSDmnI3li5nphY3nva5cbiAgZ29vZ2xlOiB7XG4gICAgY2xpZW50SWQ6IGVudlZhcnMuR09PR0xFX0NMSUVOVF9JRCBhcyBzdHJpbmcsXG4gICAgY2xpZW50U2VjcmV0OiBlbnZWYXJzLkdPT0dMRV9DTElFTlRfU0VDUkVUIGFzIHN0cmluZyxcbiAgICBjYWxsYmFja1VybDogZW52VmFycy5HT09HTEVfQ0FMTEJBQ0tfVVJMIGFzIHN0cmluZyxcbiAgICBwcm9qZWN0SWQ6IChlbnZWYXJzLkdPT0dMRV9WSVNJT05fUFJPSkVDVF9JRCBhcyBzdHJpbmcpIHx8IFwiXCIsXG4gICAgdmlzaW9uS2V5UGF0aDogKGVudlZhcnMuR09PR0xFX1ZJU0lPTl9LRVlfUEFUSCBhcyBzdHJpbmcpIHx8IFwiXCIsXG4gIH0sXG5cbiAgLy8gU2Vzc2lvbiDphY3nva5cbiAgc2Vzc2lvbjoge1xuICAgIHNlY3JldDogZW52VmFycy5TRVNTSU9OX1NFQ1JFVCBhcyBzdHJpbmcsXG4gICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLCAvLyAyNCDlsI/mmYJcbiAgfSxcblxuICAvLyBGaXJlYmFzZSDphY3nva5cbiAgZmlyZWJhc2U6IHtcbiAgICBwcm9qZWN0SWQ6IChlbnZWYXJzLkZJUkVCQVNFX1BST0pFQ1RfSUQgYXMgc3RyaW5nKSB8fCBcIlwiLFxuICAgIHNlcnZpY2VBY2NvdW50S2V5OiBlbnZWYXJzLkZJUkVCQVNFX1NFUlZJQ0VfQUNDT1VOVF9LRVlcbiAgICAgID8gSlNPTi5wYXJzZShlbnZWYXJzLkZJUkVCQVNFX1NFUlZJQ0VfQUNDT1VOVF9LRVkgYXMgc3RyaW5nKVxuICAgICAgOiBudWxsLFxuICB9LFxuXG4gIC8vIFNlbmRHcmlkIOmFjee9rlxuICBzZW5kZ3JpZDoge1xuICAgIGFwaUtleTogKGVudlZhcnMuU0VOREdSSURfQVBJX0tFWSBhcyBzdHJpbmcpIHx8IFwiXCIsXG4gICAgZnJvbUVtYWlsOlxuICAgICAgKGVudlZhcnMuU0VOREdSSURfRlJPTV9FTUFJTCBhcyBzdHJpbmcpIHx8XG4gICAgICAoZW52VmFycy5FTUFJTF9GUk9NX0VNQUlMIGFzIHN0cmluZyksXG4gIH0sXG5cbiAgLy8g6YCa55+l6YWN572uXG4gIG5vdGlmaWNhdGlvbjoge1xuICAgIGNsZWFudXBJbnRlcnZhbDogZW52VmFycy5OT1RJRklDQVRJT05fQ0xFQU5VUF9JTlRFUlZBTCBhcyBudW1iZXIsXG4gICAgcmV0ZW50aW9uRGF5czogZW52VmFycy5OT1RJRklDQVRJT05fUkVURU5USU9OX0RBWVMgYXMgbnVtYmVyLFxuICAgIGJhdGNoU2l6ZTogMTAwLFxuICAgIG1heFJldHJpZXM6IDMsXG4gICAgcmV0cnlEZWxheTogNTAwMCwgLy8gNSDnp5JcbiAgfSxcbn0gYXMgY29uc3Q7XG5cbi8vIOWei+WIpeWumue+qVxuZXhwb3J0IHR5cGUgQ29uZmlnID0gdHlwZW9mIGNvbmZpZztcbmV4cG9ydCB0eXBlIEVudmlyb25tZW50ID0gdHlwZW9mIGNvbmZpZy5lbnY7XG4iXSwidmVyc2lvbiI6M30=