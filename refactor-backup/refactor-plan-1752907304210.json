{
  "originalFile": "C:\\Users\\User\\Desktop\\traeproject\\test2\\pet-finder-app\\frontend\\src\\components\\pets\\lost-pet-form.tsx",
  "backupFile": "C:\\Users\\User\\Desktop\\traeproject\\test2\\pet-finder-app\\refactor-backup\\lost-pet-form.tsx.2025-07-19T06-41-44-206Z.backup",
  "timestamp": "2025-07-19T06:41:44.210Z",
  "suggestions": [
    {
      "type": "split-functions",
      "priority": "high",
      "description": "拆分大型函數",
      "items": [
        {
          "name": "handleSubmit",
          "startLine": 208,
          "content": [
            "const handleSubmit = async (e: React.FormEvent) => {",
            "e.preventDefault();",
            "",
            "if (!validateForm()) {",
            "toast({",
            "title: '表單驗證失敗',",
            "description: '請檢查並填寫所有必填欄位',",
            "variant: 'destructive',",
            "});",
            "return;",
            "}",
            "",
            "try {",
            "await onSubmit(formData);",
            "} catch (error) {",
            "console.error('表單提交失敗:', error);",
            "}",
            "};",
            "",
            "return (",
            "<form onSubmit={handleSubmit} className=\"space-y-6\">",
            "{/* 基本資訊 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold flex items-center gap-2\">",
            "<Heart className=\"h-5 w-5\" />",
            "寵物基本資訊 *",
            "</h3>",
            "<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">",
            "<div>",
            "<Label htmlFor=\"name\">寵物名稱 *</Label>",
            "<Input",
            "id=\"name\"",
            "value={formData.name}",
            "onChange={(e) => handleInputChange('name', e.target.value)}",
            "placeholder=\"請填寫寵物的名字\"",
            "className={errors.name ? 'border-red-500' : ''}",
            "/>",
            "{errors.name && <p className=\"text-sm text-red-500 mt-1\">{errors.name}</p>}",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"type\">動物類型 *</Label>",
            "<select",
            "id=\"type\"",
            "value={formData.type}",
            "onChange={(e) => handleInputChange('type', e.target.value)}",
            "className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"",
            ">",
            "<option value=\"dog\">狗</option>",
            "<option value=\"cat\">貓</option>",
            "<option value=\"bird\">鳥</option>",
            "<option value=\"rabbit\">兔子</option>",
            "<option value=\"hamster\">倉鼠</option>",
            "<option value=\"fish\">魚</option>",
            "<option value=\"reptile\">爬蟲類</option>",
            "<option value=\"other\">其他</option>",
            "</select>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"breed\">品種 *</Label>",
            "<MultiSelectTags",
            "value={formData.breed}",
            "onChange={(value) => handleInputChange('breed', value)}",
            "options={getCurrentBreedOptions()}",
            "placeholder=\"選擇或輸入品種\"",
            "error={errors.breed}",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"gender\">性別 *</Label>",
            "<select",
            "id=\"gender\"",
            "value={formData.gender}",
            "onChange={(e) => handleInputChange('gender', e.target.value)}",
            "className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"",
            ">",
            "<option value=\"male\">公</option>",
            "<option value=\"female\">母</option>",
            "</select>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"age\">年齡 *</Label>",
            "<select",
            "id=\"age\"",
            "value={formData.age}",
            "onChange={(e) => handleInputChange('age', e.target.value)}",
            "className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"",
            ">",
            "<option value=\"puppy\">幼體</option>",
            "<option value=\"young\">年輕</option>",
            "<option value=\"adult\">成年</option>",
            "<option value=\"senior\">老年</option>",
            "</select>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"size\">體型大小 *</Label>",
            "<select",
            "id=\"size\"",
            "value={formData.size}",
            "onChange={(e) => handleInputChange('size', e.target.value)}",
            "className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"",
            ">",
            "<option value=\"small\">小型</option>",
            "<option value=\"medium\">中型</option>",
            "<option value=\"large\">大型</option>",
            "</select>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"color\">毛色/顏色 *</Label>",
            "<MultiSelectTags",
            "value={formData.color}",
            "onChange={(value) => handleInputChange('color', value)}",
            "options={colorOptions}",
            "placeholder=\"選擇或輸入毛色\"",
            "error={errors.color}",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"weight\">體重（公斤）</Label>",
            "<Input",
            "id=\"weight\"",
            "type=\"number\"",
            "step=\"0.1\"",
            "value={formData.weight || ''}",
            "onChange={(e) => handleInputChange('weight', e.target.value ? parseFloat(e.target.value) : undefined)}",
            "placeholder=\"例如：5.5\"",
            "/>",
            "</div>",
            "</div>",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 外觀與個性描述 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold flex items-center gap-2\">",
            "<Heart className=\"h-5 w-5\" />",
            "外觀與個性描述 *",
            "</h3>",
            "<div className=\"space-y-4\">",
            "<div>",
            "<Label htmlFor=\"appearance\">外觀特徵 *</Label>",
            "<MultiSelectTags",
            "value={formData.appearance}",
            "onChange={(value) => handleInputChange('appearance', value)}",
            "options={appearanceOptions}",
            "placeholder=\"選擇或輸入外觀特徵\"",
            "error={errors.appearance}",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"personality\">個性特徵 *</Label>",
            "<MultiSelectTags",
            "value={formData.personality}",
            "onChange={(value) => handleInputChange('personality', value)}",
            "options={personalityOptions}",
            "placeholder=\"選擇或輸入個性特徵\"",
            "error={errors.personality}",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"specialMarks\">特殊標記</Label>",
            "<Textarea",
            "id=\"specialMarks\"",
            "value={formData.specialMarks}",
            "onChange={(e) => handleInputChange('specialMarks', e.target.value)}",
            "placeholder=\"例如：疤痕、胎記、特殊毛色分布、缺失部位等\"",
            "rows={2}",
            "/>",
            "</div>",
            "</div>",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 寵物照片 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold flex items-center gap-2\">",
            "<Camera className=\"h-5 w-5\" />",
            "寵物照片 *",
            "</h3>",
            "<p className=\"text-sm text-gray-600\">請上傳清晰的寵物照片，有助於他人識別</p>",
            "<ImageUpload",
            "images={formData.images}",
            "onImagesChange={(images) => handleInputChange('images', images)}",
            "maxImages={8}",
            "maxFileSize={5}",
            "/>",
            "{errors.images && <p className=\"text-sm text-red-500 mt-1\">{errors.images}</p>}",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 走失資訊 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold flex items-center gap-2\">",
            "<AlertTriangle className=\"h-5 w-5\" />",
            "走失資訊 *",
            "</h3>",
            "<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">",
            "<div>",
            "<Label htmlFor=\"lostDate\">走失日期 *</Label>",
            "<Input",
            "id=\"lostDate\"",
            "type=\"date\"",
            "value={formData.lostDate}",
            "onChange={(e) => handleInputChange('lostDate', e.target.value)}",
            "className={errors.lostDate ? 'border-red-500' : ''}",
            "/>",
            "{errors.lostDate && <p className=\"text-sm text-red-500 mt-1\">{errors.lostDate}</p>}",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"lostTime\">走失時間（大約）</Label>",
            "<Input",
            "id=\"lostTime\"",
            "type=\"time\"",
            "value={formData.lostTime}",
            "onChange={(e) => handleInputChange('lostTime', e.target.value)}",
            "/>",
            "</div>",
            "",
            "<div className=\"md:col-span-2\">",
            "<Label htmlFor=\"lostLocation\">走失地點 *</Label>",
            "<CascadingLocationSelect",
            "value={formData.lostLocation}",
            "onChange={(value) => handleInputChange('lostLocation', value)}",
            "error={errors['lostLocation.address']}",
            "/>",
            "</div>",
            "",
            "<div className=\"md:col-span-2\">",
            "<Label htmlFor=\"circumstances\">走失經過</Label>",
            "<Textarea",
            "id=\"circumstances\"",
            "value={formData.circumstances}",
            "onChange={(e) => handleInputChange('circumstances', e.target.value)}",
            "placeholder=\"請描述走失的經過，例如：散步時掙脫牽繩、開門時跑出等\"",
            "rows={3}",
            "/>",
            "</div>",
            "</div>",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 識別資訊 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold\">識別資訊</h3>",
            "",
            "<div className=\"space-y-4\">",
            "<div>",
            "<Label htmlFor=\"microchipId\">晶片號碼</Label>",
            "<Input",
            "id=\"microchipId\"",
            "value={formData.microchipId}",
            "onChange={(e) => handleInputChange('microchipId', e.target.value)}",
            "placeholder=\"如有植入晶片請填寫號碼\"",
            "/>",
            "</div>",
            "",
            "<div className=\"flex items-center space-x-2\">",
            "<input",
            "type=\"checkbox\"",
            "id=\"hasCollar\"",
            "checked={formData.hasCollar}",
            "onChange={(e) => handleInputChange('hasCollar', e.target.checked)}",
            "className=\"rounded border-gray-300\"",
            "/>",
            "<Label htmlFor=\"hasCollar\">有佩戴項圈</Label>",
            "</div>",
            "",
            "{formData.hasCollar && (",
            "<div>",
            "<Label htmlFor=\"collarDescription\">項圈描述</Label>",
            "<Input",
            "id=\"collarDescription\"",
            "value={formData.collarDescription}",
            "onChange={(e) => handleInputChange('collarDescription', e.target.value)}",
            "placeholder=\"請描述項圈的顏色、材質、是否有吊牌等\"",
            "/>",
            "</div>",
            ")}",
            "</div>",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 健康資訊 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold\">健康資訊</h3>",
            "",
            "<div className=\"space-y-4\">",
            "<div>",
            "<Label htmlFor=\"healthCondition\">健康狀況</Label>",
            "<Textarea",
            "id=\"healthCondition\"",
            "value={formData.healthCondition}",
            "onChange={(e) => handleInputChange('healthCondition', e.target.value)}",
            "placeholder=\"例如：健康良好、有慢性疾病、需要特殊照護等\"",
            "rows={2}",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"medications\">用藥情況</Label>",
            "<Textarea",
            "id=\"medications\"",
            "value={formData.medications}",
            "onChange={(e) => handleInputChange('medications', e.target.value)}",
            "placeholder=\"如有定期用藥請說明藥物名稱和用法\"",
            "rows={2}",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"veterinarian\">常去的獸醫院</Label>",
            "<Input",
            "id=\"veterinarian\"",
            "value={formData.veterinarian}",
            "onChange={(e) => handleInputChange('veterinarian', e.target.value)}",
            "placeholder=\"例如：XX動物醫院（地址）\"",
            "/>",
            "</div>",
            "</div>",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 聯絡資訊 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold flex items-center gap-2\">",
            "<User className=\"h-5 w-5\" />",
            "您的聯絡資訊 *",
            "</h3>",
            "<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">",
            "<div>",
            "<Label htmlFor=\"ownerName\">您的稱呼 *</Label>",
            "<Input",
            "id=\"ownerName\"",
            "value={formData.ownerContact.name}",
            "onChange={(e) => handleInputChange('ownerContact.name', e.target.value)}",
            "placeholder=\"例如：陳小姐、熱心的王先生\"",
            "className={errors['ownerContact.name'] ? 'border-red-500' : ''}",
            "/>",
            "{errors['ownerContact.name'] && <p className=\"text-sm text-red-500 mt-1\">{errors['ownerContact.name']}</p>}",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"ownerPhone\">聯絡電話 *</Label>",
            "<Input",
            "id=\"ownerPhone\"",
            "value={formData.ownerContact.phone}",
            "onChange={(e) => handleInputChange('ownerContact.phone', e.target.value)}",
            "placeholder=\"請填寫可聯絡的電話號碼\"",
            "className={errors['ownerContact.phone'] ? 'border-red-500' : ''}",
            "/>",
            "{errors['ownerContact.phone'] && <p className=\"text-sm text-red-500 mt-1\">{errors['ownerContact.phone']}</p>}",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"ownerEmail\">電子郵件</Label>",
            "<Input",
            "id=\"ownerEmail\"",
            "type=\"email\"",
            "value={formData.ownerContact.email}",
            "onChange={(e) => handleInputChange('ownerContact.email', e.target.value)}",
            "placeholder=\"選填，方便聯絡\"",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"preferredContact\">偏好聯絡方式</Label>",
            "<select",
            "id=\"preferredContact\"",
            "value={formData.ownerContact.preferredContact}",
            "onChange={(e) => handleInputChange('ownerContact.preferredContact', e.target.value)}",
            "className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"",
            ">",
            "<option value=\"phone\">電話</option>",
            "<option value=\"email\">電子郵件</option>",
            "</select>",
            "</div>",
            "</div>",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 獎金資訊 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold flex items-center gap-2\">",
            "<Gift className=\"h-5 w-5\" />",
            "獎金資訊",
            "</h3>",
            "<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">",
            "<div>",
            "<Label htmlFor=\"reward\">獎金金額（新台幣）</Label>",
            "<Input",
            "id=\"reward\"",
            "type=\"number\"",
            "value={formData.reward || ''}",
            "onChange={(e) => handleInputChange('reward', e.target.value ? parseInt(e.target.value) : undefined)}",
            "placeholder=\"例如：5000\"",
            "/>",
            "</div>",
            "",
            "<div>",
            "<Label htmlFor=\"rewardDescription\">獎金說明</Label>",
            "<Input",
            "id=\"rewardDescription\"",
            "value={formData.rewardDescription}",
            "onChange={(e) => handleInputChange('rewardDescription', e.target.value)}",
            "placeholder=\"例如：平安歸來即給付、需提供線索等\"",
            "/>",
            "</div>",
            "</div>",
            "</div>",
            "",
            "<Separator />",
            "",
            "{/* 其他資訊 */}",
            "<div className=\"space-y-4\">",
            "<h3 className=\"text-lg font-semibold\">其他資訊</h3>",
            "",
            "<div>",
            "<Label htmlFor=\"additionalNotes\">補充說明</Label>",
            "<Textarea",
            "id=\"additionalNotes\"",
            "value={formData.additionalNotes}",
            "onChange={(e) => handleInputChange('additionalNotes', e.target.value)}",
            "placeholder=\"任何其他想要補充的資訊\"",
            "rows={3}",
            "/>",
            "</div>",
            "</div>",
            "",
            "{/* 提交按鈕 */}",
            "<div className=\"flex justify-end pt-6\">",
            "<Button",
            "type=\"submit\"",
            "disabled={isLoading}",
            "className=\"px-8 py-2\"",
            ">",
            "{isLoading ? '提交中...' : '發布走失協尋'}",
            "</Button>",
            "</div>",
            "</form>",
            ");",
            "}"
          ],
          "endLine": 664,
          "lineCount": 457
        }
      ]
    }
  ],
  "createdFiles": [],
  "modifiedFiles": []
}